# DIME — Data In Motion Enterprise
# Full Documentation for LLM Consumption
#
# DIME is a high-performance data integration platform that connects industrial
# and enterprise systems using a connector-based architecture. It uses the
# Disruptor pattern for low-latency message passing between sources and sinks.
# Configuration is YAML-based. Supports 42+ connector types across PLCs,
# databases, message brokers, APIs, and robotics systems.
#
# This file contains the complete DIME documentation — 107 pages covering
# concepts, architecture, examples, and connector reference.
# Each page is separated by a marker line. Content is verbatim ASCII art.

================================================================================
FILE: content/CON01-what-is-dime.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        Data In Motion Enterprise                      │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘        ─────────────────────────                      │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Connect Once. Use Everywhere.                  │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘                                                         │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐        The universal connector for                    │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘        industrial & enterprise data.                  │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   https://github.com/DataInMotionEnterprise                                                      │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE PROBLEM                                                                                    │
│   ───────────                                                                                    │
│                                                                                                  │
│   Every device needs a custom integration to every destination.                                  │
│   5 devices x 4 destinations = 20 custom integrations to build and maintain.                     │
│                                                                                                  │
│    CNC ──────────┬──────────────┬──────────────┬──────────────┐                                  │
│                  │              │              │              │                                  │
│    PLC ──────────┼──────────────┼──────────────┼──────────────┤                                  │
│                  │              │              │              │                                  │
│    Robot ────────┼──────────────┼──────────────┼──────────────┤                                  │
│                  │              │              │              │                                  │
│    Sensor ───────┼──────────────┼──────────────┼──────────────┤                                  │
│                  │              │              │              │                                  │
│    MQTT ─────────┼──────────────┼──────────────┼──────────────┤                                  │
│                  │              │              │              │                                  │
│                  ▼              ▼              ▼              ▼                                  │
│              InfluxDB       Splunk        Dashboard       MongoDB                                │
│                                                                                                  │
│                  20 point-to-point integrations.                                                 │
│                  20 things to build. 20 things that break.                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE DIME SOLUTION                                                                              │
│   ─────────────────                                                                              │
│                                                                                                  │
│   Every device connects to DIME. DIME connects to every destination.                             │
│   5 devices + 4 destinations = 9 simple YAML configs. That's it.                                 │
│                                                                                                  │
│                                  ┌───────────────────┐                                           │
│                                  │                   │                                           │
│    CNC ─────────────────────────▶│                   │──────────────────────▶ InfluxDB           │
│                                  │                   │                                           │
│    PLC ─────────────────────────▶│       DIME        │──────────────────────▶ Splunk             │
│                                  │                   │                                           │
│    Robot ───────────────────────▶│    ╭───────────╮  │──────────────────────▶ Dashboard          │
│                                  │    │Ring Buffer│  │                                           │
│    Sensor ──────────────────────▶│    │  < 1ms    │  │──────────────────────▶ MongoDB            │
│                                  │    │  1M+ /sec │  │                                           │
│    MQTT ────────────────────────▶│    ╰───────────╯  │                                           │
│                                  │                   │                                           │
│                                  └───────────────────┘                                           │
│                                                                                                  │
│                  9 configs.  Zero custom code.  One platform.                                    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   HOW IT WORKS                                                                                   │
│   ────────────                                                                                   │
│                                                                                                  │
│      ┌─────────────┐          ┌───────────┐          ┌──────────────┐                            │
│      │             │          │           │          │              │                            │
│      │   SOURCES   │─────────▶│   RING    │─────────▶│    SINKS     │                            │
│      │             │          │  BUFFER   │          │              │                            │
│      │  Read data  │          │           │          │  Write data  │                            │
│      │  from any   │          │  Lock-free│          │  to any      │                            │
│      │  device or  │          │  message  │          │  database,   │                            │
│      │  protocol   │          │  passing  │          │  queue, or   │                            │
│      │             │          │           │          │  API         │                            │
│      └─────────────┘          └───────────┘          └──────────────┘                            │
│                                      │                                                           │
│                              ┌───────┴───────┐                                                   │
│                              │  Lua/Python   │                                                   │
│                              │  transforms   │                                                   │
│                              │  at any stage │                                                   │
│                              └───────────────┘                                                   │
│                                                                                                  │
│      1. Configure a SOURCE       Point it at your device.                                        │
│      2. Configure a SINK         Point it at your destination.                                   │
│      3. Run DIME                 Data flows. Done.                                               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHAT CAN IT CONNECT?                                                                           │
│   ─────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   INDUSTRIAL              MESSAGING            DATABASES           WEB & API             │   │
│   │   ──────────              ─────────            ─────────           ─────────             │   │
│   │                                                                                          │   │
│   │   OPC-UA                  MQTT                 InfluxDB            HTTP / REST           │   │
│   │   OPC-DA                  SparkplugB           MongoDB             WebSocket             │   │
│   │   Siemens S7              ActiveMQ             SQL Server          JSON Scraper          │   │
│   │   Modbus TCP              Redis Pub/Sub        PostgreSQL          XML Scraper           │   │
│   │   EtherNet/IP                                                      UDP Server            │   │
│   │   Beckhoff ADS            MANUFACTURING        ANALYTICS                                 │   │
│   │   MTConnect               ─────────────        ─────────           SCRIPTING             │   │
│   │   FANUC Robot                                                      ─────────             │   │
│   │   Yaskawa Robot           MTConnect Agent       Splunk HEC                               │   │
│   │   Haas SHDR               MTConnect SHDR        Splunk Edge Hub    Lua                   │   │
│   │   SNMP                    SmartPac              CSV / File         Python                │   │
│   │   ROS2                                                                                   │   │
│   │                                                                                          │   │
│   │                                    47+ connector types                                   │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHY DIME?                                                                                      │
│   ─────────                                                                                      │
│                                                                                                  │
│   ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐     │
│   │                   │  │                   │  │                   │  │                   │     │
│   │    ZERO CODE      │  │   SUB-MILLISECOND │  │    RUN ANYWHERE   │  │    ZERO DOWNTIME  │     │
│   │                   │  │                   │  │                   │  │                   │     │
│   │  YAML config.     │  │  Lock-free ring   │  │  Windows Service  │  │  Add connectors   │     │
│   │  Lua/Python for   │  │  buffer. Handles  │  │  Linux daemon     │  │  at runtime via   │     │
│   │  transforms.      │  │  1M+ messages     │  │  Docker container │  │  REST API. No     │     │
│   │  No compiling.    │  │  per second.      │  │  x86, x64, ARM64  │  │  restart needed.  │     │
│   │  No deploying.    │  │                   │  │                   │  │                   │     │
│   │                   │  │                   │  │                   │  │                   │     │
│   └───────────────────┘  └───────────────────┘  └───────────────────┘  └───────────────────┘     │
│                                                                                                  │
│   ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐     │
│   │                   │  │                   │  │                   │  │                   │     │
│   │    47+ PROTOCOLS  │  │    SMART ROUTING  │  │    SCRIPTABLE     │  │    CHAINABLE      │     │
│   │                   │  │                   │  │                   │  │                   │     │
│   │  Industrial,      │  │  Report By        │  │  Lua & Python     │  │  Link instances   │     │
│   │  enterprise,      │  │  Exception.       │  │  inline or file.  │  │  edge to cloud.   │     │
│   │  cloud, and       │  │  Include/exclude  │  │  Transform, fork, │  │  Any DIME sink    │     │
│   │  IoT protocols    │  │  regex filters    │  │  aggregate, and   │  │  feeds any DIME   │     │
│   │  out of the box.  │  │  per sink.        │  │  enrich data.     │  │  source.          │     │
│   │                   │  │                   │  │                   │  │                   │     │
│   └───────────────────┘  └───────────────────┘  └───────────────────┘  └───────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FROM PLC TO DATABASE IN 12 LINES OF YAML                                                       │
│   ─────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   sources:                                                                   │               │
│   │     - name: my_plc                                                           │               │
│   │       connector: OpcUA                                                       │               │
│   │       address: 192.168.1.10                                                  │               │
│   │       items:                                                                 │               │
│   │         - name: Temperature                                                  │               │
│   │           address: ns=2;s=PLC.Temp                                           │               │
│   │                                                                              │               │
│   │   sinks:                                                                     │               │
│   │     - name: my_database                                                      │               │
│   │       connector: InfluxLP                                                    │               │
│   │       address: https://my-influxdb.com                                       │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   That's a complete, working integration.  PLC data in a time-series database.                   │
│   Need Splunk too?  Add 3 lines.   Need 50 more machines?  Copy the source block.                │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON02-the-dime-ecosystem.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        02 — The DIME Ecosystem                        │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Three tiers. Two apps.                         │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          One unified platform.                          │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE DIME PLATFORM                                                                              │
│   ─────────────────                                                                              │
│                                                                                                  │
│   Three products and two desktop apps form one unified platform for                              │
│   industrial data collection, site management, and fleet-wide command.                           │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│                          ┌──────────────────────────────────────────┐                            │
│                          │          DIME ZENITH  (Cloud)            │                            │
│                          │                                          │                            │
│                          │   Centralized fleet command & control    │   ┌──────────────────┐     │
│                          │   MongoDB-backed configuration store     │   │   Zenith UX      │     │
│                          │   Manages 100s of Horizons               │   │                  │     │
│                          │   Web dashboard + REST API               │   │   Fleet-wide     │     │
│                          │                                          │   │   monitoring     │     │
│                          └─────────────────────┬────────────────────┘   │   desktop app    │     │
│                                                │                        │                  │     │
│                               Horizon PULLS    │  config, updates,      └──────────────────┘     │
│                               from Zenith      │  firmware, commands                             │
│                               (no inbound      │                                                 │
│                                firewall rules) ▼                                                 │
│                                                                                                  │
│                          ┌──────────────────────────────────────────┐                            │
│                          │          DIME HORIZON  (Gateway)         │                            │
│                          │                                          │                            │
│                          │   Site-level gateway & connector mgr     │                            │
│                          │   Bridges edge to cloud                  │                            │
│                          │   Manages dozens of Connectors per site  │                            │
│                          │   Pulls config from Zenith on check-in   │                            │
│                          │                                          │                            │
│                          └─────────────────────┬────────────────────┘                            │
│                                                │                                                 │
│                               Horizon pushes   │  config, schedules,                             │
│                               to Connectors    │  start/stop commands                            │
│                                                ▼                                                 │
│                                                                                                  │
│                          ┌──────────────────────────────────────────┐                            │
│                          │          DIME CONNECTOR  (Edge)          │   ┌──────────────────┐     │
│                          │                                          │   │   Connector UX   │     │
│                          │   Collects data from 47+ protocols       │   │                  │     │
│                          │   Runs on the factory floor              │   │   Local mgmt     │     │
│                          │   YAML-configured sources & sinks        │   │   desktop app    │     │
│                          │   Disruptor ring buffer at the core      │   │                  │     │
│                          │                                          │   └──────────────────┘     │
│                          └──────────────────────────────────────────┘                            │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   COMMUNICATION MODEL                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   All communication is pull-based from the edge outward.                                         │
│   No inbound firewall rules required at any tier.                                                │
│                                                                                                  │
│     Connector ◀────────────── Horizon ──────────────▶ Zenith                                     │
│          │    pushes config        │   pulls config       │                                      │
│          │    & commands           │   & updates          │                                      │
│          │                         │                      │                                      │
│          ▼                         ▼                      ▼                                      │
│     Factory Floor             Site Gateway           Cloud C2                                    │
│     47+ protocols             Bridges edge           Fleet-wide                                  │
│     sub-ms latency            to cloud               command                                     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ENTERPRISE SCALE                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│    ┌────────┐         ┌────────┐  ┌────────┐  ┌────────┐         ┌─────┐┌─────┐┌─────┐           │
│    │        │         │        │  │        │  │        │         │     ││     ││     │           │
│    │ ZENITH │────────▶│HORIZON │  │HORIZON │  │HORIZON │────────▶│ CON ││ CON ││ CON │           │
│    │        │    ...  │  Site1 │  │  Site2 │  │  SiteN │   ...   │     ││     ││     │           │
│    │ 1 inst │         │        │  │        │  │        │         │     ││     ││     │           │
│    └────────┘         └───┬────┘  └───┬────┘  └───┬────┘         └─────┘└─────┘└─────┘           │
│                           │           │           │                                              │
│                      10-50 CON   10-50 CON   10-50 CON                                           │
│                      per site    per site    per site                                            │
│                                                                                                  │
│    1 Zenith  ──▶  100s of Horizons  ──▶  Dozens of Connectors per Horizon                        │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON03-installation.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        03 — Installation & First Run                  │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          From zero to running in minutes.               │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Any platform. Any architecture.                │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   PLATFORM MATRIX                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   DIME runs anywhere .NET 9.0 runs. Self-contained — no runtime to install.                      │
│                                                                                                  │
│   ┌──────────────────┬────────────┬───────────────────────────────────────────────┐              │
│   │  Platform        │  Arch      │  Deployment                                   │              │
│   ├──────────────────┼────────────┼───────────────────────────────────────────────┤              │
│   │                  │            │                                               │              │
│   │  Windows         │  x86       │  DIME.exe — Standalone or Windows Service     │              │
│   │  Windows         │  x64       │  DIME.exe — Standalone or Windows Service     │              │
│   │  Linux           │  x64       │  ./DIME   — Standalone or systemd service     │              │
│   │  Linux           │  ARM64     │  ./DIME   — Edge gateways, Raspberry Pi       │              │
│   │  Docker          │  x64/ARM64 │  Multi-arch container image                   │              │
│   │  Docker + ROS2   │  x64       │  Humble or Jazzy ROS2 base image              │              │
│   │                  │            │                                               │              │
│   └──────────────────┴────────────┴───────────────────────────────────────────────┘              │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WINDOWS INSTALLATION                                                                           │
│   ─────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│     OPTION A — Run standalone                                                                    │
│                                                                                                  │
│     ┌────────────────────────────────────────────────────────────────────────────┐               │
│     │                                                                            │               │
│     │   1.  Extract the DIME release zip                                         │               │
│     │                                                                            │               │
│     │   2.  Place your YAML configs in the Configs\ folder                       │               │
│     │                                                                            │               │
│     │   3.  Run:                                                                 │               │
│     │                                                                            │               │
│     │       > DIME.exe                                                           │               │
│     │                                                                            │               │
│     │       Or with a custom config directory:                                   │               │
│     │                                                                            │               │
│     │       > DIME.exe --config C:\MyProject\Configs                             │               │
│     │                                                                            │               │
│     │   4.  Verify:                                                              │               │
│     │                                                                            │               │
│     │       > curl http://localhost:9999/status                                  │               │
│     │                                                                            │               │
│     └────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│     OPTION B — Install as a Windows Service                                                      │
│                                                                                                  │
│     ┌────────────────────────────────────────────────────────────────────────────┐               │
│     │                                                                            │               │
│     │   Install:                                                                 │               │
│     │                                                                            │               │
│     │       > DIME.exe install                                                   │               │
│     │                                                                            │               │
│     │   With a named instance (run multiple side by side):                       │               │
│     │                                                                            │               │
│     │       > DIME.exe install /instance:Plant1                                  │               │
│     │       > DIME.exe install /instance:Plant2                                  │               │
│     │                                                                            │               │
│     │   Creates service "DIME" or "DIME$Plant1" in Windows Services.             │               │
│     │   Runs as Local System. Starts automatically (delayed).                    │               │
│     │                                                                            │               │
│     │   Uninstall:                                                               │               │
│     │                                                                            │               │
│     │       > DIME.exe uninstall /instance:Plant1                                │               │
│     │                                                                            │               │
│     └────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│     OPTION C — PowerShell management script                                                      │
│                                                                                                  │
│     ┌────────────────────────────────────────────────────────────────────────────┐               │
│     │                                                                            │               │
│     │       > .\Manage-Services-Windows.ps1                                      │               │
│     │                                                                            │               │
│     │       Interactive menu:                                                    │               │
│     │         [1] Show installed DIME services                                   │               │
│     │         [2] Install new service (prompts for name + config path)           │               │
│     │         [3] Uninstall a service                                            │               │
│     │         [4] Exit                                                           │               │
│     │                                                                            │               │
│     └────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   LINUX INSTALLATION                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│     OPTION A — Run standalone                                                                    │
│                                                                                                  │
│     ┌────────────────────────────────────────────────────────────────────────────┐               │
│     │                                                                            │               │
│     │   $ tar -xzf dime-connector-linux-x64.tar.gz                               │               │
│     │   $ cd dime-connector                                                      │               │
│     │   $ chmod +x DIME                                                          │               │
│     │   $ ./DIME run                                                             │               │
│     │                                                                            │               │
│     │   With custom configs:                                                     │               │
│     │                                                                            │               │
│     │   $ ./DIME run --config /etc/dime/my-configs                               │               │
│     │                                                                            │               │
│     └────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│     OPTION B — Install as a systemd service                                                      │
│                                                                                                  │
│     ┌────────────────────────────────────────────────────────────────────────────┐               │
│     │                                                                            │               │
│     │   $ sudo ./install-dime-connector.sh dime-connector-linux-x64.tar.gz       │               │
│     │                                                                            │               │
│     │   Options:                                                                 │               │
│     │     -d, --config-dir <dir>     Custom config directory                     │               │
│     │     -c, --config <file>        Custom main.yaml                            │               │
│     │     -l, --log-config <file>    Custom nlog.config                          │               │
│     │     -u, --user <username>      User to run as (default: current)           │               │
│     │                                                                            │               │
│     │   Installs to:                                                             │               │
│     │     Binary ──── /opt/dime-connector/DIME                                   │               │
│     │     Config ──── /opt/dime-connector/main.yaml                              │               │
│     │     Logs ────── /opt/dime-connector/Logs/                                  │               │
│     │     Service ─── /etc/systemd/system/dime-connector.service                 │               │
│     │                                                                            │               │
│     │   Manage:                                                                  │               │
│     │     $ sudo systemctl start dime-connector                                  │               │
│     │     $ sudo systemctl stop dime-connector                                   │               │
│     │     $ sudo systemctl status dime-connector                                 │               │
│     │     $ journalctl -u dime-connector -f          (follow logs)               │               │
│     │                                                                            │               │
│     │   Uninstall:                                                               │               │
│     │     $ sudo ./install-dime-connector.sh -U                                  │               │
│     │                                                                            │               │
│     └────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DOCKER                                                                                         │
│   ──────                                                                                         │
│                                                                                                  │
│     ┌────────────────────────────────────────────────────────────────────────────┐               │
│     │                                                                            │               │
│     │   Run with a config directory mounted as a volume:                         │               │
│     │                                                                            │               │
│     │   $ docker run -d \                                                        │               │
│     │       -v /path/to/configs:/app/Configs \                                   │               │
│     │       -p 9999:9999 \                                                       │               │
│     │       -p 9998:9998 \                                                       │               │
│     │       --name dime \                                                        │               │
│     │       datainmotionenterprise/connector:latest                              │               │
│     │                                                                            │               │
│     │   Expose additional ports as needed by your sinks:                         │               │
│     │                                                                            │               │
│     │   $ docker run -d \                                                        │               │
│     │       -v /path/to/configs:/app/Configs \                                   │               │
│     │       -p 9999:9999 \     Admin REST API                                    │               │
│     │       -p 9998:9998 \     Admin WebSocket                                   │               │
│     │       -p 5000:5000 \     MTConnect Agent (if configured)                   │               │
│     │       -p 7878:7878 \     MTConnect SHDR (if configured)                    │               │
│     │       -p 8092:8092 \     WebSocket Server (if configured)                  │               │
│     │       datainmotionenterprise/connector:latest                              │               │
│     │                                                                            │               │
│     │   Available images:                                                        │               │
│     │     datainmotionenterprise/connector:latest              Standard          │               │
│     │     datainmotionenterprise/connector:latest-ros2-humble  ROS2 Humble       │               │
│     │     datainmotionenterprise/connector:latest-ros2-jazzy   ROS2 Jazzy        │               │
│     │                                                                            │               │
│     └────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHAT HAPPENS AT STARTUP                                                                        │
│   ─────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   When you run DIME, here's what happens inside — in order.                                      │
│                                                                                                  │
│   ┌─ 1 ─────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │  LOAD CONFIGURATION                                                                     │    │
│   │                                                                                         │    │
│   │  Read all *.yaml files from the config directory.                                       │    │
│   │  Merge them together. Load main.yaml last (overrides others).                           │    │
│   │  Parse app settings, source definitions, sink definitions.                              │    │
│   │                                                                                         │    │
│   │  Config directory:  --config flag, or ./Configs by default.                             │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                           │                                      │
│                                                           v                                      │
│   ┌─ 2 ─────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │  VALIDATE LICENSE                                                                       │    │
│   │                                                                                         │    │
│   │  Check the license key in app.license.                                                  │    │
│   │  Valid license ────── Full operation, no time limit.                                    │    │
│   │  No/invalid license ─ Demo mode: runs for 150 minutes, then stops.                      │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                           │                                      │
│                                                           v                                      │
│   ┌─ 3 ─────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │  START DISRUPTOR RING BUFFER                                                            │    │
│   │                                                                                         │    │
│   │  Create the ring buffer (default 4096 slots).                                           │    │
│   │  Register the SinkDispatcher as the event handler.                                      │    │
│   │  This is the backbone — all messages flow through here.                                 │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                           │                                      │
│                                                           v                                      │
│   ┌─ 4 ─────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │  CREATE CONNECTORS                                                                      │    │
│   │                                                                                         │    │
│   │  For each source in config ─── SourceConnectorFactory creates the right connector type. │    │
│   │  For each sink in config ───── SinkConnectorFactory creates it and registers with       │    │
│   │                                SinkDispatcher so it receives messages.                  │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                           │                                      │
│                                                           v                                      │
│   ┌─ 5 ─────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │  INITIALIZE & START ALL CONNECTORS                                                      │    │
│   │                                                                                         │    │
│   │  Each connector wrapped in a ConnectorRunner.                                           │    │
│   │  Each runner walks through: Initialize → Create → Connect → Read/Write loop.            │    │
│   │  Sources begin polling. Sinks begin listening. Data flows.                              │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                           │                                      │
│                                                           v                                      │
│   ┌─ 6 ─────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │  START ADMIN SERVER                                                                     │    │
│   │                                                                                         │    │
│   │  REST API ─── http://localhost:9999   (status, config, cache, runtime sink injection)   │    │
│   │  WebSocket ── ws://localhost:9998     (real-time events, telemetry, state changes)      │    │
│   │                                                                                         │    │
│   │  DIME is now running. Data is flowing.                                                  │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DIRECTORY LAYOUT                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│   What you see after extracting and running DIME.                                                │
│                                                                                                  │
│     DIME/                                                                                        │
│     ├── DIME.exe                (or ./DIME on Linux)                                             │
│     ├── DIME.dll                                                                                 │
│     │                                                                                            │
│     ├── Configs/                                                                                 │
│     │   ├── main.yaml           App settings + connector references                              │
│     │   ├── source1.yaml        Source connector config                                          │
│     │   ├── sink1.yaml          Sink connector config                                            │
│     │   └── ...                 As many YAML files as you need                                   │
│     │                                                                                            │
│     ├── Logs/                   Created automatically at first run                               │
│     │   ├── 2026-02-19.log     Daily rolling log files                                           │
│     │   └── internal.log       NLog internal diagnostics                                         │
│     │                                                                                            │
│     ├── Lua/                    Lua utility libraries                                            │
│     ├── Python/                 Python scripts                                                   │
│     ├── nlog.config             Logging configuration                                            │
│     └── ...                     Runtime dependencies                                             │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   VERIFY IT WORKS                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   Three ways to confirm DIME is running and healthy.                                             │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────┐       │
│   │                                                                                      │       │
│   │  1. CONSOLE OUTPUT                                                                   │       │
│   │                                                                                      │       │
│   │     If running standalone, you'll see connector activity in the terminal:            │       │
│   │                                                                                      │       │
│   │     DIME | Data In Motion Enterprise                                                 │       │
│   │     Machine simulator initialized                                                    │       │
│   │     machine state = IDLE                                                             │       │
│   │     machine state = SETUP                                                            │       │
│   │     machine state = RUNNING                                                          │       │
│   │     parts total = 1                                                                  │       │
│   │                                                                                      │       │
│   ├──────────────────────────────────────────────────────────────────────────────────────┤       │
│   │                                                                                      │       │
│   │  2. REST API                                                                         │       │
│   │                                                                                      │       │
│   │     $ curl http://localhost:9999/status                                              │       │
│   │                                                                                      │       │
│   │     Returns JSON with every connector's state, fault count,                          │       │
│   │     and performance metrics.                                                         │       │
│   │                                                                                      │       │
│   ├──────────────────────────────────────────────────────────────────────────────────────┤       │
│   │                                                                                      │       │
│   │  3. LOG FILES                                                                        │       │
│   │                                                                                      │       │
│   │     Check Logs/ directory for today's log.                                           │       │
│   │     Default level: WARN and above.                                                   │       │
│   │     Change log level in nlog.config for more detail.                                 │       │
│   │                                                                                      │       │
│   └──────────────────────────────────────────────────────────────────────────────────────┘       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DEFAULT PORTS                                                                                  │
│   ─────────────                                                                                  │
│                                                                                                  │
│   ┌─────────┬──────────────────────────────────────┬─────────────────────────────┐               │
│   │  Port   │  Service                             │  Configured In              │               │
│   ├─────────┼──────────────────────────────────────┼─────────────────────────────┤               │
│   │  9999   │  Admin REST API (always on)          │  app.http_server_uri        │               │
│   │  9998   │  Admin WebSocket (always on)         │  app.ws_server_uri          │               │
│   │  5000   │  MTConnect Agent (if configured)     │  sink: port                 │               │
│   │  7878   │  MTConnect SHDR (if configured)      │  sink: port                 │               │
│   │  8080   │  HTTP Server (if configured)         │  sink: uri                  │               │
│   │  8092   │  WebSocket Server (if configured)    │  sink: uri                  │               │
│   └─────────┴──────────────────────────────────────┴─────────────────────────────┘               │
│                                                                                                  │
│   Only 9999 and 9998 are always active. All others depend on your sink configuration.            │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   QUICK START — ZERO TO RUNNING IN 60 SECONDS                                                    │
│   ─────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│       ┌───────────┐         ┌───────────┐         ┌───────────┐         ┌───────────┐            │
│       │           │         │           │         │           │         │           │            │
│       │  EXTRACT  │────────▶│  EDIT     │────────▶│  RUN      │────────▶│  VERIFY   │            │
│       │           │         │  YAML     │         │           │         │           │            │
│       │  Unzip    │         │           │         │  DIME.exe │         │  curl     │            │
│       │  the      │         │  Point at │         │           │         │  :9999    │            │
│       │  release  │         │  your     │         │  or       │         │  /status  │            │
│       │           │         │  device   │         │  ./DIME   │         │           │            │
│       │           │         │           │         │  run      │         │  Done.    │            │
│       └───────────┘         └───────────┘         └───────────┘         └───────────┘            │
│                                                                                                  │
│       No installer.  No dependencies.  No runtime.  Just extract and run.                        │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON04-yaml-basics.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        04 — YAML Configuration                        │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          The three-section structure that               │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          powers everything.                             │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THREE TOP-LEVEL SECTIONS                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   Every DIME YAML config has exactly three sections:                                             │
│                                                                                                  │
│   ┌───────────────────────────┐  ┌───────────────────────────┐  ┌───────────────────────────┐    │
│   │                           │  │                           │  │                           │    │
│   │   app:                    │  │   sources:                │  │   sinks:                  │    │
│   │     license: XXXX-XXXX    │  │     - name: my_plc        │  │     - name: my_db         │    │
│   │     ring_buffer: !!int    │  │       connector: OpcUA    │  │       connector: InfluxLP │    │
│   │       4096                │  │       scan_interval: 1000 │  │       include_filter: .*  │    │
│   │     http_server_uri:      │  │       items:              │  │       exclude_filter: ""  │    │
│   │       http://*:9999       │  │         - name: Temp      │  │                           │    │
│   │     ws_server_uri:        │  │           address: ns=2   │  │                           │    │
│   │       ws://*:9998         │  │                           │  │                           │    │
│   │                           │  │                           │  │                           │    │
│   └───────────────────────────┘  └───────────────────────────┘  └───────────────────────────┘    │
│                                                                                                  │
│    Global settings               Data producers              Data consumers                      │
│    License, buffer,              Connectors that READ         Connectors that WRITE              │
│    admin server URIs             from devices/protocols       to databases/APIs/files            │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SOURCE ANATOMY                                                                                 │
│   ──────────────                                                                                 │
│                                                                                                  │
│   Every source connector follows the same structure:                                             │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sources:                                                                             │     │
│   │     - name: my_plc                      # unique name for this source                  │     │
│   │       connector: OpcUA                  # connector type (protocol)                    │     │
│   │       scan_interval: !!int 1000         # poll every 1000ms                            │     │
│   │       rbe: !!bool true                  # report by exception (changes only)           │     │
│   │       enabled: !!bool true              # set false to disable without deleting        │     │
│   │       items:                            # data points to read                          │     │
│   │         - name: Temperature             #   display name / path segment                │     │
│   │           address: ns=2;s=PLC.Temp      #   protocol-specific address                  │     │
│   │           script: lua/transform.lua     #   optional transform script                  │     │
│   │           enabled: !!bool true          #   disable individual items                   │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SINK ANATOMY                                                                                   │
│   ────────────                                                                                   │
│                                                                                                  │
│   Every sink connector follows the same structure:                                               │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sinks:                                                                               │     │
│   │     - name: my_database                 # unique name for this sink                    │     │
│   │       connector: InfluxLP               # connector type (destination)                 │     │
│   │       enabled: !!bool true              # set false to disable without deleting        │     │
│   │       include_filter:                   # list of regex — which paths to accept        │     │
│   │         - ".*"                          # (default: accept everything)                 │     │
│   │       exclude_filter:                   # list of regex — which paths to reject        │     │
│   │         - "source/$SYSTEM"              # (applied only when include_filter is empty)  │     │
│   │       address: https://influx.local     # destination address                          │     │
│   │                                                                                        │     │
│   │   Filters match against the message path: "source_name/item_name"                      │     │
│   │   If include_filter has entries, only matching paths are accepted.                     │     │
│   │   If include_filter is empty, exclude_filter rejects matching paths.                   │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ITEM ANATOMY                                                                                   │
│   ────────────                                                                                   │
│                                                                                                  │
│   Items are the individual data points inside a source:                                          │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   items:                                                                               │     │
│   │     - name: Temperature                 # becomes path: "source_name/Temperature"      │     │
│   │       address: ns=2;s=PLC.Temp          # protocol-specific address on the device      │     │
│   │       script: |                         # inline Lua transform                         │     │
│   │         return result * 1.8 + 32        #   convert Celsius to Fahrenheit              │     │
│   │       rbe: !!bool true                  # per-item RBE override                        │     │
│   │       enabled: !!bool true              # disable this item without removing it        │     │
│   │                                                                                        │     │
│   │   The name + source name form the message PATH used for sink filtering.                │     │
│   │   Example: source "my_plc" + item "Temperature" = path "my_plc/Temperature"            │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   YAML TYPE TAGS — Values that aren't strings need type hints:                                   │
│                                                                                                  │
│       !!bool true       !!bool false       !!int 4096       !!int 1000                           │
│                                                                                                  │
│   Without tags, YAML treats everything as a string. DIME requires typed values for               │
│   booleans and integers in its configuration.                                                    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FILE LOADING — Single-File vs Multi-File                                                       │
│   ────────────────────────────────────────                                                       │
│                                                                                                  │
│   DIME reads ALL *.yaml files from the config directory and merges them:                         │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   Configs/                                                                             │     │
│   │   ├── main.yaml           ← loaded LAST (overrides all others)                         │     │
│   │   ├── opcua-source.yaml   ← merged into sources[]                                      │     │
│   │   ├── modbus-source.yaml  ← merged into sources[]                                      │     │
│   │   ├── influx-sink.yaml    ← merged into sinks[]                                        │     │
│   │   └── mqtt-sink.yaml      ← merged into sinks[]                                        │     │
│   │                                                                                        │     │
│   │   Merge order:                                                                         │     │
│   │     1. All *.yaml files loaded (filesystem order)                                      │     │
│   │     2. main.yaml loaded LAST — its values override everything                          │     │
│   │     3. Arrays (sources[], sinks[]) are concatenated, not replaced                      │     │
│   │                                                                                        │     │
│   │   YAML anchors & aliases work across files:                                            │     │
│   │     Define: &defaults { scan_interval: !!int 1000, rbe: !!bool true }                  │     │
│   │     Reuse:  <<: *defaults                                                              │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MINIMAL WORKING EXAMPLE                                                                        │
│   ───────────────────────                                                                        │
│                                                                                                  │
│   The smallest possible config — a Script source writing to Console:                             │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   app:                                                                                 │     │
│   │     license: ""                             # demo mode (150 min)                      │     │
│   │     ring_buffer: !!int 4096                                                            │     │
│   │                                                                                        │     │
│   │   sources:                                                                             │     │
│   │     - name: heartbeat                                                                  │     │
│   │       connector: Script                                                                │     │
│   │       scan_interval: !!int 5000             # every 5 seconds                          │     │
│   │       items:                                                                           │     │
│   │         - name: pulse                                                                  │     │
│   │           script: return os.time()                                                     │     │
│   │                                                                                        │     │
│   │   sinks:                                                                               │     │
│   │     - name: screen                                                                     │     │
│   │       connector: Console                    # prints to stdout                         │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│       Script source ──────────▶ Ring Buffer ──────────▶ Console sink                             │
│       (Lua: os.time())          (4096 slots)            (stdout)                                 │
│                                                                                                  │
│   Run: DIME.exe (or ./DIME run). You'll see timestamps printed every 5 seconds.                  │
│   Replace "Script" with any real connector. Replace "Console" with your database.                │
│                                                                                                  │
│   THE ENABLED FLAG — Disable without deleting:                                                   │
│                                                                                                  │
│       enabled: !!bool false     ← connector is skipped at startup                                │
│                                                                                                  │
│   Works on sources, sinks, AND individual items. Keep configs around for quick re-enable.        │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON05-architecture.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        05 — Architecture Overview                     │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          How data moves through DIME,                   │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          from device to destination.                    │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE BIG PICTURE                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   DIME is three layers: read, route, write. Everything else is detail.                           │
│                                                                                                  │
│        READ                         ROUTE                          WRITE                         │
│   ┌─────────────┐          ┌───────────────────────┐          ┌─────────────┐                    │
│   │             │          │                       │          │             │                    │
│   │   Sources   │─────────▶│  Disruptor Ring Buffer│─────────▶│    Sinks    │                    │
│   │             │          │                       │          │             │                    │
│   │  30+ types  │          │  Lock-free. < 1ms.    │          │  20+ types  │                    │
│   │  Any device │          │  1M+ msg/sec.         │          │  Any dest.  │                    │
│   │ Any protocol│          │  Single hub for all.  │          │  Any format │                    │
│   │             │          │                       │          │             │                    │
│   └─────────────┘          └───────────────────────┘          └─────────────┘                    │
│         │                             │                              │                           │
│         │                             │                              │                           │
│    Each source                  SinkDispatcher                  Each sink                        │
│    runs on its own              pushes every message             runs on its own                 │
│    timer. Independent.          to every sink.                  timer. Independent.              │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DETAILED DATA FLOW                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   Follow a single data point from a physical device to its final destination.                    │
│                                                                                                  │
│    ┌─────────┐      ┌──────────────┐      ┌────────────┐      ┌─────────────┐                    │
│    │ Physical│      │   Source     │      │    Lua     │      │             │                    │
│    │ Device  │─────▶│  Connector   │─────▶│  Transform │─────▶│  Ring       │                    │
│    │         │      │              │      │  (optional)│      │  Buffer     │                    │
│    │ PLC     │ OPC  │ Reads data   │ raw  │            │ msg  │             │                    │
│    │ CNC     │ UA   │ on timer     │ data │ Reshape,   │      │  4096 slots │                    │
│    │ Robot   │ S7   │ or on event  │      │ filter,    │      │  (default)  │                    │
│    │ Sensor  │ MQTT │              │      │ enrich     │      │             │                    │
│    └─────────┘      └──────────────┘      └────────────┘      └──────┬──────┘                    │
│                                                                      │                           │
│                                                            SinkDispatcher                        │
│                                                          fans out to ALL sinks                   │
│                                                                      │                           │
│                      ┌───────────────────────────┬───────────────────┼───────────────────┐       │
│                      │                           │                   │                   │       │
│                      ▼                           ▼                   ▼                   ▼       │
│               ┌─────────────┐             ┌─────────────┐     ┌─────────────┐     ┌──────────┐   │
│               │ Sink A      │             │ Sink B      │     │ Sink C      │     │ Sink D   │   │
│               │             │             │             │     │             │     │          │   │
│               │ include:    │             │ exclude:    │     │ template:   │     │  (all)   │   │
│               │  plc/.*     │             │  .*\$SYS.*  │     │  custom fmt │     │          │   │
│               │             │             │             │     │             │     │          │   │
│               │ InfluxDB    │             │ Splunk      │     │ MQTT Pub    │     │ Console  │   │
│               └─────────────┘             └─────────────┘     └─────────────┘     └──────────┘   │
│                                                                                                  │
│               Only PLC data.              Everything                Reformatted          Raw     │
│                                           minus system msgs.       for republish.       debug.   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE MESSAGE                                                                                    │
│   ───────────                                                                                    │
│                                                                                                  │
│   Every piece of data flowing through DIME is a MessageBoxMessage with four fields.              │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────┐                           │
│   │                     MessageBoxMessage                            │                           │
│   │                                                                  │                           │
│   │   Path ─────────── "opcua_source/Temperature"                    │                           │
│   │                     ^               ^                            │                           │
│   │                     │               │                            │                           │
│   │                  source name     item name                       │                           │
│   │                                                                  │                           │
│   │   Data ─────────── 72.5                                          │                           │
│   │                    The actual value. Any type.                   │                           │
│   │                                                                  │                           │
│   │   Timestamp ────── 1708300800000                                 │                           │
│   │                    Epoch milliseconds. When it was read.         │                           │
│   │                                                                  │                           │
│   │   ConnectorItemRef  Metadata: RBE flag, sink mappings,           │                           │
│   │                     MTConnect path, original item config.        │                           │
│   │                                                                  │                           │
│   └──────────────────────────────────────────────────────────────────┘                           │
│                                                                                                  │
│   The Path is how sinks filter.  "opcua_source/Temp.*" matches this message.                     │
│   The Path is how dashboards subscribe.  The Path is how data is routed.                         │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CONNECTOR LIFECYCLE                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   Every connector — source or sink — follows the same six-stage lifecycle.                       │
│   ConnectorRunner manages each stage and tracks faults.                                          │
│                                                                                                  │
│     ┌────────────┐     ┌────────────┐     ┌────────────┐                                         │
│     │            │     │            │     │            │                                         │
│     │ INITIALIZE │────▶│   CREATE   │────▶│  CONNECT   │                                         │
│     │            │     │            │     │            │                                         │
│     │ Load config│     │ Build      │     │ Open       │                                         │
│     │ Run init   │     │ internal   │     │ connection │                                         │
│     │ script     │     │ resources  │     │ to device  │                                         │
│     │            │     │            │     │            │                                         │
│     └────────────┘     └────────────┘     └─────┬──────┘                                         │
│                                                 │                                                │
│                                                 v                                                │
│                                          ┌─────────────┐                                         │
│                                          │             │                                         │
│                                          │  READ/WRITE │<─────────────────┐                      │
│                                          │             │                  │                      │
│                                          │  Source:    │     Timer fires  │                      │
│                                          │   poll data │     every        │                      │
│                                          │   transform │     scan_interval│                      │
│                                          │   publish   │     (e.g. 1000ms)│                      │
│                                          │             │                  │                      │
│                                          │  Sink:      │                  │                      │
│                                          │   receive   │──────────────────┘                      │
│                                          │   filter    │                                         │
│                                          │   write     │                                         │
│                                          │             │                                         │
│                                          └─────┬───────┘                                         │
│                                                │  shutdown                                       │
│                                                v                                                 │
│     ┌────────────────┐     ┌────────────┐                                                        │
│     │                │     │            │                                                        │
│     │  DEINITIALIZE  │<────│ DISCONNECT │                                                        │
│     │                │     │            │                                                        │
│     │  Run deinit    │     │ Close      │                                                        │
│     │  script.       │     │ connection │                                                        │
│     │  Release all.  │     │ gracefully │                                                        │
│     │                │     │            │                                                        │
│     └────────────────┘     └────────────┘                                                        │
│                                                                                                  │
│   If a stage fails, ConnectorRunner tracks the fault and retries.                                │
│   Faults in one connector never affect others — full isolation.                                  │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SOURCE CONNECTOR TYPES                                                                         │
│   ─────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   Four base classes. Pick the one that matches how your device delivers data.                    │
│                                                                                                  │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │   PollingSourceConnector                 The most common type.                          │    │
│   │   ──────────────────────                                                                │    │
│   │                                                                                         │    │
│   │   Timer fires every scan_interval ──▶ Read all items ──▶ Publish to ring buffer         │    │
│   │                                                                                         │    │
│   │   Used by: OPC-UA, Modbus, S7, EtherNet/IP, Beckhoff, FANUC, Script, SNMP               │    │
│   │                                                                                         │    │
│   ├─────────────────────────────────────────────────────────────────────────────────────────┤    │
│   │                                                                                         │    │
│   │   QueuingSourceConnector                 For push-based protocols.                      │    │
│   │   ──────────────────────                                                                │    │
│   │                                                                                         │    │
│   │   Messages arrive asynchronously ──▶ Queue in inbox ──▶ Drain on timer ──▶ Publish      │    │
│   │                                                                                         │    │
│   │   Used by: MQTT, SparkplugB, ActiveMQ, HttpServer, UDP Server                           │    │
│   │                                                                                         │    │
│   ├─────────────────────────────────────────────────────────────────────────────────────────┤    │
│   │                                                                                         │    │
│   │   BatchPollingSourceConnector            For bulk reads.                                │    │
│   │   ───────────────────────────                                                           │    │
│   │                                                                                         │    │
│   │   Timer fires ──▶ Execute query ──▶ Iterate result set ──▶ Publish each row             │    │
│   │                                                                                         │    │
│   │   Used by: OPC-DA source                                                                │    │
│   │                                                                                         │    │
│   ├─────────────────────────────────────────────────────────────────────────────────────────┤    │
│   │                                                                                         │    │
│   │   DatabaseSourceConnector                Structured result mapping.                     │    │
│   │   ───────────────────────                                                               │    │
│   │                                                                                         │    │
│   │   Timer fires ──▶ SQL query ──▶ Map columns to items ──▶ Publish with names             │    │
│   │                                                                                         │    │
│   │   Used by: SQL Server (MsSql), PostgreSQL (Postgres)                                    │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE ADMIN SERVER                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│   Every DIME instance exposes two monitoring endpoints. Always on. No extra config.              │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   REST API                                  WebSocket                        │               │
│   │   http://localhost:9999                      ws://localhost:9998             │               │
│   │                                                                              │               │
│   │   GET  /status ────────── Connector states      Real-time event stream:      │               │
│   │   GET  /config/yaml ───── YAML configuration                                 │               │
│   │   GET  /config/json ───── JSON configuration    Connector state changes      │               │
│   │   POST /config/reload ─── Reload from disk       Performance telemetry       │               │
│   │   POST /config/save ──── Save to disk            Loop timing (read, script,  │               │
│   │   POST /connector/* ──── Add, edit, delete,      total per connector)        │               │
│   │     start, stop sources & sinks at runtime       Fault notifications         │               │
│   │                                                                              │               │
│   │   Swagger UI included for exploration.                                       │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   The REST API enables zero-downtime reconfiguration — add, edit, or remove connectors live.     │
│   The WebSocket is how DIME-Connector.UX (the web dashboard) gets live data.                     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   PUTTING IT ALL TOGETHER                                                                        │
│   ─────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ┌─ DimeService ────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │  Loads YAML          Creates              Starts             Manages                     │   │
│   │  config files        connectors           ring buffer        admin server                │   │
│   │       │              via factories              │                  │                     │   │
│   │       v                   │                     v                  v                     │   │
│   │  ┌─────────┐              │             ┌──────────────┐    ┌────────────┐               │   │
│   │  │ YAML    │              │             │  Disruptor   │    │ Admin      │               │   │
│   │  │ Parser  │              │             │  Ring Buffer │    │ Server     │               │   │
│   │  └────┬────┘              │             └──────┬───────┘    │            │               │   │
│   │       │                   │                    │            │ REST :9999 │               │   │
│   │       v                   v                    v            │ WS   :9998 │               │   │
│   │  ┌─────────────────────────────────────────────────────┐    └────────────┘               │   │
│   │  │                                                     │                                 │   │
│   │  │  ConnectorRunner    ConnectorRunner    ConnectorRunner                                │   │
│   │  │  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐    ...for each                   │   │
│   │  │  │ OPC-UA      │   │ MQTT        │   │ InfluxDB    │       connector                  │   │
│   │  │  │ Source      │   │ Source      │   │ Sink        │       in config                  │   │
│   │  │  │             │   │             │   │             │                                  │   │
│   │  │  │ scan: 1000ms│   │ scan: 200ms │   │ scan: 5000ms│                                  │   │
│   │  │  │ items: 10   │   │ items: 3    │   │ filter: yes │                                  │   │
│   │  │  └──────┬──────┘   └──────┬──────┘   └───────┬─────┘                                  │   │
│   │  │         │                 │                  │                                        │   │
│   │  │         │    publishes    │                  │    receives from                       │   │
│   │  │         +────────────────▶│<─────────────────+    SinkDispatcher                      │   │
│   │  │                   Ring Buffer                                                         │   │
│   │  │                                                                                       │   │
│   │  └──────────────────────────────────────────────────────────────────────────────────────┘│   │
│   │                                                                                          │   │
│   │  Each ConnectorRunner is independent. Different timers. Different protocols.             │   │
│   │  A fault in one never affects the others.                                                │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   PERFORMANCE BY DESIGN                                                                          │
│   ─────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐     │
│   │                   │  │                   │  │                   │  │                   │     │
│   │   DISRUPTOR       │  │   SHARED-REF      │  │   RBE             │  │   ISOLATION       │     │
│   │   RING BUFFER     │  │   FAN-OUT         │  │                   │  │                   │     │
│   │                   │  │                   │  │   Report By       │  │   Each connector  │     │
│   │   Lock-free.      │  │   SinkDispatcher  │  │   Exception.      │  │   on its own      │     │
│   │   No mutexes.     │  │   pushes the same │  │   Only publish    │  │   thread & timer. │     │
│   │   No contention.  │  │   message ref to  │  │   when the value  │  │   Fault in one    │     │
│   │   Predictable     │  │   every sink. No  │  │   actually        │  │   never blocks    │     │
│   │   sub-ms latency. │  │   ref shared.     │  │   changes.        │  │   another.        │     │
│   │                   │  │                   │  │                   │  │                   │     │
│   └───────────────────┘  └───────────────────┘  └───────────────────┘  └───────────────────┘     │
│                                                                                                  │
│   Performance instrumentation is built in. Every source measures:                                │
│                                                                                                  │
│     Device read time  ──  How long the hardware took to respond.                                 │
│     Script exec time  ──  How long Lua/Python transforms took.                                   │
│     Total loop time   ──  End-to-end for one scan cycle.                                         │
│                                                                                                  │
│   Available in real time via the WebSocket admin endpoint.                                       │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON06-source-connectors.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        06 — Source Connectors                         │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          30 ways to read data.                          │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Every protocol, one YAML config.               │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   INDUSTRIAL PLCs                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   ┌──────────────────────┐  ┌──────────────────────┐  ┌──────────────────────┐                   │
│   │                      │  │                      │  │                      │                   │
│   │  Siemens S7          │  │  Rockwell            │  │  Beckhoff ADS        │                   │
│   │                      │  │  EtherNet/IP         │  │                      │                   │
│   │  S7-300 / 400        │  │                      │  │  address: host       │                   │
│   │  S7-1200 / 1500      │  │  address: host       │  │  port: 851           │                   │
│   │                      │  │  port: 44818         │  │  target_ams_net_id   │                   │
│   │  address: 10.0.0.1   │  │  slot: 0             │  │  target_ams_port     │                   │
│   │  port: 102           │  │                      │  │                      │                   │
│   │  rack: 0  slot: 1    │  │  Items addressed by  │  │  Items addressed by  │                   │
│   │  cpu: S71500         │  │  tag name.           │  │  symbol or index.    │                   │
│   │                      │  │                      │  │                      │                   │
│   └──────────────────────┘  └──────────────────────┘  └──────────────────────┘                   │
│                                                                                                  │
│   ┌──────────────────────┐                                                                       │
│   │                      │                                                                       │
│   │  Modbus TCP          │     All industrial connectors are PollingSourceConnector.             │
│   │                      │     Timer-driven. scan_interval sets the read frequency.              │
│   │  address: host       │     Each item has an address native to the protocol.                  │
│   │  port: 502           │                                                                       │
│   │  unit_id: 1          │     Supports RBE (Report By Exception) per connector or item.         │
│   │  Items: register     │                                                                       │
│   │  address + type      │                                                                       │
│   │                      │                                                                       │
│   └──────────────────────┘                                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   STANDARDS & ROBOTICS                                                                           │
│   ────────────────────                                                                           │
│                                                                                                  │
│   ┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐            │
│   │  OPC-UA          │ │  OPC-DA          │ │  MTConnect       │ │  Haas SHDR       │            │
│   │                  │ │                  │ │                  │ │                  │            │
│   │  address: url    │ │  Windows only.   │ │  Reads from an   │ │  Direct SHDR     │            │
│   │  port: 4840      │ │  COM/DCOM based. │ │  existing agent. │ │  stream from     │            │
│   │  user / password │ │  prog_id: ...    │ │  address: url    │ │  Haas machines.  │            │
│   │  security_policy │ │                  │ │  device_key: ... │ │  address: host   │            │
│   │                  │ │                  │ │                  │ │  port: 7878      │            │
│   └──────────────────┘ └──────────────────┘ └──────────────────┘ └──────────────────┘            │
│                                                                                                  │
│   ┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐                                 │
│   │  FANUC Robot     │ │  Yaskawa Robot   │ │  ROS2            │                                 │
│   │                  │ │                  │ │                  │                                 │
│   │  address: host   │ │  address: host   │ │  Subscribes to   │                                 │
│   │  Direct FANUC    │ │  Direct Yaskawa  │ │  ROS2 topics.    │                                 │
│   │  protocol read.  │ │  protocol read.  │ │  Requires ROS2   │                                 │
│   │                  │ │                  │ │  Docker image.   │                                 │
│   └──────────────────┘ └──────────────────┘ └──────────────────┘                                 │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MESSAGE QUEUES & BROKERS                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   ┌──────────────────────┐  ┌──────────────────────┐  ┌──────────────────────┐                   │
│   │                      │  │                      │  │                      │                   │
│   │  MQTT                │  │  SparkplugB          │  │  ActiveMQ            │                   │
│   │                      │  │                      │  │                      │                   │
│   │  address: broker     │  │  Industrial MQTT.    │  │  address: broker     │                   │
│   │  port: 1883          │  │  Birth/death certs.  │  │  port: 61616         │                   │
│   │  base_topic: #       │  │  Metric payloads.    │  │  topic: queue.name   │                   │
│   │  qos: 0 | 1 | 2      │  │                      │  │                      │                   │
│   │  tls: true/false     │  │  address: broker     │  │  JMS protocol.       │                   │
│   │  client_id: dime     │  │  group_id: plant1    │  │  Durable subs.       │                   │
│   │  username / password │  │  edge_node: line1    │  │                      │                   │
│   │                      │  │                      │  │                      │                   │
│   └──────────────────────┘  └──────────────────────┘  └──────────────────────┘                   │
│                                                                                                  │
│   ┌──────────────────────┐                                                                       │
│   │                      │     All messaging connectors are QueuingSourceConnector.              │
│   │  Redis Pub/Sub       │     Messages arrive asynchronously, are queued in an inbox,           │
│   │                      │     and drained to the ring buffer on timer.                          │
│   │  address: host       │                                                                       │
│   │  port: 6379          │     MQTT is the most common source in IoT and IIoT.                   │
│   │  channels: ch1,ch2   │     SparkplugB adds industrial semantics on top of MQTT.              │
│   │                      │                                                                       │
│   └──────────────────────┘                                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DATABASES (DATABASE SOURCE)                                                                    │
│   ───────────────────────────                                                                    │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   SQL Server Source                         PostgreSQL Source                            │   │
│   │   ─────────────────                         ────────────────                             │   │
│   │                                                                                          │   │
│   │   connection_string: Server=...;Database=... connection_string: Host=...;Database=...    │   │
│   │   query: SELECT col1, col2 FROM table        query: SELECT col1, col2 FROM table         │   │
│   │          WHERE timestamp > @last_read               WHERE timestamp > $1                 │   │
│   │                                                                                          │   │
│   │   DatabaseSourceConnector: timer fires, execute query, iterate result set,               │   │
│   │   publish each row as a message. Use parameterized queries for incremental reads.        │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WEB, API & NETWORK                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   ┌───────────────────┐ ┌───────────────────┐ ┌───────────────────┐ ┌───────────────────┐        │
│   │  JSON Scraper     │ │  XML Scraper      │ │  HTTP Server      │ │  TCP ASCII        │        │
│   │                   │ │                   │ │                   │ │                   │        │
│   │  Fetch JSON from  │ │  Fetch XML from   │ │  Listens for HTTP │ │  Raw TCP socket   │        │
│   │  a URL. Parse     │ │  a URL. Parse     │ │  POSTs. Incoming  │ │  reads. Line-     │        │
│   │  with JSONPath.   │ │  with XPath.      │ │  data as messages.│ │  delimited text.  │        │
│   │                   │ │                   │ │                   │ │                   │        │
│   │  address: url     │ │  address: url     │ │  address: url     │ │  address: host    │        │
│   └───────────────────┘ └───────────────────┘ └───────────────────┘ └───────────────────┘        │
│                                                                                                  │
│   ┌───────────────────┐ ┌───────────────────┐                                                    │
│   │  UDP Server       │ │  SNMP             │     Scrapers and SNMP are PollingSourceConnector.  │
│   │                   │ │                   │     HTTP Server and UDP Server are Queuing.        │
│   │  Listens on a UDP │ │  SNMP GET on OIDs │                                                    │
│   │  port. Receives   │ │  from network     │     JSON/XML Scrapers are useful for pulling       │
│   │  datagrams as     │ │  devices. v1/v2c  │     data from web APIs and converting it into      │
│   │  messages.        │ │  community string │     DIME messages for downstream sinks.            │
│   │                   │ │                   │                                                    │
│   │  port: 5005       │ │  address: host    │                                                    │
│   └───────────────────┘ └───────────────────┘                                                    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SCRIPTING — THE UNIVERSAL SOURCE                                                               │
│   ────────────────────────────────                                                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   connector: Script                                                                      │   │
│   │                                                                                          │   │
│   │   No external device. The Lua or Python script IS the data source.                       │   │
│   │   Timer fires → script runs → script returns data → published to ring buffer.            │   │
│   │                                                                                          │   │
│   │   Use cases:                                                                             │   │
│   │     • Generate synthetic test data                                                       │   │
│   │     • Compute derived values from cache() of other connectors                            │   │
│   │     • Build custom protocol adapters in script                                           │   │
│   │     • Aggregate or correlate data from multiple sources via cache API                    │   │
│   │                                                                                          │   │
│   │   lang_script: lua  (or python)                                                          │   │
│   │   scan_interval: 1000                                                                    │   │
│   │                                                                                          │   │
│   │   items:                                                                                 │   │
│   │     - name: computed_value                                                               │   │
│   │       script: |                                                                          │   │
│   │         local temp = cache("plc/Temperature", 0)                                         │   │
│   │         return temp * 1.8 + 32                                                           │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SOURCE TYPE HIERARCHY                                                                          │
│   ─────────────────────                                                                          │
│                                                                                                  │
│   Four base classes. Pick the one that matches how your device delivers data.                    │
│                                                                                                  │
│           ┌──────────────────────────────────────────────────────────────────────────┐           │
│           │                    SourceConnector (abstract)                            │           │
│           └─────────┬───────────────┬───────────────┬───────────────┬────────────────┘           │
│                     │               │               │               │                            │
│           ┌─────────▼─────┐ ┌───────▼───────┐ ┌─────▼──────┐ ┌─────▼──────────┐                  │
│           │               │ │               │ │            │ │                │                  │
│           │   Polling     │ │   Queuing     │ │  Batch     │ │  Database      │                  │
│           │               │ │               │ │  Polling   │ │                │                  │
│           │  Timer fires  │ │  Msgs arrive  │ │            │ │  Timer fires   │                  │
│           │  → read all   │ │  → queue inbox│ │  Timer →   │ │  → run query   │                  │
│           │  → publish    │ │  → drain timer│ │  read batch│ │  → column→item │                  │
│           │               │ │  → publish    │ │  → iterate │ │  → publish     │                  │
│           │  OPC-UA       │ │               │ │  → publish │ │                │                  │
│           │  Modbus       │ │  MQTT         │ │            │ │  SQL Server    │                  │
│           │  S7           │ │  SparkplugB   │ │  OPC-DA    │ │  PostgreSQL    │                  │
│           │  EtherNet/IP  │ │  ActiveMQ     │ │            │ │                │                  │
│           │  Beckhoff ADS │ │  Redis Pub/Sub│ └────────────┘ └────────────────┘                  │
│           │  FANUC        │ │  UDP Server   │                                                    │
│           │  SNMP         │ │  HTTP Server  │                                                    │
│           │  Script       │ │  Haas SHDR    │                                                    │
│           │               │ │  MTConnect    │                                                    │
│           │               │ │  ROS2         │                                                    │
│           └───────────────┘ └───────────────┘                                                    │
│                                                                                                  │
│   Polling is the most common: timer → read → publish. Queuing is for push protocols.             │
│   Database is for SQL queries that return result sets with column-to-item mapping.               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   UNIVERSAL CONFIG PATTERN                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   Every source follows the same structure, regardless of protocol:                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   sources:                                                                               │   │
│   │     - name: my_source            # unique name → becomes path prefix                     │   │
│   │       connector: OpcUA           # connector type (see catalog above)                    │   │
│   │       scan_interval: 1000        # ms between reads (Polling/BatchPolling)               │   │
│   │       rbe: true                  # Report By Exception at connector level                │   │
│   │       enabled: !!bool true       # disable without deleting                              │   │
│   │       address: 10.0.0.1          # protocol-specific endpoint                            │   │
│   │       port: 4840                 # protocol-specific port                                │   │
│   │       init_script: |             # Lua/Python run once at startup                        │   │
│   │         log("starting up")                                                               │   │
│   │       sink:                      # transform applied when sink enables it                │   │
│   │         transform:                                                                       │   │
│   │           type: script           # script | scriban | liquid                             │   │
│   │           template: Message.Data # expression that reshapes output                       │   │
│   │       items:                     # what to read                                          │   │
│   │         - name: Temperature      # item name → path = my_source/Temperature              │   │
│   │           address: ns=2;s=Temp   # protocol-specific address                             │   │
│   │           rbe: true              # per-item RBE override                                 │   │
│   │           script: |              # per-item transform                                    │   │
│   │             return result * 1.8 + 32                                                     │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   The name becomes the first segment of the message path: "my_source/Temperature".               │
│   Sinks filter on this path. Dashboards subscribe to it. It's how all routing works.             │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON07-sink-connectors.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        07 — Sink Connectors                           │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Where data goes.                               │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Fan-out to every destination.                  │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE KEY INSIGHT                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   Every sink receives EVERY message from the ring buffer.                                        │
│   Filters determine what each sink keeps. This is fan-out, not routing.                          │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   TIME-SERIES & ANALYTICS                                                                        │
│   ───────────────────────                                                                        │
│                                                                                                  │
│   ┌──────────────────────────┐  ┌──────────────────────────┐  ┌──────────────────────────┐       │
│   │                          │  │                          │  │                          │       │
│   │  InfluxDB (Line Proto)   │  │  Splunk HEC              │  │  Splunk Edge Hub SDK     │       │
│   │                          │  │                          │  │                          │       │
│   │  Writes InfluxDB line    │  │  HTTP Event Collector.   │  │  v1 and v2 SDK modes.    │       │
│   │  protocol over HTTP.     │  │  Pushes JSON events to   │  │  Direct Edge Hub         │       │
│   │                          │  │  Splunk via REST.        │  │  integration.            │       │
│   │  address: url            │  │                          │  │                          │       │
│   │  bucket: my_bucket       │  │  address: url            │  │  address: url            │       │
│   │  org: my_org             │  │  token: HEC-token        │  │  token: ...              │       │
│   │  token: my_token         │  │  index: main             │  │                          │       │
│   │                          │  │  source_type: dime       │  │                          │       │
│   │                          │  │                          │  │                          │       │
│   └──────────────────────────┘  └──────────────────────────┘  └──────────────────────────┘       │
│                                                                                                  │
│   InfluxDB is the most common time-series destination. DIME formats data as line protocol        │
│   automatically. Splunk HEC enables enterprise analytics and alerting.                           │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DATABASES                                                                                      │
│   ─────────                                                                                      │
│                                                                                                  │
│   ┌──────────────────────────┐  ┌──────────────────────────┐                                     │
│   │                          │  │                          │                                     │
│   │  MongoDB                 │  │  PostgreSQL Batch        │                                     │
│   │                          │  │                          │                                     │
│   │  Document store. Each    │  │  Relational DB. Native   │                                     │
│   │  message becomes a       │  │  batch UPSERT support.   │                                     │
│   │  document.               │  │  Column mappings and     │                                     │
│   │                          │  │  automatic type conv.    │                                     │
│   │  connection_string: ...  │  │                          │                                     │
│   │  database: plant_data    │  │  connection_string: ...  │                                     │
│   │  collection: readings    │  │  table: readings         │                                     │
│   │                          │  │                          │                                     │
│   └──────────────────────────┘  └──────────────────────────┘                                     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MESSAGE BROKERS                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   ┌──────────────────────┐  ┌──────────────────────┐  ┌──────────────────────┐                   │
│   │                      │  │                      │  │                      │                   │
│   │  MQTT Publish        │  │  SparkplugB Publish  │  │  Redis               │                   │
│   │                      │  │                      │  │                      │                   │
│   │  Publishes data to   │  │  Industrial MQTT     │  │  Publishes to Redis  │                   │
│   │  an MQTT broker.     │  │  with SparkplugB     │  │  channels.           │                   │
│   │  Topic from message  │  │  metric encoding.    │  │                      │                   │
│   │  path or configured. │  │                      │  │  address: host       │                   │
│   │                      │  │  address: broker     │  │  port: 6379          │                   │
│   │  address: broker     │  │  group_id: plant1    │  │  channel: output     │                   │
│   │  port: 1883          │  │  edge_node: line1    │  │                      │                   │
│   │  qos: 1              │  │                      │  │                      │                   │
│   │                      │  │                      │  │                      │                   │
│   └──────────────────────┘  └──────────────────────┘  └──────────────────────┘                   │
│                                                                                                  │
│                                  Broker sinks republish data to messaging infrastructure.        │
│                                  Use include/exclude filters to control which messages           │
│                                  get published. MQTT sink topic can mirror the message path.     │
│                                                                                                  │
│                                  Common pattern: MQTT source from one broker, MQTT sink          │
│                                  to a different broker — DIME bridges the two.                   │
│                                                                                                  │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MANUFACTURING — MTConnect                                                                      │
│   ─────────────────────────                                                                      │
│                                                                                                  │
│   ┌──────────────────────────────────────────┐  ┌──────────────────────────────────────────┐     │
│   │                                          │  │                                          │     │
│   │  MTConnect Agent Sink                    │  │  MTConnect SHDR Sink                     │     │
│   │                                          │  │                                          │     │
│   │  DIME becomes a full MTConnect agent.    │  │  Streams SHDR data to an external        │     │
│   │  Serves XML current/sample responses     │  │  MTConnect agent. DIME acts as an        │     │
│   │  on an HTTP port.                        │  │  adapter feeding SHDR text lines.        │     │
│   │                                          │  │                                          │     │
│   │  port: 5000                              │  │  port: 7878                              │     │
│   │  device: MyMachine                       │  │                                          │     │
│   │  sender: DIME                            │  │  Items mapped via emit_mtconnect()       │     │
│   │                                          │  │  or direct SHDR formatting.              │     │
│   │  Requires items mapped with              │  │                                          │     │
│   │  emit_mtconnect() in Lua scripts.        │  │                                          │     │
│   │                                          │  │                                          │     │
│   └──────────────────────────────────────────┘  └──────────────────────────────────────────┘     │
│                                                                                                  │
│   DIME can read from any protocol and expose data as MTConnect. This makes legacy                │
│   devices visible to any MTConnect-compatible monitoring system.                                 │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SERVERS — DIME AS A DATA ENDPOINT                                                              │
│   ─────────────────────────────────                                                              │
│                                                                                                  │
│   ┌──────────────────────────┐  ┌──────────────────────────┐  ┌──────────────────────────┐       │
│   │                          │  │                          │  │                          │       │
│   │  OPC-UA Server           │  │  HTTP Server             │  │  WebSocket Server        │       │
│   │                          │  │                          │  │                          │       │
│   │  DIME becomes an OPC-UA  │  │  Serves data via HTTP    │  │  Pushes live data to     │       │
│   │  server. Clients browse  │  │  REST endpoints. Can     │  │  connected WebSocket     │       │
│   │  and subscribe to data   │  │  serve static files for  │  │  clients. Powers live    │       │
│   │  from any source.        │  │  self-contained UIs.     │  │  dashboards.             │       │
│   │                          │  │                          │  │                          │       │
│   │  port: 4840              │  │  port: 8080              │  │  port: 8092              │       │
│   │  endpoint: opc.tcp://... │  │  address: 0.0.0.0        │  │  address: 0.0.0.0        │       │
│   │                          │  │                          │  │                          │       │
│   └──────────────────────────┘  └──────────────────────────┘  └──────────────────────────┘       │
│                                                                                                  │
│   Server sinks turn DIME into a data endpoint. Read from any protocol, serve via HTTP,           │
│   WebSocket, or OPC-UA. Build self-contained dashboards with zero external dependencies.         │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FILE OUTPUT & DEBUG                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   ┌──────────────────────────┐  ┌──────────────────────────┐  ┌──────────────────────────┐       │
│   │                          │  │                          │  │                          │       │
│   │  CSV Writer              │  │  Logger (NLog)           │  │  Console                 │       │
│   │                          │  │                          │  │                          │       │
│   │  Writes data to CSV      │  │  Structured logging      │  │  Prints every message    │       │
│   │  files. Auto-headers.    │  │  via NLog. Routes to     │  │  to stdout. Your best    │       │
│   │  One row per message.    │  │  any NLog target.        │  │  friend for debugging.   │       │
│   │                          │  │                          │  │                          │       │
│   │  filename: output.csv    │  │  Uses nlog.config for    │  │  connector: Console      │       │
│   │  filter_duplicate_paths  │  │  target configuration.   │  │  No config needed.       │       │
│   │                          │  │                          │  │                          │       │
│   └──────────────────────────┘  └──────────────────────────┘  └──────────────────────────┘       │
│                                                                                                  │
│   The Console sink is essential during development. Add one to every config while building.      │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FAN-OUT: ONE RING BUFFER → MANY SINKS                                                          │
│   ──────────────────────────────────────                                                         │
│                                                                                                  │
│   SinkDispatcher pushes every message to every registered sink.                                  │
│   Each sink decides what to keep with its own local filters.                                     │
│                                                                                                  │
│                          ┌──────────────────────────────────┐                                    │
│                          │                                  │                                    │
│                          │         Ring Buffer              │                                    │
│                          │     (all messages from all       │                                    │
│                          │      sources land here)          │                                    │
│                          │                                  │                                    │
│                          └────────────────┬─────────────────┘                                    │
│                                           │                                                      │
│                                    SinkDispatcher                                                │
│                                    fans out to ALL                                               │
│                                           │                                                      │
│               ┌───────────────┬───────────┼───────────┬───────────────┐                          │
│               │               │           │           │               │                          │
│               ▼               ▼           ▼           ▼               ▼                          │
│        ┌────────────┐  ┌────────────┐ ┌────────┐ ┌────────────┐ ┌──────────┐                     │
│        │ InfluxDB   │  │ Splunk     │ │ MQTT   │ │ MTConnect  │ │ Console  │                     │
│        │            │  │            │ │        │ │            │ │          │                     │
│        │ include:   │  │ exclude:   │ │ include│ │ include:   │ │ (all)    │                     │
│        │ plc/.*     │  │ .*\$SYS.*  │ │ robot/ │ │ cnc/.*     │ │          │                     │
│        │            │  │            │ │ .*     │ │            │ │ Raw      │                     │
│        │ Only PLC   │  │ Everything │ │        │ │ Only CNC   │ │ debug    │                     │
│        │ data.      │  │ minus sys. │ │ Robots │ │ data.      │ │ output.  │                     │
│        │            │  │            │ │ only.  │ │            │ │          │                     │
│        └────────────┘  └────────────┘ └────────┘ └────────────┘ └──────────┘                     │
│                                                                                                  │
│   No routing tables. No message brokers. Every sink sees everything and picks what it needs.     │
│   Add a new sink? It immediately receives every message. Remove a sink? Nothing else changes.    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   UNIVERSAL SINK CONFIG PATTERN                                                                  │
│   ─────────────────────────────                                                                  │
│                                                                                                  │
│   Every sink follows the same structure. Filters and templates are optional.                     │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   sinks:                                                                                 │   │
│   │     - name: my_sink              # unique name for this sink                             │   │
│   │       connector: InfluxLP        # connector type (see catalog above)                    │   │
│   │       scan_interval: 5000        # ms between write flushes                              │   │
│   │       enabled: !!bool true       # disable without deleting                              │   │
│   │       address: https://influx    # protocol-specific endpoint                            │   │
│   │       bucket: plant_data         # protocol-specific config                              │   │
│   │       org: my_org                                                                        │   │
│   │       token: my_token                                                                    │   │
│   │       include_filter: plc/.*     # regex: only keep matching paths                       │   │
│   │       exclude_filter: .*\$SYS.* # regex: drop matching paths                             │   │
│   │       use_sink_transform: true   # apply source-side transform on sink                   │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   include_filter and exclude_filter are regex patterns matching the message Path.                │
│   If both are set, include is applied first, then exclude removes from the result.               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SINK TRANSFORMS                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   Transforms reshape data before a sink writes it. The transform is defined on the               │
│   SOURCE connector. The SINK opts in with use_sink_transform: true.                              │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   sources:                                  sinks:                                       │   │
│   │     - name: plc                               - name: console                            │   │
│   │       connector: OpcUA                          connector: Console                       │   │
│   │       address: 10.0.0.1                         use_sink_transform: !!bool true          │   │
│   │       sink:                    # ← defined                                               │   │
│   │         transform:             #   on source  Transform types:                           │   │
│   │           type: script         #                script  — Scriban expression             │   │
│   │           template: >-         #                scriban — Scriban template               │   │
│   │             Message.Data       #                liquid  — Liquid template                │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   When use_sink_transform is false (default), sinks receive the raw MessageBoxMessage.           │
│   When true, the template runs first — sinks receive the transformed result.                     │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON08-message-paths-filtering.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        08 — Filtering & Routing                       │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Control what data goes where.                  │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Regex-powered stream routing.                  │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MESSAGE PATH ANATOMY                                                                           │
│   ────────────────────                                                                           │
│                                                                                                  │
│   Every message in DIME has a path:  sourceName/itemName                                         │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   Path Format:   sourceName / itemName                                       │               │
│   │                  ──────────   ────────                                       │               │
│   │                  from YAML    from the                                       │               │
│   │                  "name:"      items array                                    │               │
│   │                  field        or device tag                                  │               │
│   │                                                                              │               │
│   │   Examples:                                                                  │               │
│   │                                                                              │               │
│   │     plc1/temperature        ── PLC source named "plc1", item "temperature"   │               │
│   │     mqtt/sensors/pressure   ── MQTT source "mqtt", topic "sensors/pressure"  │               │
│   │     opcua/ns=2;s=Speed      ── OPC-UA source "opcua", node "ns=2;s=Speed"    │               │
│   │     db_src/query1/col_temp  ── Database source, query 1, column "col_temp"   │               │
│   │                                                                              │               │
│   │   itemized_read: true       ── Each item gets its own path                   │               │
│   │   itemized_read: false      ── All items arrive as one bulk message (default)│               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   Sinks use regex against these paths to decide what to accept or reject.                        │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   $SYSTEM PATHS — AUTOMATIC CONNECTOR METADATA                                                   │
│   ─────────────────────────────────────────────                                                  │
│                                                                                                  │
│   Every connector auto-publishes status messages under a $SYSTEM prefix.                         │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   sourceName/$SYSTEM/ExecutionDuration ── connector loop duration (ms)       │               │
│   │   sourceName/$SYSTEM/IsConnected      ── true/false                          │               │
│   │   sourceName/$SYSTEM/IsFaulted        ── true/false                          │               │
│   │   sourceName/$SYSTEM/Fault            ── fault reason message or null        │               │
│   │   sourceName/$SYSTEM/IsAvailable      ── true when connected and not faulted │               │
│   │                                                                              │               │
│   │   Example:   plc1/$SYSTEM/IsConnected      = true                            │               │
│   │              plc1/$SYSTEM/ExecutionDuration = 12                             │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   $SYSTEM messages flow through the ring buffer like any other data.                             │
│   Sinks receive them unless explicitly excluded.                                                 │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   EXCLUDE FILTER — REGEX BLACKLIST                                                               │
│   ────────────────────────────────                                                               │
│                                                                                                  │
│   Messages matching any exclude_filter pattern are DROPPED by the sink.                          │
│                                                                                                  │
│        ┌────────────────┐                                                                        │
│        │  Ring Buffer   │                                                                        │
│        │  (all msgs)    │                                                                        │
│        └───────┬────────┘                                                                        │
│                │                                                                                 │
│                ▼                                                                                 │
│        ┌────────────────────────────────────────────────────┐                                    │
│        │            EXCLUDE FILTER                          │                                    │
│        │                                                    │                                    │
│        │   exclude_filter:                                  │                                    │
│        │     - ".*\\$SYSTEM.*"      ← drop all $SYSTEM msgs │                                    │
│        │     - "debug/.*"           ← drop debug paths      │                                    │
│        │                                                    │                                    │
│        │   ┌─────────┐  ┌──────────────┐  ┌─────────────┐   │                                    │
│        │   │plc1/temp│  │plc1/$SYS/... │  │debug/trace  │   │                                    │
│        │   │         │  │              │  │             │   │                                    │
│        │   │  PASS ✓ │  │  DROPPED ✗  │  │  DROPPED ✗  │   │                                    │
│        │   └─────────┘  └──────────────┘  └─────────────┘   │                                    │
│        │                                                    │                                    │
│        └─────────────────────┬──────────────────────────────┘                                    │
│                              │                                                                   │
│                              ▼                                                                   │
│                       ┌─────────────┐                                                            │
│                       │  Sink gets  │                                                            │
│                       │  plc1/temp  │                                                            │
│                       │  only       │                                                            │
│                       └─────────────┘                                                            │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   INCLUDE FILTER — REGEX WHITELIST                                                               │
│   ────────────────────────────────                                                               │
│                                                                                                  │
│   ONLY messages matching an include_filter pattern are ACCEPTED. Everything else dropped.        │
│                                                                                                  │
│        ┌────────────────┐                                                                        │
│        │  Ring Buffer   │                                                                        │
│        │  (all msgs)    │                                                                        │
│        └───────┬────────┘                                                                        │
│                │                                                                                 │
│                ▼                                                                                 │
│        ┌────────────────────────────────────────────────────┐                                    │
│        │            INCLUDE FILTER                          │                                    │
│        │                                                    │                                    │
│        │   include_filter:                                  │                                    │
│        │     - "plc1/.*"            ← only plc1 messages    │                                    │
│        │     - "mqtt/temperature"   ← and this one path     │                                    │
│        │                                                    │                                    │
│        │   ┌─────────┐  ┌──────────────┐  ┌─────────────┐   │                                    │
│        │   │plc1/temp│  │plc1/pressure │  │opcua/speed  │   │                                    │
│        │   │         │  │              │  │             │   │                                    │
│        │   │  PASS ✓ │  │   PASS ✓     │  │  DROPPED ✗  │   │                                    │
│        │   └─────────┘  └──────────────┘  └─────────────┘   │                                    │
│        │                                                    │                                    │
│        └─────────────────────┬──────────────────────────────┘                                    │
│                              │                                                                   │
│                              ▼                                                                   │
│                       ┌─────────────┐                                                            │
│                       │  Sink gets  │                                                            │
│                       │  plc1/* only│                                                            │
│                       └─────────────┘                                                            │
│                                                                                                  │
│   If BOTH include and exclude are set, only include_filter is used; exclude is ignored.          │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   STRIP PATH PREFIX                                                                              │
│   ─────────────────                                                                              │
│                                                                                                  │
│   Set on a SOURCE connector; removes the source name from the message path at publish time.      │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   strip_path_prefix: true                                                    │               │
│   │                                                                              │               │
│   │   BEFORE                              AFTER                                  │               │
│   │   ──────                              ─────                                  │               │
│   │   plc1/temperature          ────▶     temperature                            │               │
│   │   mqtt/sensors/pressure     ────▶     sensors/pressure                       │               │
│   │   opcua/ns=2;s=Speed        ────▶     ns=2;s=Speed                           │               │
│   │                                                                              │               │
│   │   Useful when republishing to MQTT or writing to databases where the         │               │
│   │   source name prefix is redundant.                                           │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FULL ROUTING EXAMPLE — ONE BUFFER, THREE SINKS                                                 │
│   ──────────────────────────────────────────────                                                 │
│                                                                                                  │
│   All messages from all sources land in the ring buffer. Each sink applies its own filters.      │
│                                                                                                  │
│    Sources                         Ring Buffer                          Sinks                    │
│    ──────────                      ───────────                          ───────                  │
│                                                                                                  │
│    ┌──────────┐                ┌──────────────┐                 ┌────────────────────┐           │
│    │ plc1     │──────┐         │              │          ┌─────▶│ Sink A: InfluxDB   │           │
│    │ temp,psi │      │         │   ┌──────┐   │          │      │                    │           │
│    └──────────┘      │         │   │ ···  │   │          │      │ include:           │           │
│                      ├────────▶│   │ msgs │   │──────────┤      │   - "plc1/.*"      │           │
│    ┌──────────┐      │         │   │ ···  │   │          │      │                    │           │
│    │ mqtt     │──────┤         │   └──────┘   │          │      │ Gets: plc1/temp    │           │
│    │ sensors  │      │         │              │          │      │       plc1/psi     │           │
│    └──────────┘      │         │  4096 slots  │          │      └────────────────────┘           │
│                      │         │              │          │                                       │
│    ┌──────────┐      │         └──────────────┘          ├─────▶┌────────────────────┐           │
│    │ opcua    │──────┘                                   │      │ Sink B: Splunk     │           │
│    │ speed    │                                          │      │                    │           │
│    └──────────┘                                          │      │ exclude:           │           │
│                                                          │      │   - ".*\\$SYSTEM.*"│           │
│                                                          │      │                    │           │
│                                                          │      │ Gets: everything   │           │
│                                                          │      │   minus $SYSTEM    │           │
│                                                          │      └────────────────────┘           │
│                                                          │                                       │
│                                                          └─────▶┌────────────────────┐           │
│                                                                 │ Sink C: MQTT Pub   │           │
│                                                                 │                    │           │
│                                                                 │ include:           │           │
│                                                                 │   - "mqtt/.*"      │           │
│                                                                 │ strip_path_prefix: │           │
│                                                                 │   true             │           │
│                                                                 │                    │           │
│                                                                 │ Gets: sensors/*    │           │
│                                                                 │  (prefix stripped) │           │
│                                                                 └────────────────────┘           │
│                                                                                                  │
│   Each sink independently filters the same stream. No data is copied — only references.          │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON09-scripting.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        09 — Scripting                                 │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Transform, enrich, and fork                    │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          data with Lua or Python.                       │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SCRIPT EXECUTION LIFECYCLE                                                                     │
│   ──────────────────────────                                                                     │
│                                                                                                  │
│   Scripts hook into five points in the connector lifecycle.                                      │
│   Each runs at a different stage — from startup to shutdown.                                     │
│                                                                                                  │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │   CONNECTOR START                                                                       │    │
│   │        │                                                                                │    │
│   │        ▼                                                                                │    │
│   │   ┌──────────────┐   Runs ONCE at connector initialization.                             │    │
│   │   │  init_script │   Set up caches, load lookup tables, initialize state.               │    │
│   │   └──────┬───────┘                                                                      │    │
│   │          │                                                                              │    │
│   │          ▼                          ┌──────────────────────────────────────────┐        │    │
│   │   ┌──────────────────┐              │                                          │        │    │
│   │   │  enter_script    │              │   Runs ONCE per scan cycle, BEFORE       │        │    │
│   │   └──────┬───────────┘              │   any items are read. Good for           │        │    │
│   │          │                          │   resetting per-loop accumulators.       │        │    │
│   │          ▼                          └──────────────────────────────────────────┘        │    │
│   │   ┌──────────────────┐                                                                  │    │
│   │   │  item_script     │◄──── Runs ONCE PER ITEM, every scan cycle.                       │    │
│   │   │  (or "script")   │      This is where transforms happen.                            │    │
│   │   │                  │      The "result" variable holds the raw value.                  │    │
│   │   └──────┬───────────┘      Return the transformed value.                               │    │
│   │          │ (repeats                                                                     │    │
│   │          │  for each item)                                                              │    │
│   │          ▼                          ┌──────────────────────────────────────────┐        │    │
│   │   ┌──────────────────┐              │                                          │        │    │
│   │   │  exit_script     │              │   Runs ONCE per scan cycle, AFTER        │        │    │
│   │   └──────┬───────────┘              │   all items are read. Good for           │        │    │
│   │          │                          │   aggregations, summaries, batch emits.  │        │    │
│   │          │                          └──────────────────────────────────────────┘        │    │
│   │          │                                                                              │    │
│   │    (loop repeats every scan_interval)                                                   │    │
│   │          │                                                                              │    │
│   │          ▼  (on shutdown)                                                               │    │
│   │   ┌────────────────┐   Runs ONCE at connector shutdown.                                 │    │
│   │   │  deinit_script │   Clean up resources, flush caches, close connections.             │    │
│   │   └────────────────┘                                                                    │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE "result" VARIABLE                                                                          │
│   ─────────────────────                                                                          │
│                                                                                                  │
│   Inside item_script (or "script"), the variable "result" holds the raw value                    │
│   read from the source device for the current item.                                              │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   result             What it contains                                        │               │
│   │   ──────             ──────────────────                                      │               │
│   │                                                                              │               │
│   │   A number           72.5  (from a PLC register, OPC node, etc.)             │               │
│   │   A string           "RUNNING"  (from a status tag)                          │               │
│   │   A JSON string      '{"temp":72.5,"psi":14.7}'  (from MQTT, HTTP, etc.)     │               │
│   │   A boolean          true / false                                            │               │
│   │   nil                The source returned no data for this item               │               │
│   │                                                                              │               │
│   │   Return value:      Whatever you return becomes the published message data. │               │
│   │                      Return nil to suppress the message entirely.            │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CHOOSING A LANGUAGE                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   Set lang_script at the connector level.  Default is Lua.                                       │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌──────────────────────────────┬──────────────────────────────────────────┐            │   │
│   │   │  lang_script: lua            │  lang_script: python                     │            │   │
│   │   │  (default if omitted)        │                                          │            │   │
│   │   ├──────────────────────────────┼──────────────────────────────────────────┤            │   │
│   │   │  NLua runtime                │  IronPython runtime (CLR-hosted)         │            │   │
│   │   │  Fast startup, low overhead  │  Python 3.4 standard library             │            │   │
│   │   │                              │  Full .NET framework access              │            │   │
│   │   │  Globals:                    │  Prefixed with dime.*:                   │            │   │
│   │   │    cache(), emit(),          │    dime.cache(), dime.emit(),            │            │   │
│   │   │    from_json(), set()        │    dime.from_json(), dime.set()          │            │   │
│   │   │                              │                                          │            │   │
│   │   │  Best for: quick math,       │  Best for: complex parsing,              │            │   │
│   │   │  simple transforms           │  library-heavy transforms                │            │   │
│   │   └──────────────────────────────┴──────────────────────────────────────────┘            │   │
│   │                                                                                          │   │
│   │   YAML:                                                                                  │   │
│   │   ─────                                                                                  │   │
│   │   sources:                                                                               │   │
│   │     - name: my_device                                                                    │   │
│   │       connector: OpcUa                                                                   │   │
│   │       lang_script: python          # omit for Lua (default)                              │   │
│   │       script: "return result * 2"                                                        │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   BASIC TRANSFORMS                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Lua                                                                                    │   │
│   │   ───                                                                                    │   │
│   │                                                                                          │   │
│   │   return result * 2                            -- Scale a value                          │   │
│   │   return (result - 32) * 5 / 9                 -- Fahrenheit to Celsius                  │   │
│   │                                                                                          │   │
│   │   local d = from_json(result)                  -- Extract JSON field                     │   │
│   │   return d.value                                                                         │   │
│   │                                                                                          │   │
│   │   if result > 100 then return 100 end          -- Clamp to range                         │   │
│   │   if result < 0 then return 0 end                                                        │   │
│   │   return result                                                                          │   │
│   │                                                                                          │   │
│   │   local prev = cache('last_val')               -- Suppress unchanged (manual RBE)        │   │
│   │   if result == prev then return nil end                                                  │   │
│   │   set('last_val', result)                                                                │   │
│   │   return result                                                                          │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   Python  (lang_script: python)                                                          │   │
│   │   ─────────────────────────────                                                          │   │
│   │                                                                                          │   │
│   │   return result * 2                            # Scale a value                           │   │
│   │   return (result - 32) * 5 / 9                 # Fahrenheit to Celsius                   │   │
│   │                                                                                          │   │
│   │   import json                                  # Extract JSON field                      │   │
│   │   d = json.loads(result)                                                                 │   │
│   │   return d['value']                                                                      │   │
│   │                                                                                          │   │
│   │   return min(max(result, 0), 100)              # Clamp to range                          │   │
│   │                                                                                          │   │
│   │   prev = dime.cache('last_val')                # Suppress unchanged (manual RBE)         │   │
│   │   if result == prev: return None                                                         │   │
│   │   dime.set('last_val', result)                                                           │   │
│   │   return result                                                                          │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   emit() — FORK ONE MESSAGE INTO MANY                                                            │
│   ───────────────────────────────────                                                            │
│                                                                                                  │
│   Use emit() to publish additional messages from within a script.                                │
│   One source read can produce multiple output paths.                                             │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   Source reads one JSON payload:                                                       │     │
│   │   ─────────────────────────────                                                        │     │
│   │   result = '{"temp":72.5, "psi":14.7, "running":true}'                                 │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   Lua Script:                          Output:                                         │     │
│   │   ───────────                          ───────                                         │     │
│   │                                                                                        │     │
│   │   local data = from_json(result)       ┌─────────────────────────┐                     │     │
│   │                                        │ emit('temperature',     │                     │     │
│   │   emit('temperature', data.temp)       │       72.5)             │                     │     │
│   │   emit('pressure',    data.psi)        │ emit('pressure',        │                     │     │
│   │   emit('status',      data.running)    │       14.7)             │                     │     │
│   │                                        │ emit('status',          │                     │     │
│   │   return nil                           │       true)             │                     │     │
│   │   -- suppress original msg             └─────────────────────────┘                     │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   Python Script:                       Output:                                         │     │
│   │   ──────────────                       ───────                                         │     │
│   │                                                                                        │     │
│   │   import json                          ┌─────────────────────────────┐                 │     │
│   │   data = json.loads(result)            │ dime.emit('temperature',    │                 │     │
│   │                                        │       72.5)                 │                 │     │
│   │   dime.emit('temperature',             │ dime.emit('pressure',       │                 │     │
│   │             data['temp'])              │       14.7)                 │                 │     │
│   │   dime.emit('pressure',                │ dime.emit('status',         │                 │     │
│   │             data['psi'])               │       True)                 │                 │     │
│   │   dime.emit('status',                  └─────────────────────────────┘                 │     │
│   │             data['running'])                                                           │     │
│   │   return None  # suppress original                                                     │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   ┌───────────┐         ┌──────────────┐         ┌──────────────────────────┐          │     │
│   │   │  Source   │         │   Script     │         │ Ring Buffer receives:    │          │     │
│   │   │  reads    │────────▶│   parse JSON │────────▶│   src/temperature = 72.5 │          │     │
│   │   │  1 JSON   │         │   emit() x3  │         │   src/pressure = 14.7    │          │     │
│   │   │  payload  │         │   return nil │         │   src/status = true      │          │     │
│   │   └───────────┘         └──────────────┘         └──────────────────────────┘          │     │
│   │                                                                                        │     │
│   │   emit_mtconnect(path, value, type)  ── emit with MTConnect DataItem mapping           │     │
│   │   Python: dime.emit_mtconnect(path, value, type)                                       │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   BUILT-IN HELPERS — LUA vs PYTHON                                                               │
│   ────────────────────────────────                                                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Lua                                Python                                              │   │
│   │   ───                                ──────                                              │   │
│   │                                                                                          │   │
│   │   from_json(str)                     dime.from_json(str)             Parse JSON          │   │
│   │   to_json(tbl)                       dime.to_json(obj)               Serialize JSON      │   │
│   │                                                                                          │   │
│   │   cache(key)                         dime.cache(key)                 Read cache          │   │
│   │   cache(key, default)                dime.cache(key, default)        Read w/ default     │   │
│   │   cache_ts(key)                      dime.cache_ts(key)              Read + timestamp    │   │
│   │                                                                                          │   │
│   │   set(path, val)                     dime.set(path, val)             Write to cache      │   │
│   │   env(name, default)                 dime.env(name, default)         Read env var        │   │
│   │                                                                                          │   │
│   │   emit(path, val)                    dime.emit(path, val)            Emit message        │   │
│   │   emit_mtconnect(p,v,t)              dime.emit_mtconnect(p,v,t)      Emit MTConnect      │   │
│   │                                                                                          │   │
│   │   connector()                        dime.connector()                Connector ref       │   │
│   │   configuration()                    dime.configuration()            Config ref          │   │
│   │                                                                                          │   │
│   │   The cache persists across scan cycles — use it to track state between reads.           │   │
│   │   Python can also import standard library modules: json, math, re, datetime, etc.        │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   PRACTICAL EXAMPLES                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   EXAMPLE 1: Unit Conversion (inline script)                                             │   │
│   │   ──────────────────────────────────────────                                             │   │
│   │                                                                                          │   │
│   │   Lua:     script: "return (result - 32) * 5 / 9"                                        │   │
│   │   Python:  script: "return (result - 32) * 5 / 9"                                        │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   EXAMPLE 2: JSON Parsing + Multi-Emit                                                   │   │
│   │   ─────────────────────────────────────                                                  │   │
│   │                                                                                          │   │
│   │   Lua:                                     Python (lang_script: python):                 │   │
│   │   ────                                     ──────                                        │   │
│   │   local data = from_json(result)           import json                                   │   │
│   │   for key, val in pairs(data) do           data = json.loads(result)                     │   │
│   │     emit(key, val)                         for key in data:                              │   │
│   │   end                                        dime.emit(key, data[key])                   │   │
│   │   return nil                               return None                                   │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   EXAMPLE 3: State Machine with Cache                                                    │   │
│   │   ───────────────────────────────────                                                    │   │
│   │                                                                                          │   │
│   │   Lua:                                     Python (lang_script: python):                 │   │
│   │   ────                                     ──────                                        │   │
│   │   local prev = cache('machine_state')      prev = dime.cache('machine_state')            │   │
│   │   if result ~= prev then                   if result != prev:                            │   │
│   │     set('machine_state', result)             dime.set('machine_state', result)           │   │
│   │     emit('state_changed', to_json({          dime.emit('state_changed',                  │   │
│   │       from = prev, to = result                 dime.to_json({                            │   │
│   │     }))                                          'from': prev, 'to': result              │   │
│   │   end                                          }))                                       │   │
│   │   return result                            return result                                 │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   Scripts can be inline one-liners or multiline YAML blocks (using | or >).              │   │
│   │   Use paths_script: to add directories where Lua require() can find modules.             │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON10-cache-api.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        10 — Cache API                                 │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Share state across connectors.                 │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Remember values between cycles.                │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE PROBLEM                                                                                    │
│   ───────────                                                                                    │
│                                                                                                  │
│   Sources run independently. Each has its own scan cycle and timer.                              │
│   But sometimes a script in Source A needs data that Source B collected.                         │
│                                                                                                  │
│    ┌──────────┐     scan cycle 1     ┌──────────────────┐                                        │
│    │ Source A │────────────────────▶ │   Ring Buffer    │    Source A has no way                 │
│    │  (PLC)   │     scan cycle 2     │                  │    to see Source B's                   │
│    └──────────┘────────────────────▶ │   Messages flow  │    temperature value.                  │
│                                      │   forward only.  │                                        │
│    ┌──────────┐     scan cycle 1     │                  │    Scripts run in                      │
│    │ Source B │────────────────────▶ │   No cross-read. │    isolation.                          │
│    │ (Weather)│     scan cycle 2     │                  │                                        │
│    └──────────┘────────────────────▶ └──────────────────┘                                        │
│                                                                                                  │
│   The cache API solves this. Every value that enters the ring buffer is cached.                  │
│   Any script, anywhere, can read any cached value at any time.                                   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   READING CACHED VALUES                                                                          │
│   ─────────────────────                                                                          │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   cache( path, default )              Read the last known value for any message path.    │   │
│   │   ─────────────────────               Returns default if path has not been seen yet.     │   │
│   │                                                                                          │   │
│   │     local temp = cache('plc1/temperature', 0)        -- returns number or 0              │   │
│   │     local name = cache('erp/machine_name', 'unknown')  -- returns string or default      │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   cache_ts( path, default )           Read value AND its timestamp as a tuple.           │   │
│   │   ─────────────────────────           Use this to check data freshness.                  │   │
│   │                                       Timestamp is epoch milliseconds.                   │   │
│   │                                                                                          │   │
│   │     local val, ts = cache_ts('plc1/temperature', 0)                                      │   │
│   │     if (os.time() * 1000 - ts) > 60000 then                                              │   │
│   │       return -1  -- stale data, older than 60 seconds                                    │   │
│   │     end                                                                                  │   │
│   │     return val                                                                           │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WRITING TO THE CACHE                                                                           │
│   ────────────────────                                                                           │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   set( path, value )                  Write a custom value into the user cache.          │   │
│   │   ──────────────────                  Does NOT publish to the ring buffer.               │   │
│   │                                       Only stores for later cache() reads.               │   │
│   │                                                                                          │   │
│   │     local count = cache('my_counter', 0)                                                 │   │
│   │     set('my_counter', count + 1)            -- increment a persistent counter            │   │
│   │                                                                                          │   │
│   │     set('machine/state', 'RUNNING')         -- store a state machine value               │   │
│   │     set('batch/average', running_avg)       -- store a computed result                   │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   cache() vs emit()      cache() = read silently     set() = store silently              │   │
│   │   ──────────────────     emit()  = publish to ring buffer for all sinks                  │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CROSS-CONNECTOR ACCESS                                                                         │
│   ──────────────────────                                                                         │
│                                                                                                  │
│   Any script in any connector can read any path from any other connector.                        │
│                                                                                                  │
│    ┌──────────────┐                          ┌──────────────────────────────────┐                │
│    │  Source: plc1│───▶ plc1/temperature ──▶ │                                  │                │
│    │  (OPC-UA)    │───▶ plc1/pressure   ──▶  │         CACHE STORE              │                │
│    └──────────────┘                          │                                  │                │
│                                              │   plc1/temperature  = 72.5       │                │
│    ┌──────────────┐                          │   plc1/pressure     = 14.7       │                │
│    │  Source: wx  │───▶ wx/humidity     ──▶  │   wx/humidity       = 45.2       │                │
│    │  (Weather)   │───▶ wx/ambient_temp ──▶  │   wx/ambient_temp   = 68.1       │                │
│    └──────────────┘                          │   my_counter        = 17         │                │
│                                              │                                  │                │
│                                              └──────────┬───────────────────────┘                │
│                                                         │                                        │
│                              ┌──────────────────────────┘                                        │
│                              │  cache('plc1/temperature', 0)  ──▶ 72.5                           │
│                              │  cache('wx/humidity', 0)        ──▶ 45.2                          │
│                              │  cache('my_counter', 0)         ──▶ 17                            │
│                              ▼                                                                   │
│    ┌──────────────────────────────────────────┐                                                  │
│    │  Source: enricher (Script connector)     │                                                  │
│    │                                          │                                                  │
│    │  script: |                               │                                                  │
│    │    local temp = cache('plc1/temp', 0)    │                                                  │
│    │    local hum  = cache('wx/humidity', 0)  │                                                  │
│    │    emit('combined/comfort_index',        │                                                  │
│    │         temp - (0.55 * (1 - hum/100)     │                                                  │
│    │              * (temp - 58)))             │                                                  │
│    └──────────────────────────────────────────┘                                                  │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   USE CASES                                                                                      │
│   ─────────                                                                                      │
│                                                                                                  │
│   ┌────────────────────────┐  ┌────────────────────────┐  ┌────────────────────────┐             │
│   │                        │  │                        │  │                        │             │
│   │   COMBINE DATA         │  │   RUNNING AVERAGES     │  │   STATE MACHINES       │             │
│   │                        │  │                        │  │                        │             │
│   │  Read PLC temp and     │  │  Accumulate values     │  │  Track machine state   │             │
│   │  weather humidity.     │  │  across scan cycles.   │  │  across cycles.        │             │
│   │  Compute comfort       │  │  Store running sum     │  │  set('state', 'RUN')   │             │
│   │  index in one output.  │  │  and count in cache.   │  │  Transition on events. │             │
│   │                        │  │                        │  │                        │             │
│   └────────────────────────┘  └────────────────────────┘  └────────────────────────┘             │
│                                                                                                  │
│   ┌────────────────────────┐  ┌────────────────────────┐  ┌────────────────────────┐             │
│   │                        │  │                        │  │                        │             │
│   │   CORRELATE EVENTS     │  │   THRESHOLD ALERTS     │  │   BATCH COUNTERS       │             │
│   │                        │  │                        │  │                        │             │
│   │  Match alarm from      │  │  Compare current       │  │  Count parts across    │             │
│   │  PLC with operator     │  │  value against a       │  │  cycles. Persist       │             │
│   │  action from MES.      │  │  cached limit.         │  │  between restarts.     │             │
│   │  Same timestamp?       │  │  Emit alert if over.   │  │  Reset on shift.       │             │
│   │                        │  │                        │  │                        │             │
│   └────────────────────────┘  └────────────────────────┘  └────────────────────────┘             │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DEPENDENCY ORDERING WITH wait_for_connectors                                                   │
│   ────────────────────────────────────────────                                                   │
│                                                                                                  │
│   Problem: If the enricher runs before plc1 has data, cache() returns the default.               │
│   Solution: wait_for_connectors delays a source until its dependencies have connected.           │
│                                                                                                  │
│    ┌───────────────────────────────────────────────────────────────────────────────────────┐     │
│    │                                                                                       │     │
│    │   sources:                                                                            │     │
│    │     - name: plc1                                                                      │     │
│    │       connector: OpcUA                  ─┐                                            │     │
│    │       address: 192.168.1.10              │  These must connect first.                 │     │
│    │                                          │                                            │     │
│    │     - name: weather                      │                                            │     │
│    │       connector: JsonWebScraper         ─┘                                            │     │
│    │       address: https://api.weather.com                                                │     │
│    │                                                                                       │     │
│    │     - name: enricher                                                                  │     │
│    │       connector: Script                                                               │     │
│    │       wait_for_connectors:              ◀── Enricher waits until plc1 AND weather     │     │
│    │         - plc1                               have connected and produced data.        │     │
│    │         - weather                                                                     │     │
│    │       script: |                                                                       │     │
│    │         local t = cache('plc1/temperature', 0)                                        │     │
│    │         local h = cache('weather/humidity', 0)                                        │     │
│    │         return t .. ',' .. h                                                          │     │
│    │                                                                                       │     │
│    └───────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   ┌──────────┐      ┌──────────┐                    ┌────────────┐                               │
│   │  plc1    │─────▶│          │     cache()        │  enricher  │        ┌──────────┐           │
│   │  (OPC-UA)│      │  CACHE   │◀───────────────────│  (Script)  │───────▶│  Sink    │           │
│   └──────────┘      │  STORE   │     cache()        │            │        │  (MQTT)  │           │
│   ┌──────────┐      │          │◀───────────────────│  Reads     │        │          │           │
│   │  weather │─────▶│          │                    │  both.     │        │ Combined │           │
│   │  (HTTP)  │      └──────────┘                    │  Emits     │        │ output   │           │
│   └──────────┘                                      │  combined. │        └──────────┘           │
│                                                     └────────────┘                               │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON11-templates-formatting.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        11 — Templates                                 │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Reshape output for any format.                 │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Liquid and Scriban engines.                    │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE IDEA                                                                                       │
│   ────────                                                                                       │
│                                                                                                  │
│   Templates are defined on sources, rendered by sinks. They bridge the format gap.               │
│                                                                                                  │
│    ┌────────────┐      ┌────────────────┐      ┌───────────────┐      ┌────────────────┐         │
│    │            │      │                │      │               │      │                │         │
│    │  Raw Data  │─────▶│   Template     │─────▶│  Formatted    │─────▶│     Sink       │         │
│    │            │      │   Engine       │      │  Output       │      │                │         │
│    │ Path: ...  │      │                │      │               │      │ HTTP, MQTT,    │         │
│    │ Data: 72.5 │      │ Liquid/Scriban │      │ {"device":    │      │ InfluxDB, ...  │         │
│    │ Time: ...  │      │ expressions    │      │  "plc1", ...} │      │                │         │
│    │            │      │                │      │               │      │                │         │
│    └────────────┘      └────────────────┘      └───────────────┘      └────────────────┘         │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   HOW TEMPLATES WORK                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   Templates are defined on the SOURCE under sink.transform.                                      │
│   Set use_sink_transform: true on each SINK that should render the template.                     │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   SOURCE (where the template is defined)                                                 │   │
│   │                                                                                          │   │
│   │   sources:                                                                               │   │
│   │     - name: my_source                                                                    │   │
│   │       connector: OpcUa                                                                   │   │
│   │       sink:                                                                              │   │
│   │         transform:                                                                       │   │
│   │           type: scriban                      ◀── script | scriban | liquid               │   │
│   │           template: |                                                                    │   │
│   │             {                                                                            │   │
│   │               "device": "{{ Message.Path }}",                                            │   │
│   │               "value": {{ Message.Data }},                                               │   │
│   │               "timestamp": {{ Message.Timestamp }}                                       │   │
│   │             }                                                                            │   │
│   │                                                                                          │   │
│   │   SINK (where template execution is enabled)                                             │   │
│   │                                                                                          │   │
│   │   sinks:                                                                                 │   │
│   │     - name: my_api                                                                       │   │
│   │       connector: HttpClient                                                              │   │
│   │       address: https://api.example.com/data                                              │   │
│   │       use_sink_transform: !!bool true        ◀── renders the source template             │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   TEMPLATE MODES                                                                                 │
│   ──────────────                                                                                 │
│                                                                                                  │
│   DIME supports three modes, all powered by the Scriban library.                                 │
│   Set the mode via sink.transform.type on the source.                                            │
│                                                                                                  │
│   ┌────────────────────────────┐  ┌────────────────────────────┐  ┌────────────────────────────┐ │
│   │                            │  │                            │  │                            │ │
│   │   type: script             │  │   type: scriban            │  │   type: liquid             │ │
│   │                            │  │                            │  │                            │ │
│   │   Expression evaluation.   │  │   Full template syntax.    │  │   Liquid-compatible mode.  │ │
│   │   Simplest mode.           │  │   Loops, conditionals.     │  │   Shopify/Jekyll syntax.   │ │
│   │                            │  │                            │  │                            │ │
│   │   template: Message.Data   │  │   template: |              │  │   template: |              │ │
│   │                            │  │     {{ Message.Data }}     │  │     {{ Message.Data }}     │ │
│   │   Returns the evaluated    │  │     {{ if x > 100 }}       │  │     {% if x > 100 %}       │ │
│   │   result directly.         │  │       ALARM                │  │       ALARM                │ │
│   │                            │  │     {{ end }}              │  │     {% endif %}            │ │
│   │   Also exposes print()     │  │                            │  │                            │ │
│   │   and type() functions.    │  │   .NET-native expressions  │  │   Ruby-inspired syntax.    │ │
│   │                            │  │   with full formatting.    │  │   Widely known.            │ │
│   │                            │  │                            │  │                            │ │
│   └────────────────────────────┘  └────────────────────────────┘  └────────────────────────────┘ │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   TEMPLATE CONTEXT VARIABLES                                                                     │
│   ──────────────────────────                                                                     │
│                                                                                                  │
│   Every template has access to these objects (from the rendering sink):                          │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   OBJECT              PROPERTY             DESCRIPTION                                   │   │
│   │   ────────────────    ────────────────     ──────────────────────────────────────────    │   │
│   │                                                                                          │   │
│   │   Message              .Path               Source path, e.g. "plc1/temperature"          │   │
│   │                        .Data               The raw value (number, string, JSON)          │   │
│   │                        .Timestamp           Unix epoch timestamp of the reading          │   │
│   │                                                                                          │   │
│   │   Connector            .Name               Name of the rendering sink connector          │   │
│   │                        .Type               Connector type, e.g. "HttpClient"             │   │
│   │                                                                                          │   │
│   │   Configuration        .Address             Sink address / URL                           │   │
│   │                        (varies)             Other sink-specific settings                 │   │
│   │                                                                                          │   │
│   │   print()              (script mode)        Write to console for debugging               │   │
│   │   type()               (script mode)        Returns .NET type name of an object          │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   JSON RESHAPING EXAMPLE                                                                         │
│   ──────────────────────                                                                         │
│                                                                                                  │
│   Define on the source, render on the sink.  Reshape into nested JSON for a REST API:            │
│                                                                                                  │
│    INPUT (raw message)                          OUTPUT (after template)                          │
│    ───────────────────                          ──────────────────────                           │
│                                                                                                  │
│    Path: plc1/temperature                       {                                                │
│    Data: 72.5                                     "device": "plc1/temperature",                  │
│    Timestamp: 1700000000                          "readings": {                                  │
│                                                       "value": 72.5,                             │
│                                                       "unit": "F"                                │
│                                                   },                                             │
│    ┌─────────────────────────────────┐            "meta": {                                      │
│    │  sink:                          │                "ts": 1700000000,                          │
│    │    transform:                   │                "source": "dime-edge-01"                   │
│    │      type: scriban              │            }                                              │
│    │      template: |                │          }                                                │
│    │        {                        │                                                           │
│    │          "device":              │ ─▶  Defined on the SOURCE.                                │
│    │            "{{ Message.Path }}" │     Rendered by any sink                                  │
│    │          "readings": {          │     with use_sink_transform:                              │
│    │            "value":             │     !!bool true                                           │
│    │              {{ Message.Data }} │                                                           │
│    │            "unit": "F"          │                                                           │
│    │          },                     │                                                           │
│    │          "meta": {              │                                                           │
│    │            "ts":                │                                                           │
│    │              {{ Message.Timestamp }},│                                                      │
│    │            "source":            │                                                           │
│    │              "dime-edge-01"     │                                                           │
│    │          }                      │                                                           │
│    │        }                        │                                                           │
│    └─────────────────────────────────┘                                                           │
│                                                                                                  │
│   OTHER FORMATS                                                                                  │
│   ─────────────                                                                                  │
│                                                                                                  │
│   ┌─────────────────────────────────┐  ┌─────────────────────────────────┐                       │
│   │  CSV Line                       │  │  Log String                     │                       │
│   │                                 │  │                                 │                       │
│   │  sink:                          │  │  sink:                          │                       │
│   │    transform:                   │  │    transform:                   │                       │
│   │      type: scriban              │  │      type: scriban              │                       │
│   │      template: |                │  │      template: |                │                       │
│   │        {{ Message.Timestamp }}, │  │        [{{ Message.Timestamp }}]│                       │
│   │        {{ Message.Path }},      │  │        {{ Message.Path }}:      │                       │
│   │        {{ Message.Data }}       │  │        {{ Message.Data }}       │                       │
│   └─────────────────────────────────┘  └─────────────────────────────────┘                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   TEMPLATES vs SCRIPTS — WHEN TO USE EACH                                                        │
│   ───────────────────────────────────────                                                        │
│                                                                                                  │
│   ┌──────────────────────────────────────────┐  ┌──────────────────────────────────────────┐     │
│   │                                          │  │                                          │     │
│   │   TEMPLATES                              │  │   LUA / PYTHON SCRIPTS                   │     │
│   │                                          │  │                                          │     │
│   │   Best for OUTPUT FORMATTING:            │  │   Best for DATA LOGIC:                   │     │
│   │                                          │  │                                          │     │
│   │   ✓ Reshaping JSON structure             │  │   ✓ Math and unit conversions            │     │
│   │   ✓ Building CSV or log lines            │  │   ✓ Conditional branching                │     │
│   │   ✓ Protocol-specific payloads           │  │   ✓ State machines and counters          │     │
│   │   ✓ Adding static metadata               │  │   ✓ Parsing complex input                │     │
│   │   ✓ Simple variable substitution         │  │   ✓ emit() to fork messages              │     │
│   │                                          │  │   ✓ cache() for cross-connector reads    │     │
│   │   Defined on the SOURCE.                 │  │   ✓ Aggregation and filtering            │     │
│   │   Rendered by the SINK                   │  │                                          │     │
│   │   (when use_sink_transform: true).       │  │   Runs on the SOURCE side.               │     │
│   │   No access to cache or emit.            │  │   Full API access.                       │     │
│   │   Pure string formatting.                │  │   Turing-complete logic.                 │     │
│   │                                          │  │                                          │     │
│   └──────────────────────────────────────────┘  └──────────────────────────────────────────┘     │
│                                                                                                  │
│   TIP: Use Lua scripts to transform and enrich data on the source, then templates                │
│   to format the final output per sink. They work together.                                       │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON12-plc-to-dashboard.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        12 — PLC to Dashboard                          │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          End-to-end walkthrough.                        │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          From OPC-UA to live charts.                    │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SCENARIO                                                                                       │
│   ────────                                                                                       │
│                                                                                                  │
│   Read Temperature and Pressure from an OPC-UA PLC.                                              │
│   Display values on a live web dashboard via WebSocket.                                          │
│   Store history in InfluxDB for trending and alerting.                                           │
│   Print to console while debugging.                                                              │
│                                                                                                  │
│   Five steps.  One YAML file.  Zero code.                                                        │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   STEP 1 — OPC-UA Source                                                                         │
│   ──────────────────────                                                                         │
│                                                                                                  │
│   Connect to the PLC and read two data points every second:                                      │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sources:                                                                             │     │
│   │     - name: plc1                                                                       │     │
│   │       connector: OpcUa                                                                 │     │
│   │       address: opc.tcp://192.168.1.10:4840                                             │     │
│   │       scan_interval: !!int 1000          # poll every 1000ms                           │     │
│   │       items:                                                                           │     │
│   │         - name: Temperature                                                            │     │
│   │           address: ns=2;s=PLC.Temp       # OPC-UA node ID                              │     │
│   │         - name: Pressure                                                               │     │
│   │           address: ns=2;s=PLC.Pressure   # OPC-UA node ID                              │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   Paths created:  plc1/Temperature  and  plc1/Pressure                                           │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   STEP 2 — Lua Transform (Unit Conversion)                                                       │
│   ────────────────────────────────────────                                                       │
│                                                                                                  │
│   Convert Celsius to Fahrenheit inline on the Temperature item:                                  │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │         - name: Temperature                                                            │     │
│   │           address: ns=2;s=PLC.Temp                                                     │     │
│   │           script: |                                                                    │     │
│   │             local data = from_json(result)                                             │     │
│   │             return data.Value * 1.8 + 32   -- Celsius to Fahrenheit                    │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   The script runs on every poll.  "result" is the raw OPC-UA JSON response.                      │
│   The returned value replaces the original in the ring buffer.                                   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   STEP 3 — InfluxDB Sink (Historian)                                                             │
│   ──────────────────────────────────                                                             │
│                                                                                                  │
│   Store all PLC data in InfluxDB using line protocol:                                            │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sinks:                                                                               │     │
│   │     - name: historian                                                                  │     │
│   │       connector: InfluxLP                                                              │     │
│   │       address: http://influx.local:8086                                                │     │
│   │       bucket_name: factory                                                             │     │
│   │       org_name: myorg                                                                  │     │
│   │       token: my-token-here                                                             │     │
│   │       include_filter:                                                                  │     │
│   │         - "plc1/.*"                      # only data from plc1                         │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   InfluxLP writes native line protocol.  No transformation needed.                               │
│   The full message path becomes the measurement; the field key is "value".                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   STEP 4 — WebSocket Sink (Live Dashboard)                                                       │
│   ────────────────────────────────────────                                                       │
│                                                                                                  │
│   Push real-time values to a browser-based dashboard:                                            │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │     - name: dashboard                                                                  │     │
│   │       connector: WebSocketServer                                                       │     │
│   │       uri: ws://0.0.0.0:8092/                                                          │     │
│   │       include_filter:                                                                  │     │
│   │         - "plc1/.*"                      # same filter as historian                    │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   Any WebSocket client on ws://localhost:8092 receives JSON messages in real time.               │
│   Connect a chart library (Grafana, custom JS) and you have a live dashboard.                    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   STEP 5 — Console Sink (Debugging)                                                              │
│   ─────────────────────────────────                                                              │
│                                                                                                  │
│   Print everything to stdout while developing:                                                   │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │     - name: debug                                                                      │     │
│   │       connector: Console                                                               │     │
│   │       enabled: !!bool true               # flip to false when done debugging           │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   No filter = receives ALL messages.  Disable with enabled: !!bool false.                        │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   COMPLETE DATA FLOW                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   ┌───────────────┐       ┌───────────────┐       ┌────────────────────────────────────────┐     │
│   │               │       │               │       │                                        │     │
│   │   OPC-UA PLC  │       │  Ring Buffer  │       │  ┌─────────────┐  historian            │     │
│   │               │       │               │       │  │  InfluxDB   │  (InfluxLP sink)      │     │
│   │  Temperature ─┼──────▶│  plc1/Temp ───┼──────▶│  └─────────────┘                       │     │
│   │  (+ Lua: C→F) │       │               │       │                                        │     │
│   │               │       │               │       │  ┌─────────────┐  dashboard            │     │
│   │  Pressure ────┼──────▶│  plc1/Press ──┼──────▶│  │  WebSocket  │  (WS sink :8092)      │     │
│   │               │       │               │       │  └─────────────┘                       │     │
│   │  192.168.1.10 │       │  (4096 slots) │       │                                        │     │
│   │  :4840        │       │               │       │  ┌─────────────┐  debug                │     │
│   │               │       │               │──────▶│  │  Console    │  (stdout)             │     │
│   │               │       │               │       │  └─────────────┘                       │     │
│   │               │       │               │       │                                        │     │
│   └───────────────┘       └───────────────┘       └────────────────────────────────────────┘     │
│                                                                                                  │
│     SOURCE (1)              BUFFER                  SINKS (3)                                    │
│     Reads every 1s          Routes to all sinks     Each gets every message                      │
│                              simultaneously          Filters select what to keep                 │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ADDING A SECOND MACHINE                                                                        │
│   ───────────────────────                                                                        │
│                                                                                                  │
│   Copy the source block, change the name and address:                                            │
│                                                                                                  │
│   ┌──────────────────────────────────────────┐  ┌──────────────────────────────────────────┐     │
│   │                                          │  │                                          │     │
│   │   - name: plc1                           │  │   - name: plc2                           │     │
│   │     connector: OpcUa                     │  │     connector: OpcUa                     │     │
│   │     address: opc.tcp://192.168.1.10:4840 │  │     address: opc.tcp://192.168.1.20:4840 │     │
│   │     ...                                  │  │     ...                                  │     │
│   │                                          │  │                                          │     │
│   └──────────────────────────────────────────┘  └──────────────────────────────────────────┘     │
│                                                                                                  │
│   The sinks already use "plc1/.*" filters.  Change to "plc.*/.*" to capture both.                │
│   Or add a new sink with "plc2/.*" for separate handling.                                        │
│                                                                                                  │
│   50 machines?  50 source blocks.  Same sinks.  Same YAML file.                                  │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON13-recipe-mqtt.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        13 — MQTT Integration                          │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Subscribe, transform, republish.               │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          The most common pattern.                       │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MQTT AS A SOURCE                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│   Subscribe to sensor topics from a local broker and ingest into the ring buffer:                │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sources:                                                                             │     │
│   │     - name: sensors                                                                    │     │
│   │       connector: MQTT                                                                  │     │
│   │       address: mqtt.local                    # broker hostname or IP                   │     │
│   │       port: !!int 1883                       # default MQTT port                       │     │
│   │       client_id: dime-sub                    # unique client identifier                │     │
│   │       username: user                         # broker credentials                      │     │
│   │       password: pass                                                                   │     │
│   │       qos: !!int 1                           # 0=at most once, 1=at least once         │     │
│   │       clean_session: !!bool true             # no persistent session state             │     │
│   │       items:                                                                           │     │
│   │         - name: line1_temp                                                             │     │
│   │           address: factory/sensors/line1/temp   # MQTT topic to subscribe to           │     │
│   │         - name: line1_pressure                                                         │     │
│   │           address: factory/sensors/line1/pressure                                      │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   DIME subscribes to each item's address as a separate MQTT topic.                               │
│   Topic: factory/sensors/line1/temp  →  Ring buffer path: sensors/line1_temp                     │
│                                                                                                  │
│   MQTT CONFIG FIELDS                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   ┌─────────────────────┬────────────────────────────────────────────────────────────────┐       │
│   │  Field              │  Description                                                   │       │
│   ├─────────────────────┼────────────────────────────────────────────────────────────────┤       │
│   │  address            │  Broker hostname or IP address                                 │       │
│   │  port               │  Broker port (1883 plain, 8883 TLS)                            │       │
│   │  client_id          │  Unique ID for this MQTT client (must be unique per broker)    │       │
│   │  username / password│  Credentials (optional, depends on broker config)              │       │
│   │  base_topic         │  (sink only) Prefix for published topics                       │       │
│   │  qos                │  Quality of Service: 0, 1, or 2                                │       │
│   │  clean_session      │  true = no state between reconnects, false = resume session    │       │
│   │  retain             │  (sink only) true = broker stores last message per topic       │       │
│   └─────────────────────┴────────────────────────────────────────────────────────────────┘       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   TLS / SSL CONFIGURATION                                                                        │
│   ───────────────────────                                                                        │
│                                                                                                  │
│   For encrypted connections (port 8883), add the TLS flags:                                      │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │       tls: !!bool true                       # enable TLS encryption                   │     │
│   │       tls_insecure: !!bool false             # set true for self-signed certs          │     │
│   │                                                                                        │     │
│   │   ┌─────────────────────────────────────────────────────────────────────────────┐      │     │
│   │   │                                                                             │      │     │
│   │   │  tls: false  +  port 1883   =  Plain TCP           (dev / internal)         │      │     │
│   │   │  tls: true   +  port 8883   =  TLS encrypted       (production)             │      │     │
│   │   │  tls: true   +  tls_insecure  =  TLS, skip verify  (self-signed certs)      │      │     │
│   │   │                                                                             │      │     │
│   │   └─────────────────────────────────────────────────────────────────────────────┘      │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   Always use TLS in production.  tls_insecure is for self-signed certificates only.              │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MQTT AS A SINK                                                                                 │
│   ──────────────                                                                                 │
│                                                                                                  │
│   Republish transformed data to a cloud broker:                                                  │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sinks:                                                                               │     │
│   │     - name: cloud_mqtt                                                                 │     │
│   │       connector: MQTT                                                                  │     │
│   │       address: mqtt.cloud.com                # cloud broker endpoint                   │     │
│   │       port: !!int 8883                       # TLS port                                │     │
│   │       tls: !!bool true                       # encrypted                               │     │
│   │       client_id: dime-pub                    # unique client ID for publishing         │     │
│   │       base_topic: normalized/data            # publish under this prefix               │     │
│   │       retain: !!bool true                    # broker keeps last value per topic       │     │
│   │       qos: !!int 1                                                                     │     │
│   │       include_filter:                                                                  │     │
│   │         - "sensors/.*"                      # only forward sensor data                 │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   Ring buffer path sensors/line1_temp  →  Published to normalized/data/sensors/line1_temp        │
│   The retain flag means new subscribers immediately get the last known value.                    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SPARKPLUG B — INDUSTRIAL MQTT                                                                  │
│   ─────────────────────────────                                                                  │
│                                                                                                  │
│   SparkplugB adds structure to MQTT for industrial use:                                          │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   SparkplugB vs plain MQTT:                                                            │     │
│   │                                                                                        │     │
│   │   ┌──────────────────────┬──────────────────────────────────────────────────────┐      │     │
│   │   │  Feature             │  Plain MQTT            SparkplugB                    │      │     │
│   │   ├──────────────────────┼──────────────────────────────────────────────────────┤      │     │
│   │   │  Payload format      │  Freeform (JSON/text)  Protobuf (typed metrics)      │      │     │
│   │   │  Birth certificates  │  Not supported         NBIRTH/DBIRTH on connect      │      │     │
│   │   │  Death certificates  │  LWT (simple)          NDEATH/DDEATH (structured)    │      │     │
│   │   │  Topic namespace     │  User-defined          spBv1.0/group/type/node/dev   │      │     │
│   │   │  State awareness     │  Manual                Automatic via birth/death     │      │     │
│   │   │  Data types          │  String only           Int, Float, Bool, DateTime    │      │     │
│   │   └──────────────────────┴──────────────────────────────────────────────────────┘      │     │
│   │                                                                                        │     │
│   │   Use connector: SparkplugB instead of connector: MQTT                                 │     │
│   │   DIME handles birth/death certificates and Protobuf encoding automatically.           │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CLEAN SESSION AND RETAIN                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   Two flags that control message persistence:                                                    │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   clean_session: !!bool true                                                           │     │
│   │   ┌────────────────────────────────────────────────────────────────────────────┐       │     │
│   │   │  true  = Start fresh on every connect. No queued messages. No state.       │       │     │
│   │   │  false = Broker remembers subscriptions and queues messages while offline. │       │     │
│   │   └────────────────────────────────────────────────────────────────────────────┘       │     │
│   │                                                                                        │     │
│   │   retain: !!bool true  (sink only)                                                     │     │
│   │   ┌────────────────────────────────────────────────────────────────────────────┐       │     │
│   │   │  true  = Broker stores the LAST message per topic. New subs get it.        │       │     │
│   │   │  false = Messages are transient. Only delivered to active subscribers.     │       │     │
│   │   └────────────────────────────────────────────────────────────────────────────┘       │     │
│   │                                                                                        │     │
│   │   Typical patterns:                                                                    │     │
│   │     Source: clean_session true  — DIME is stateless, always re-subscribes              │     │
│   │     Sink:   retain true         — Dashboard sees latest value on page load             │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   EDGE-TO-CLOUD FLOW                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   ┌──────────┐    ┌─────────────┐    ┌────────────────────────────┐    ┌─────────────────┐       │
│   │          │    │             │    │         D I M E            │    │                 │       │
│   │ Devices  │    │   Local     │    │                            │    │   Cloud         │       │
│   │          │    │   Broker    │    │  ┌────────┐  ┌─────────┐   │    │  Broker         │       │
│   │ Sensor ──┼───▶│             │    │  │ Source │  │  Sink   │   │    │                 │       │
│   │          │    │  mqtt.local │───▶│  │ (MQTT) │─▶│ (MQTT)  │── ┼───▶│ mqtt.cloud.com  │       │
│   │ Sensor ──┼───▶│  :1883      │    │  └────────┘  └─────────┘   │    │ :8883 (TLS)     │       │
│   │          │    │             │    │       │                    │    │                 │       │
│   │ Sensor ──┼───▶│             │    │  ┌────┴────────────────┐   │    │                 │       │
│   │          │    │             │    │  │    Ring Buffer      │   │    │                 │       │
│   │          │    │             │    │  │    Transform/Filter │   │    │                 │       │
│   │          │    │             │    │  └─────────────────────┘   │    │                 │       │
│   │          │    │             │    │                            │    │                 │       │
│   └──────────┘    └─────────────┘    └────────────────────────────┘    └─────────────────┘       │
│                                                                                                  │
│     DEVICES           EDGE               DIME CONNECTOR                  CLOUD                   │
│     Publish to        Receives all        Subscribe → Buffer →           Receives normalized     │
│     local broker      sensor data         Transform → Republish          data over TLS           │
│                                                                                                  │
│   This pattern works for any MQTT-to-MQTT bridge scenario:                                       │
│     • Edge sensors  →  Cloud analytics                                                           │
│     • Local SCADA   →  Enterprise historian                                                      │
│     • OT network    →  IT network (via TLS)                                                      │
│                                                                                                  │
│   To chain multiple DIME instances, see page 22 — Instance Chaining.                             │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON14-recipe-database.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        14 — Database Logging                          │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Capture history.                               │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          InfluxDB, SQL, MongoDB, and CSV.               │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   VISUAL OVERVIEW — FAN-OUT TO MULTIPLE DATABASES                                                │
│   ────────────────────────────────────────────────                                               │
│                                                                                                  │
│   DIME reads from any number of sources, buffers centrally, then writes                          │
│   to any combination of databases simultaneously.                                                │
│                                                                                                  │
│    Sources                         Ring Buffer                     Database Sinks                │
│    ───────                         ───────────                     ──────────────                │
│                                                                                                  │
│    ┌──────────┐                ┌──────────────┐              ┌──────────────────┐                │
│    │ PLC      │──────┐         │              │       ┌─────▶│ InfluxDB         │                │
│    │ (OPC-UA) │      │         │  ┌────────┐  │       │      │ time-series      │                │
│    └──────────┘      │         │  │  ····  │  │       │      │ bucket: factory  │                │
│                      ├────────▶│  │  msgs  │  │───────┤      └──────────────────┘                │
│    ┌──────────┐      │         │  │  ····  │  │       │                                          │
│    │ MQTT     │──────┤         │  └────────┘  │       ├─────▶┌──────────────────┐                │
│    │ Sensors  │      │         │              │       │      │ SQL Server       │                │
│    └──────────┘      │         │  4096 slots  │       │      │ relational       │                │
│                      │         │              │       │      │ table: readings  │                │
│    ┌──────────┐      │         └──────────────┘       │      └──────────────────┘                │
│    │ Modbus   │──────┘                                │                                          │
│    │ RTU      │                                       ├─────▶┌──────────────────┐                │
│    └──────────┘                                       │      │ MongoDB          │                │
│                                                       │      │ documents        │                │
│                                                       │      │ coll: readings   │                │
│                                                       │      └──────────────────┘                │
│                                                       │                                          │
│                                                       └─────▶┌──────────────────┐                │
│                                                              │ CSV File         │                │
│                                                              │ readings.csv     │                │
│                                                              └──────────────────┘                │
│                                                                                                  │
│   All sinks run in parallel. Each has its own filters, timing, and format.                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   INFLUXDB SINK — TIME-SERIES HISTORIAN                                                          │
│   ─────────────────────────────────────                                                          │
│                                                                                                  │
│   Uses the InfluxDB Line Protocol (InfluxLP). DIME automatically formats                         │
│   each message into line-protocol syntax for InfluxDB v2.                                        │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   connector: InfluxLP                                                        │               │
│   │                                                                              │               │
│   │   Required fields:                                                           │               │
│   │     url ───────────── http://influx.local:8086     Server address            │               │
│   │     bucket ────────── factory_data                 Target bucket             │               │
│   │     org ───────────── myorg                        InfluxDB organization     │               │
│   │     token ─────────── my-influx-token              API auth token            │               │
│   │                                                                              │               │
│   │   Automatic behavior:                                                        │               │
│   │     • Converts Path to measurement name                                      │               │
│   │     • Timestamps in nanosecond precision                                     │               │
│   │     • Batch writes for performance                                           │               │
│   │     • Retry on transient failures                                            │               │
│   │                                                                              │               │
│   │   Line protocol generated:                                                   │               │
│   │     temperature,source=plc1 value=72.5 1708300800000000000                   │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   Best for: high-frequency sensor data, trend analysis, Grafana dashboards.                      │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SQL SERVER & POSTGRESQL SINKS — RELATIONAL DATABASES                                           │
│   ─────────────────────────────────────────────────────                                          │
│                                                                                                  │
│   Store data in structured tables with batch inserts for performance.                            │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   SQL Server Sink                        PostgreSQL Sink                     │               │
│   │   ───────────────                        ───────────────                     │               │
│   │                                                                              │               │
│   │   connector: SqlServer                   connector: PostgreSql               │               │
│   │                                                                              │               │
│   │   connection_string:                     connection_string:                  │               │
│   │     "Server=db.local;                      "Host=pg.local;                   │               │
│   │      Database=dime;                         Database=dime;                   │               │
│   │      User Id=sa;                            Username=dime;                   │               │
│   │      Password=pass;"                        Password=pass;"                  │               │
│   │                                                                              │               │
│   │   Features:                              Features:                           │               │
│   │     • Table auto-mapping                   • Query templates                 │               │
│   │     • Batch inserts                        • Parameterized inserts           │               │
│   │     • Column-to-path mapping               • Schema-aware writes             │               │
│   │     • Stored procedure calls               • Connection pooling              │               │
│   │                                                                              │               │
│   │   Insert flow:                                                               │               │
│   │     message ──▶ map path to column ──▶ batch ──▶ INSERT INTO table           │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   Best for: relational reporting, ERP integration, audit trails.                                 │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MONGODB SINK — DOCUMENT STORAGE                                                                │
│   ───────────────────────────────                                                                │
│                                                                                                  │
│   Store each reading as a flexible JSON-like document.                                           │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   connector: MongoDB                                                         │               │
│   │                                                                              │               │
│   │   Required fields:                                                           │               │
│   │     connection_string ── "mongodb://mongo.local:27017"                       │               │
│   │     database ────────── factory                                              │               │
│   │     collection ──────── readings                                             │               │
│   │                                                                              │               │
│   │   Document structure (auto-generated):                                       │               │
│   │   ┌──────────────────────────────────────┐                                   │               │
│   │   │ {                                    │                                   │               │
│   │   │   "path": "plc1/temperature",        │                                   │               │
│   │   │   "value": 72.5,                     │                                   │               │
│   │   │   "timestamp": 1708300800000,        │                                   │               │
│   │   │   "source": "plc1",                  │                                   │               │
│   │   │   "item": "temperature"              │                                   │               │
│   │   │ }                                    │                                   │               │
│   │   └──────────────────────────────────────┘                                   │               │
│   │                                                                              │               │
│   │   Features:                                                                  │               │
│   │     • Schema-free — no table migration needed                                │               │
│   │     • Automatic BSON conversion                                              │               │
│   │     • Bulk write operations                                                  │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   Best for: flexible schemas, nested data, rapid prototyping.                                    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CSV WRITER & LOGGER SINKS — FILE-BASED OUTPUT                                                  │
│   ──────────────────────────────────────────────                                                 │
│                                                                                                  │
│   Write data to local files. Simple, portable, no database needed.                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   CsvWriter Sink                         Logger Sink                         │               │
│   │   ──────────────                         ───────────                         │               │
│   │                                                                              │               │
│   │   connector: CsvWriter                   connector: Logger                   │               │
│   │                                                                              │               │
│   │   filename: readings.csv                 NLog-based structured logging:      │               │
│   │                                                                              │               │
│   │   Options:                                 • Writes to rolling log files     │               │
│   │     filter_duplicate_paths:                • Configurable NLog targets       │               │
│   │       !!bool false                         • Structured JSON output          │               │
│   │     auto_headers: true                     • Path, value, timestamp          │               │
│   │                                              per log entry                   │               │
│   │   Output format:                                                             │               │
│   │   ┌──────────────────────────────┐                                           │               │
│   │   │ path,value,timestamp         │       Use Logger when you need:           │               │
│   │   │ plc1/temp,72.5,17083008...   │         • Audit trail with rotation       │               │
│   │   │ plc1/psi,14.7,17083008...    │         • Integration with log systems    │               │
│   │   └──────────────────────────────┘         • NLog ecosystem support          │               │
│   │                                                                              │               │
│   │   filter_duplicate_paths:                                                    │               │
│   │     true  ── only one row per unique path (latest value)                     │               │
│   │     false ── append every reading (full history)                             │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   Best for: quick exports, Excel import, archival, debugging.                                    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DATABASE AS SOURCE — READING FROM DATABASES                                                    │
│   ────────────────────────────────────────────                                                   │
│                                                                                                  │
│   DIME can also READ from SQL Server and PostgreSQL using BatchPolling.                          │
│   Useful for pulling ERP data, work orders, or recipe parameters.                                │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   BatchPollingSourceConnector                                                │               │
│   │   ───────────────────────────                                                │               │
│   │                                                                              │               │
│   │   connector: SqlServer  (or PostgreSql)                                      │               │
│   │                                                                              │               │
│   │   connection_string: "Server=db.local;Database=erp;"                         │               │
│   │   query: "SELECT id, value FROM sensors WHERE updated > @last_run"           │               │
│   │                                                                              │               │
│   │   Flow:                                                                      │               │
│   │     Timer fires ──▶ Execute query ──▶ Iterate rows ──▶ Publish each          │               │
│   │                                                                              │               │
│   │   ┌─────────┐      ┌─────────────┐      ┌────────────┐      ┌──────────┐     │               │
│   │   │  Timer  │─────▶│  SQL Query  │─────▶│  Row 1     │─────▶│ Ring     │     │               │
│   │   │  fires  │      │  executes   │      │  Row 2     │      │ Buffer   │     │               │
│   │   │         │      │             │      │  Row 3...  │      │          │     │               │
│   │   └─────────┘      └─────────────┘      └────────────┘      └──────────┘     │               │
│   │                                                                              │               │
│   │   Each column becomes a path:  db_reader/query1/col_name                     │               │
│   │   scan_interval controls how often the query runs.                           │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   COMPARISON — WHEN TO USE WHICH DATABASE                                                        │
│   ────────────────────────────────────────                                                       │
│                                                                                                  │
│   ┌──────────────┬──────────────────┬──────────────────────────────────────────┐                 │
│   │  Connector   │  Best For        │  When to Choose                          │                 │
│   ├──────────────┼──────────────────┼──────────────────────────────────────────┤                 │
│   │              │                  │                                          │                 │
│   │  InfluxDB    │  Time-series     │  High-frequency sensor data. Grafana     │                 │
│   │              │                  │  dashboards. Trend analysis. Downsampling│                 │
│   │              │                  │                                          │                 │
│   ├──────────────┼──────────────────┼──────────────────────────────────────────┤                 │
│   │              │                  │                                          │                 │
│   │  SQL Server  │  Relational      │  ERP integration. Audit trails.          │                 │
│   │  PostgreSQL  │  queries         │  Joins across tables. Reporting.         │                 │
│   │              │                  │                                          │                 │
│   ├──────────────┼──────────────────┼──────────────────────────────────────────┤                 │
│   │              │                  │                                          │                 │
│   │  MongoDB     │  Documents       │  Flexible schemas. Nested payloads.      │                 │
│   │              │                  │  Rapid prototyping. Schema evolution.    │                 │
│   │              │                  │                                          │                 │
│   ├──────────────┼──────────────────┼──────────────────────────────────────────┤                 │
│   │              │                  │                                          │                 │
│   │  CSV Writer  │  Simple export   │  Quick file dumps. Excel import.         │                 │
│   │              │                  │  No infrastructure needed.               │                 │
│   │              │                  │                                          │                 │
│   ├──────────────┼──────────────────┼──────────────────────────────────────────┤                 │
│   │              │                  │                                          │                 │
│   │  Logger      │  Structured logs │  NLog integration. Rolling files.        │                 │
│   │              │                  │  Audit compliance. Debug traces.         │                 │
│   │              │                  │                                          │                 │
│   └──────────────┴──────────────────┴──────────────────────────────────────────┘                 │
│                                                                                                  │
│   You can run ALL of these simultaneously from a single DIME instance.                           │
│   The ring buffer fans out to every sink in parallel — no performance penalty.                   │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON15-recipe-mtconnect.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        15 — MTConnect & CNC                           │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Read from machines.                            │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Serve as an MTConnect agent.                   │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHAT IS MTCONNECT?                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   MTConnect is an open, royalty-free standard for monitoring manufacturing                       │
│   equipment. It provides a common vocabulary for machine data — spindle speed,                   │
│   axis positions, tool states, and alarms — over HTTP/XML.                                       │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   MTConnect Data Types:                                                      │               │
│   │                                                                              │               │
│   │     SAMPLES ─────── Numeric values that change over time                     │               │
│   │                      Spindle speed, axis position, feed rate                 │               │
│   │                                                                              │               │
│   │     EVENTS ──────── Discrete state changes                                   │               │
│   │                      Execution state (ACTIVE, STOPPED), tool ID              │               │
│   │                                                                              │               │
│   │     CONDITIONS ──── Alarm / warning states                                   │               │
│   │                      NORMAL, WARNING, FAULT, UNAVAILABLE                     │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   DIME speaks MTConnect natively — both as a consumer and as a producer.                         │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   END-TO-END FLOW — CNC TO DASHBOARD                                                             │
│   ───────────────────────────────────                                                            │
│                                                                                                  │
│    CNC Machines            DIME                          Consumers                               │
│    ────────────            ────                          ─────────                               │
│                                                                                                  │
│    ┌───────────┐      ┌─────────────────────────────┐      ┌────────────────┐                    │
│    │ Haas CNC  │SHDR─▶│                             │      │ MTConnect      │                    │
│    │ (direct)  │      │  ┌──────┐     ┌──────────┐  │      │ Agent on :5000 │                    │
│    └───────────┘      │  │Source│────▶│          │  ├─────▶│                │                    │
│                       │  └──────┘     │   Ring   │  │      └───────┬────────┘                    │
│    ┌───────────┐      │               │  Buffer  │  │              │                             │
│    │ FANUC     │─────▶│  ┌──────┐     │          │  │              ▼                             │
│    │ Robot     │      │  │Source│────▶│          │  │      ┌────────────────┐                    │
│    └───────────┘      │  └──────┘     │          │  │      │ Grafana /      │                    │
│                       │               │          │  │      │ Dashboard      │                    │
│    ┌───────────┐      │  ┌──────┐     │          │  │      └────────────────┘                    │
│    │ Yaskawa   │─────▶│  │Source│────▶│          │  │                                            │
│    │ Robot     │      │  └──────┘     └──────────┘  │      ┌────────────────┐                    │
│    └───────────┘      │                             ├─────▶│ InfluxDB /     │                    │
│                       │         Lua transforms      │      │ SQL Server     │                    │
│    ┌───────────┐      │         emit_mtconnect()    │      └────────────────┘                    │
│    │ Existing  │─HTTP─▶│                            │                                            │
│    │ MTConnect │      │  ┌──────┐     ┌──────────┐  │      ┌────────────────┐                    │
│    │ Agent     │      │  │Source│────▶│  SHDR    │  ├─────▶│ External       │                    │
│    └───────────┘      │  └──────┘     │  Sink    │  │      │ MTConnect      │                    │
│                       │               └──────────┘  │      │ Agent          │                    │
│                       └─────────────────────────────┘      └────────────────┘                    │
│                                                                                                  │
│   DIME bridges protocols: read SHDR from Haas, serve MTConnect to dashboards.                    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MTCONNECT SOURCE — POLL AN EXISTING AGENT                                                      │
│   ──────────────────────────────────────────                                                     │
│                                                                                                  │
│   Connect to any standard MTConnect agent over HTTP. DIME polls the                              │
│   /current endpoint at the configured interval.                                                  │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   connector: MTConnect                                                       │               │
│   │                                                                              │               │
│   │   address ─────────── http://cnc-agent.local:5000    Agent URL               │               │
│   │   scan_interval ───── !!int 1000                     Poll every 1 sec        │               │
│   │                                                                              │               │
│   │   How it works:                                                              │               │
│   │     1. GET http://cnc-agent.local:5000/current                               │               │
│   │     2. Parse XML response for Samples, Events, Conditions                    │               │
│   │     3. Map each data item to a DIME path: sourceName/dataItemId              │               │
│   │     4. Publish to ring buffer                                                │               │
│   │                                                                              │               │
│   │   Result paths:                                                              │               │
│   │     cnc1/SpindleSpeed     ── 12000 (Sample)                                  │               │
│   │     cnc1/Execution        ── ACTIVE (Event)                                  │               │
│   │     cnc1/SystemCondition  ── NORMAL (Condition)                              │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SHDR & HAAS SOURCE — DIRECT MACHINE CONNECTION                                                 │
│   ───────────────────────────────────────────────                                                │
│                                                                                                  │
│   For machines that speak SHDR (Simple Haas Data Relay) natively,                                │
│   DIME connects directly — no intermediate MTConnect agent needed.                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   connector: Haas                                                            │               │
│   │                                                                              │               │
│   │   address ─────────── 192.168.1.50         Machine IP                        │               │
│   │   port ────────────── !!int 7878           SHDR port                         │               │
│   │                                                                              │               │
│   │   SHDR is a pipe-delimited text protocol:                                    │               │
│   │     2024-02-19T10:30:00|Xact|125.002|Yact|87.551|SspeedAct|12000             │               │
│   │                                                                              │               │
│   │   DIME parses this into individual data items:                               │               │
│   │     haas1/Xact      ── 125.002                                               │               │
│   │     haas1/Yact      ──  87.551                                               │               │
│   │     haas1/SspeedAct ── 12000                                                 │               │
│   │                                                                              │               │
│   │   Advantages of direct SHDR:                                                 │               │
│   │     • No separate MTConnect agent to install                                 │               │
│   │     • Lower latency — one fewer network hop                                  │               │
│   │     • DIME becomes the agent (see MTConnect Agent Sink below)                │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FANUC & YASKAWA SOURCES — DIRECT ROBOT CONNECTIVITY                                            │
│   ────────────────────────────────────────────────────                                           │
│                                                                                                  │
│   Purpose-built connectors for industrial robots.                                                │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   FANUC Source                             Yaskawa Source                    │               │
│   │   ────────────                             ──────────────                    │               │
│   │                                                                              │               │
│   │   connector: FANUC                         connector: Yaskawa                │               │
│   │                                                                              │               │
│   │   Reads directly from FANUC               Reads directly from Yaskawa        │               │
│   │   robot controllers via the               robot controllers via native       │               │
│   │   FANUC FOCAS library.                    communication protocol.            │               │
│   │                                                                              │               │
│   │   Typical data:                            Typical data:                     │               │
│   │     • Joint positions (J1-J6)                • Joint positions               │               │
│   │     • TCP position (X,Y,Z,W,P,R)            • I/O registers                  │               │
│   │     • Program number & status                • Alarm states                  │               │
│   │     • Override percentage                    • Cycle counters                │               │
│   │     • Alarm history                          • Program status                │               │
│   │     • I/O registers                          • Speed override                │               │
│   │                                                                              │               │
│   │   Both are PollingSourceConnectors — timer-driven with scan_interval.        │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│   These connectors let DIME act as a universal robot-data gateway.                               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MTCONNECT AGENT SINK — DIME BECOMES THE AGENT                                                  │
│   ───────────────────────────────────────────────                                                │
│                                                                                                  │
│   DIME can serve as a full MTConnect agent, exposing data on an HTTP port.                       │
│   Any MTConnect-compliant client can read from DIME.                                             │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   connector: MTConnectAgent                                                  │               │
│   │                                                                              │               │
│   │   port ────────────── !!int 5000           HTTP port to serve on             │               │
│   │   device_name ─────── CNC-Line-1           Device name in XML                │               │
│   │                                                                              │               │
│   │   Endpoints exposed:                                                         │               │
│   │     http://dime-host:5000/probe     ── Device metadata & capabilities        │               │
│   │     http://dime-host:5000/current   ── Current data item values              │               │
│   │     http://dime-host:5000/sample    ── Historical data stream                │               │
│   │                                                                              │               │
│   │   Flow:                                                                      │               │
│   │     Any DIME source ──▶ Ring Buffer ──▶ MTConnect Agent Sink                 │               │
│   │                                         │                                    │               │
│   │                                         ├── Serves /probe (XML)              │               │
│   │                                         ├── Serves /current (XML)            │               │
│   │                                         └── Serves /sample (XML)             │               │
│   │                                                                              │               │
│   │   This means DIME can unify non-MTConnect devices (PLCs, robots, MQTT)       │               │
│   │   behind a standard MTConnect interface for monitoring tools.                │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SHDR SINK — FEED EXTERNAL AGENTS                                                               │
│   ────────────────────────────────                                                               │
│                                                                                                  │
│   If you already have an MTConnect agent (e.g. the MTConnect C++ Agent),                         │
│   DIME can feed it via SHDR output.                                                              │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   connector: SHDR                                                            │               │
│   │                                                                              │               │
│   │   DIME formats each message as a pipe-delimited SHDR string                  │               │
│   │   and sends it to the external agent's adapter port.                         │               │
│   │                                                                              │               │
│   │   ┌─────────┐      ┌──────────┐      ┌──────────┐      ┌──────────────┐      │               │
│   │   │ Any     │─────▶│  Ring    │─────▶│  SHDR    │─────▶│  External    │      │               │
│   │   │ Source  │      │  Buffer  │      │  Sink    │      │  MTConnect   │      │               │
│   │   └─────────┘      └──────────┘      └──────────┘      │  Agent       │      │               │
│   │                                                        └──────────────┘      │               │
│   │                                                                              │               │
│   │   Use this when your organization mandates a specific MTConnect agent        │               │
│   │   but you need DIME to collect and transform the data.                       │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   emit_mtconnect() — SEMANTIC MAPPING IN LUA                                                     │
│   ───────────────────────────────────────────                                                    │
│                                                                                                  │
│   Use the Lua emit_mtconnect() function to map raw device data                                   │
│   to named MTConnect data items with proper types.                                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────┐               │
│   │                                                                              │               │
│   │   emit_mtconnect( data_item_name, value, mtconnect_type, is_condition )      │               │
│   │                                                                              │               │
│   │   Parameters:                                                                │               │
│   │     data_item_name ── "SpindleSpeed"         Name in MTConnect XML           │               │
│   │     value ─────────── result                  The value to publish           │               │
│   │     mtconnect_type ── "SpindleSpeed"          MTConnect type category        │               │
│   │     is_condition ──── false                   true if Condition type         │               │
│   │                                                                              │               │
│   │   Example Lua script:                                                        │               │
│   │   ┌─────────────────────────────────────────────────────────────────┐        │               │
│   │   │                                                                 │        │               │
│   │   │   -- Map PLC register to MTConnect spindle speed                │        │               │
│   │   │   emit_mtconnect('spindle_speed', result, 'SpindleSpeed', false)│        │               │
│   │   │                                                                 │        │               │
│   │   │   -- Map alarm register to MTConnect condition                  │        │               │
│   │   │   if result > 0 then                                            │        │               │
│   │   │     emit_mtconnect('system_cond', 'FAULT', 'System', true)      │        │               │
│   │   │   else                                                          │        │               │
│   │   │     emit_mtconnect('system_cond', 'NORMAL', 'System', true)     │        │               │
│   │   │   end                                                           │        │               │
│   │   │                                                                 │        │               │
│   │   └─────────────────────────────────────────────────────────────────┘        │               │
│   │                                                                              │               │
│   │   This lets any device — PLC, Modbus, MQTT — appear as an MTConnect          │               │
│   │   device with proper semantic data item names and types.                     │               │
│   │                                                                              │               │
│   └──────────────────────────────────────────────────────────────────────────────┘               │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON16-admin-api.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        16 — Admin REST API                            │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Manage a running instance.                     │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Swagger UI included.                           │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ADMIN REST API — OVERVIEW                                                                      │
│   ──────────────────────────                                                                     │
│                                                                                                  │
│   Every DIME instance runs a built-in HTTP server. No extra config. Always on.                   │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Default endpoint:    http://localhost:9999/                                            │   │
│   │   Swagger UI:          http://localhost:9999/swagger                                     │   │
│   │                                                                                          │   │
│   │   ┌──────────────┐          ┌───────────────┐          ┌──────────────────────┐          │   │
│   │   │              │   HTTP   │               │  control │                      │          │   │
│   │   │  Browser /   │────────▶ │   REST API    │────────▶ │    DIME Engine       │          │   │
│   │   │  curl / app  │◀──────── │   :9999       │◀──────── │                      │          │   │
│   │   │              │   JSON   │               │  status  │  Sources ←→ Sinks    │          │   │
│   │   └──────────────┘          └───────────────┘          └──────────────────────┘          │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ENDPOINT CATALOG                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│   ┌────────┬──────────────────────────────────────────┬─────────────────────────────────────────┐│
│   │ METHOD │ PATH                                     │ DESCRIPTION                             ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  GET   │ /status                                  │ All connector health and metrics        ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  GET   │ /config/yaml                             │ Current running YAML configuration      ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  GET   │ /config/json                             │ Current running JSON configuration      ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  POST  │ /config/yaml                             │ Write new config to disk                ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  POST  │ /config/reload                           │ Reload config from disk and restart     ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  POST  │ /config/save                             │ Persist runtime config to disk          ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  POST  │ /connector/start/{type}/{name}           │ Start one connector (type=source|sink)  ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  POST  │ /connector/stop/{type}/{name}            │ Stop one connector (type=source|sink)   ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  POST  │ /connector/add/{type}/{name}             │ Add connector at runtime                ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  POST  │ /connector/edit/{type}/{name}            │ Edit connector at runtime               ││
│   ├────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤│
│   │  POST  │ /connector/delete/{type}/{name}          │ Delete connector at runtime             ││
│   └────────┴──────────────────────────────────────────┴─────────────────────────────────────────┘│
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   GET /status — RESPONSE ANATOMY                                                                 │
│   ───────────────────────────────                                                                │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   $ curl http://localhost:9999/status                                                    │   │
│   │                                                                                          │   │
│   │   {                                                                                      │   │
│   │     "version": "3.1.5.0",                                                                │   │
│   │     "connectors": {                                                                      │   │
│   │       "plc1": {                                                                          │   │
│   │         "name":             "plc1",           ◀── connector name from YAML               │   │
│   │         "direction":        "Source",          ◀── Source or Sink                        │   │
│   │         "connectorType":    "OpcUa",           ◀── connector type                        │   │
│   │         "isRunning":        true,              ◀── timer active?                         │   │
│   │         "isConnected":      true,              ◀── connection alive?                     │   │
│   │         "isFaulted":        false,             ◀── in error state?                       │   │
│   │         "faultMessage":     "",                ◀── last error message                    │   │
│   │         "messagesAttempted": 5000,             ◀── total reads attempted                 │   │
│   │         "messagesAccepted":  1420,             ◀── passed RBE filter                     │   │
│   │         "lastReadMs":       12,                ◀── last device read (ms)                 │   │
│   │         "lastScriptMs":      4,                ◀── last script exec (ms)                 │   │
│   │         "lastLoopMs":       23,                ◀── last full cycle (ms)                  │   │
│   │         "connectCount":      1,                ◀── total connections                     │   │
│   │         "faultCount":        0                 ◀── cumulative faults                     │   │
│   │       },                                                                                 │   │
│   │       "influx_sink": { ... }                                                             │   │
│   │     }                                                                                    │   │
│   │   }                                                                                      │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   Sources and sinks both appear. One endpoint gives you the full picture.                        │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CONFIGURATION MANAGEMENT                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   READ current config:                                                                   │   │
│   │   ────────────────────                                                                   │   │
│   │   $ curl http://localhost:9999/config/yaml                                               │   │
│   │   $ curl http://localhost:9999/config/json                                               │   │
│   │                                                                                          │   │
│   │   Returns the runtime configuration (includes any unsaved API changes).                  │   │
│   │   Useful for debugging, backup, or auditing.                                             │   │
│   │                                                                                          │   │
│   │   WRITE config to disk:                                                                  │   │
│   │   ─────────────────────                                                                  │   │
│   │   $ curl -X POST http://localhost:9999/config/yaml \                                     │   │
│   │       -H "Content-Type: text/plain" \                                                    │   │
│   │       -d @new-config.yaml                                                                │   │
│   │                                                                                          │   │
│   │   Writes config to disk. Does NOT reload running connectors.                             │   │
│   │   Call POST /config/reload to apply changes.                                             │   │
│   │                                                                                          │   │
│   │   RELOAD from disk:                                                                      │   │
│   │   ──────────────────                                                                     │   │
│   │   $ curl -X POST http://localhost:9999/config/reload                                     │   │
│   │                                                                                          │   │
│   │   Reloads configuration from disk and restarts all connectors.                           │   │
│   │                                                                                          │   │
│   │   SAVE runtime config to disk:                                                           │   │
│   │   ────────────────────────────                                                           │   │
│   │   $ curl -X POST http://localhost:9999/config/save                                       │   │
│   │                                                                                          │   │
│   │   Persists runtime configuration (after add/edit/delete operations) to disk.             │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CONNECTOR CONTROL — START / STOP / ADD / EDIT / DELETE                                         │
│   ──────────────────────────────────────────────────────                                         │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Paths include type (source or sink) and connector name:                                │   │
│   │                                                                                          │   │
│   │   STOP a source connector:                                                               │   │
│   │   $ curl -X POST http://localhost:9999/connector/stop/source/plc1                        │   │
│   │                                                                                          │   │
│   │   START a source connector:                                                              │   │
│   │   $ curl -X POST http://localhost:9999/connector/start/source/plc1                       │   │
│   │                                                                                          │   │
│   │   ADD a new source at runtime (body is YAML):                                            │   │
│   │   $ curl -X POST http://localhost:9999/connector/add/source/new_plc \                    │   │
│   │       -H "Content-Type: text/plain" \                                                    │   │
│   │       -d 'connector: S7                                                                  │   │
│   │   address: 10.0.0.5'                                                                     │   │
│   │                                                                                          │   │
│   │   ADD a new sink at runtime:                                                             │   │
│   │   $ curl -X POST http://localhost:9999/connector/add/sink/debug \                        │   │
│   │       -H "Content-Type: text/plain" \                                                    │   │
│   │       -d 'connector: Console'                                                            │   │
│   │                                                                                          │   │
│   │   EDIT / DELETE follow the same pattern:                                                 │   │
│   │   $ curl -X POST http://localhost:9999/connector/edit/source/plc1 ...                    │   │
│   │   $ curl -X POST http://localhost:9999/connector/delete/sink/debug                       │   │
│   │                                                                                          │   │
│   │   After add/edit/delete, call POST /config/save to persist changes to disk.              │   │
│   │                                                                                          │   │
│   │   ┌─────────────────────────────────────────────────────────────────────────────────┐    │   │
│   │   │                     CONNECTOR LIFECYCLE VIA API                                 │    │   │
│   │   │                                                                                 │    │   │
│   │   │   POST /connector/stop/source/plc1  POST /connector/start/source/plc1           │    │   │
│   │   │          │                                    │                                 │    │   │
│   │   │          ▼                                    ▼                                 │    │   │
│   │   │   ┌──────────────┐                     ┌─────────────┐                          │    │   │
│   │   │   │  DISCONNECT  │                     │  INITIALIZE │                          │    │   │
│   │   │   │  DEINITIALIZE│                     │  CREATE     │                          │    │   │
│   │   │   │  (graceful)  │                     │  CONNECT    │                          │    │   │
│   │   │   └──────────────┘                     │  READ/WRITE │                          │    │   │
│   │   │                                        └─────────────┘                          │    │   │
│   │   │                                                                                 │    │   │
│   │   └─────────────────────────────────────────────────────────────────────────────────┘    │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SWAGGER UI — INTERACTIVE API EXPLORER                                                          │
│   ──────────────────────────────────────                                                         │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Open in browser:   http://localhost:9999/swagger                                       │   │
│   │                                                                                          │   │
│   │   ┌────────────────────────────────────────────────────────────────────────────────┐     │   │
│   │   │  ┌──────────────────────────────────────────────────────────────────────────┐  │     │   │
│   │   │  │  DIME Admin API                                                 v1.0     │  │     │   │
│   │   │  └──────────────────────────────────────────────────────────────────────────┘  │     │   │
│   │   │                                                                                │     │   │
│   │   │  ┌─ GET ───┐  /status                              Health and metrics          │     │   │
│   │   │  └─────────┘                                                                   │     │   │
│   │   │  ┌─ GET ───┐  /config/yaml                         Running YAML config         │     │   │
│   │   │  └─────────┘                                                                   │     │   │
│   │   │  ┌─ GET ───┐  /config/json                         Running JSON config         │     │   │
│   │   │  └─────────┘                                                                   │     │   │
│   │   │  ┌─ POST ──┐  /config/yaml                         Write config to disk        │     │   │
│   │   │  └─────────┘                                                                   │     │   │
│   │   │  ┌─ POST ──┐  /config/reload                       Reload and restart          │     │   │
│   │   │  └─────────┘                                                                   │     │   │
│   │   │  ┌─ POST ──┐  /config/save                         Save runtime to disk        │     │   │
│   │   │  └─────────┘                                                                   │     │   │
│   │   │  ┌─ POST ──┐  /connector/{action}/{type}/{name}    Connector management        │     │   │
│   │   │  └─────────┘   action = start|stop|add|edit|delete                             │     │   │
│   │   │                type = source|sink                                              │     │   │
│   │   │                                                                                │     │   │
│   │   │  Try it out — send real requests directly from the browser.                    │     │   │
│   │   │  No curl needed. Responses shown inline.                                       │     │   │
│   │   └────────────────────────────────────────────────────────────────────────────────┘     │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   HOT RECONFIGURATION — ZERO DOWNTIME                                                            │
│   ────────────────────────────────────                                                           │
│                                                                                                  │
│   Add, remove, or restart connectors without stopping the service.                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Running DIME instance                                                                  │   │
│   │   ┌────────────────────────────────────────────────────────────────┐                     │   │
│   │   │                                                                │                     │   │
│   │   │   [plc1]  ──▶  Ring Buffer  ──▶  [influxdb]                    │   All running.      │   │
│   │   │   [mqtt]  ──▶              ──▶  [splunk]                       │   No interruption.  │   │
│   │   │                                                                │                     │   │
│   │   └────────────────────────────────────────────────────────────────┘                     │   │
│   │                            │                                                             │   │
│   │      POST /connector/add/sink/debug  (body: "connector: Console")                        │   │
│   │                            │                                                             │   │
│   │                            ▼                                                             │   │
│   │   ┌────────────────────────────────────────────────────────────────┐                     │   │
│   │   │                                                                │                     │   │
│   │   │   [plc1]  ──▶  Ring Buffer  ──▶  [influxdb]                    │   Console sink      │   │
│   │   │   [mqtt]  ──▶              ──▶  [splunk]                       │   added live.       │   │
│   │   │                            ──▶  [debug]  ◀── NEW               │   Zero downtime.    │   │
│   │   │                                                                │                     │   │
│   │   └────────────────────────────────────────────────────────────────┘                     │   │
│   │                                                                                          │   │
│   │   Existing connectors are unaffected. The new sink immediately                           │   │
│   │   begins receiving from the ring buffer.                                                 │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON17-websocket-monitoring.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        17 — WebSocket Monitoring                      │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Real-time data streaming.                      │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Build live dashboards.                         │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ADMIN WEBSOCKET — BUILT-IN MONITORING STREAM                                                   │
│   ─────────────────────────────────────────────                                                  │
│                                                                                                  │
│   Every DIME instance streams live telemetry over WebSocket. Always on. No config.               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Default endpoint:    ws://localhost:9998/                                              │   │
│   │                                                                                          │   │
│   │   What streams over this WebSocket:                                                      │   │
│   │                                                                                          │   │
│   │     ┌─────────────────────────────────────────────────────────────────────────────┐      │   │
│   │     │                                                                             │      │   │
│   │     │   Connector status    ── isConnected, isFaulted changes in real time        │      │   │
│   │     │   Performance metrics ── lastLoopMs, lastReadMs, lastScriptMs               │      │   │
│   │     │   Fault notifications ── immediate alert when a connector errors            │      │   │
│   │     │   Live data values    ── current values flowing through ring buffer         │      │   │
│   │     │   $SYSTEM paths       ── all $SYSTEM metadata for every connector           │      │   │
│   │     │                                                                             │      │   │
│   │     └─────────────────────────────────────────────────────────────────────────────┘      │   │
│   │                                                                                          │   │
│   │   ┌─────────────┐         ┌──────────────┐         ┌──────────────────────────┐          │   │
│   │   │             │  data   │              │   WS    │                          │          │   │
│   │   │   Sources   │───────▶ │  Ring Buffer │───────▶ │   Admin WS :9998         │          │   │
│   │   │             │         │              │         │                          │          │   │
│   │   └─────────────┘         └──────────────┘         │   ┌───────────────────┐  │          │   │
│   │                                                    │   │ Connected clients │  │          │   │
│   │                                                    │   │   Browser         │  │          │   │
│   │                                                    │   │   Dashboard       │  │          │   │
│   │                                                    │   │   Monitoring app  │  │          │   │
│   │                                                    │   └───────────────────┘  │          │   │
│   │                                                    └──────────────────────────┘          │   │
│   │                                                                                          │   │
│   │   This is how DIME-Connector.UX (the built-in web dashboard) gets live data.             │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WEBSOCKET SERVER SINK — PUSH DATA TO EXTERNAL CONSUMERS                                        │
│   ────────────────────────────────────────────────────────                                       │
│                                                                                                  │
│   A sink connector that opens a WebSocket server. External clients connect and                   │
│   receive live data filtered by include/exclude patterns.                                        │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   sinks:                                                                                 │   │
│   │     - name: live_feed                                                                    │   │
│   │       connector: WebsocketServer                                                         │   │
│   │       uri: !!str ws://localhost:8092/                                                    │   │
│   │       include_filter:                                                                    │   │
│   │         - "plc1/.*"                                                                      │   │
│   │         - "robot1/.*"                                                                    │   │
│   │                                                                                          │   │
│   │   ┌──────────┐      ┌──────────────┐      ┌───────────────────┐      ┌────────────┐      │   │
│   │   │ plc1     │      │              │      │ WebsocketServer   │      │ External   │      │   │
│   │   │ robot1   │─────▶│  Ring Buffer │─────▶│  Sink :8092       │─────▶│ Clients    │      │   │
│   │   │ mqtt     │      │              │      │                   │      │            │      │   │
│   │   └──────────┘      └──────────────┘      │  Only plc1/* and  │      │ Dashboard  │      │   │
│   │                                           │  robot1/* pass    │      │ Mobile app │      │   │
│   │                                           └───────────────────┘      │ Custom UI  │      │   │
│   │                                                                      └────────────┘      │   │
│   │                                                                                          │   │
│   │   Unlike the admin WS (:9998), this is a configurable SINK — you choose the URI,         │   │
│   │   the data filter, and can run multiple WebSocket servers on different ports.            │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WEB SERVER SINK — SERVE STATIC FILES                                                           │
│   ─────────────────────────────────────                                                          │
│                                                                                                  │
│   Host HTML, CSS, JS files directly from DIME. No separate web server needed.                    │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   sinks:                                                                                 │   │
│   │     - name: web_ui                                                                       │   │
│   │       connector: WebServer                                                               │   │
│   │       uri: !!str http://localhost:8080/         ◀── listen address and port              │   │
│   │       web_root: ./www                           ◀── folder with your HTML/CSS/JS         │   │
│   │                                                                                          │   │
│   │   ┌──────────────────────┐                                                               │   │
│   │   │  ./www/              │          ┌───────────────────────────────────────┐            │   │
│   │   │  ├── index.html      │          │                                       │            │   │
│   │   │  ├── style.css       │────────▶ │   WebServer Sink :8080                │            │   │
│   │   │  ├── app.js          │          │                                       │            │   │
│   │   │  └── chart.js        │          │   Serves static files at              │            │   │
│   │   │                      │          │   http://localhost:8080/              │            │   │
│   │   └──────────────────────┘          └───────────────────────────────────────┘            │   │
│   │                                                                                          │   │
│   │   Your dashboard HTML/JS files connect to a WebSocket sink for live data.                │   │
│   │   The WebServer sink serves those files — everything runs from DIME.                     │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   BUILDING A LIVE DASHBOARD                                                                      │
│   ──────────────────────────                                                                     │
│                                                                                                  │
│   Connect your web app to a WebSocket Server sink for live charts and gauges.                    │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Browser JavaScript:                                                                    │   │
│   │                                                                                          │   │
│   │   ┌────────────────────────────────────────────────────────────────────────────────┐     │   │
│   │   │                                                                                │     │   │
│   │   │   const ws = new WebSocket("ws://localhost:8092");                             │     │   │
│   │   │                                                                                │     │   │
│   │   │   ws.onmessage = (event) => {                                                  │     │   │
│   │   │     const msg = JSON.parse(event.data);                                        │     │   │
│   │   │                                                                                │     │   │
│   │   │     // msg.path  = "plc1/temperature"                                          │     │   │
│   │   │     // msg.data  = 72.5                                                        │     │   │
│   │   │     // msg.timestamp = 1708300800000                                           │     │   │
│   │   │                                                                                │     │   │
│   │   │     updateGauge(msg.path, msg.data);                                           │     │   │
│   │   │     updateChart(msg.path, msg.data, msg.timestamp);                            │     │   │
│   │   │   };                                                                           │     │   │
│   │   │                                                                                │     │   │
│   │   └────────────────────────────────────────────────────────────────────────────────┘     │   │
│   │                                                                                          │   │
│   │   ┌─────────────────────────── Browser Dashboard ──────────────────────────────┐         │   │
│   │   │                                                                            │         │   │
│   │   │   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │         │   │
│   │   │   │ Temperature  │  │ Pressure     │  │ Cycle Time   │  │ Fault Count  │   │         │   │
│   │   │   │              │  │              │  │              │  │              │   │         │   │
│   │   │   │    72.5 F    │  │   34.2 psi   │  │    23 ms     │  │      0       │   │         │   │
│   │   │   │   ┌──────┐   │  │   ┌──────┐   │  │   ┌──────┐   │  │   ┌──────┐   │   │         │   │
│   │   │   │   │ ▓▓▓░ │   │  │   │ ▓▓░░ │   │  │   │ ▓░░░ │   │  │   │ ░░░░ │   │   │         │   │
│   │   │   │   └──────┘   │  │   └──────┘   │  │   └──────┘   │  │   └──────┘   │   │         │   │
│   │   │   └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │         │   │
│   │   │                                                                            │         │   │
│   │   │   ┌────────────────────────────────────────────────────────────────────┐   │         │   │
│   │   │   │  Live Trend  ╱╲    ╱╲                                              │   │         │   │
│   │   │   │            ╱╱  ╲╱╱  ╲╲     ╱╲                                      │   │         │   │
│   │   │   │          ╱╱          ╲╲  ╱╱  ╲╲                                    │   │         │   │
│   │   │   │        ╱╱              ╲╱      ╲───                                │   │         │   │
│   │   │   └────────────────────────────────────────────────────────────────────┘   │         │   │
│   │   │                                                                            │         │   │
│   │   └────────────────────────────────────────────────────────────────────────────┘         │   │
│   │                                                                                          │   │
│   │   Every message arrives as JSON with path, data, and timestamp.                          │   │
│   │   Route by path to update the correct gauge or chart.                                    │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SELF-CONTAINED DASHBOARD — HTTP + WEBSOCKET                                                    │
│   ────────────────────────────────────────────                                                   │
│                                                                                                  │
│   Combine WebServer (static files) + WebsocketServer (live data) for a complete                  │
│   dashboard with zero external dependencies. Everything runs inside DIME.                        │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   sinks:                                                                                 │   │
│   │     - name: web_ui                              - name: live_feed                        │   │
│   │       connector: WebServer                        connector: WebsocketServer             │   │
│   │       uri: http://localhost:8080/                  uri: ws://localhost:8092/             │   │
│   │       web_root: ./www                              include_filter:                       │   │
│   │                                                      - "plc1/.*"                         │   │
│   │                                                                                          │   │
│   │                        ┌─────────────────────────────────────────────┐                   │   │
│   │                        │            DIME Instance                    │                   │   │
│   │                        │                                             │                   │   │
│   │   ┌──────────┐  data   │  ┌────────────┐    ┌────────────────────┐   │                   │   │
│   │   │  Sources │────────▶│  │ Ring       │───▶│ WebsocketServer    │   │                   │   │
│   │   │  plc1    │         │  │ Buffer     │    │ :8092 (live data)  │   │                   │   │
│   │   │  mqtt    │         │  └────────────┘    └─────────┬──────────┘   │                   │   │
│   │   └──────────┘         │                              │  ws://       │                   │   │
│   │                        │  ┌────────────────────┐      │              │                   │   │
│   │                        │  │ WebServer          │      │              │                   │   │
│   │                        │  │ :8080 (static)     │      │              │                   │   │
│   │                        │  │ ./www/index.html   │      │              │                   │   │
│   │                        │  └─────────┬──────────┘      │              │                   │   │
│   │                        │            │  http://        │              │                   │   │
│   │                        └────────────┼─────────────────┼──────────────┘                   │   │
│   │                                     │                 │                                  │   │
│   │                                     ▼                 ▼                                  │   │
│   │                        ┌────────────────────────────────────────────┐                    │   │
│   │                        │              Browser                       │                    │   │
│   │                        │                                            │                    │   │
│   │                        │  http://localhost:8080  ── loads HTML/JS   │                    │   │
│   │                        │  ws://localhost:8092    ── receives data   │                    │   │
│   │                        │                                            │                    │   │
│   │                        │  Complete dashboard. No nginx. No node.    │                    │   │
│   │                        │  Just DIME + a folder of HTML files.       │                    │   │
│   │                        └────────────────────────────────────────────┘                    │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   Open http://localhost:8080 in a browser. The page loads from WebServer,                        │
│   connects to WebsocketServer, and you have a live dashboard — nothing else needed.              │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON18-health-faults.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        18 — Health & Faults                           │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Self-monitoring. Auto-recovery.                │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Built-in resilience.                           │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CONNECTOR STATE MACHINE                                                                        │
│   ───────────────────────                                                                        │
│                                                                                                  │
│   Every connector follows a deterministic state machine managed by ConnectorRunner.              │
│                                                                                                  │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────┐    │
│   │                                                                                         │    │
│   │                          ┌──────────────┐                                               │    │
│   │                          │              │                                               │    │
│   │                          │ Initialized  │                                               │    │
│   │                          │              │                                               │    │
│   │                          └──────┬───────┘                                               │    │
│   │                                 │                                                       │    │
│   │                                 ▼                                                       │    │
│   │                          ┌──────────────┐                                               │    │
│   │                          │              │                                               │    │
│   │                          │  Connected   │◄─────────────────────────┐                    │    │
│   │                          │              │                          │                    │    │
│   │                          └──────┬───────┘                          │                    │    │
│   │                                 │                                  │  auto-retry        │    │
│   │                                 ▼                                  │                    │    │
│   │                          ┌──────────────┐       ┌──────────────┐   │                    │    │
│   │                          │              │       │              │   │                    │    │
│   │                          │  Read/Write  │──────▶│   Faulted    │───┘                    │    │
│   │                          │   (loop)     │       │              │                        │    │
│   │                          │              │       │  FaultCount++│                        │    │
│   │                          └──────┬───────┘       └──────────────┘                        │    │
│   │                                 │                                                       │    │
│   │                                 ▼                                                       │    │
│   │                          ┌──────────────┐                                               │    │
│   │                          │              │                                               │    │
│   │                          │ Disconnected │                                               │    │
│   │                          │              │                                               │    │
│   │                          └──────────────┘                                               │    │
│   │                                                                                         │    │
│   │   Transitions:                                                                          │    │
│   │     Initialized ──▶ Connected     Config loaded, connection opened                      │    │
│   │     Connected   ──▶ Read/Write    Main loop begins                                      │    │
│   │     Read/Write  ──▶ Faulted       Exception during read/write                           │    │
│   │     Faulted     ──▶ Connected     Auto-retry: disconnect → reconnect                    │    │
│   │     Read/Write  ──▶ Disconnected  Graceful shutdown                                     │    │
│   │                                                                                         │    │
│   └─────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   $SYSTEM MESSAGES — AUTOMATIC HEALTH TELEMETRY                                                  │
│   ─────────────────────────────────────────────                                                  │
│                                                                                                  │
│   Every connector automatically publishes status under $SYSTEM. No config needed.                │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   RING BUFFER MESSAGES                       ADMIN API ONLY (ConnectorStatus)            │   │
│   │   ────────────────────                       ───────────────────────────────             │   │
│   │                                                                                          │   │
│   │   name/$SYSTEM/IsConnected    bool           ConnectCount        int                     │   │
│   │   name/$SYSTEM/IsFaulted      bool           DisconnectCount     int                     │   │
│   │   name/$SYSTEM/Fault          string         FaultCount          int                     │   │
│   │   name/$SYSTEM/IsAvailable    bool           FaultMessage        string                  │   │
│   │   name/$SYSTEM/ExecutionDuration long                                                    │   │
│   │                                                                                          │   │
│   │   IsConnected = true     ── device is reachable and responding                           │   │
│   │   IsFaulted = true       ── connector is currently in fault state                        │   │
│   │   Fault = "timeout"      ── last exception message (null when clear)                     │   │
│   │   IsAvailable = true     ── IsConnected AND NOT IsFaulted                                │   │
│   │   ExecutionDuration      ── total loop execution time in ms                              │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   These flow through the ring buffer like any data message. Sinks can filter on them.            │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   PERFORMANCE METRICS PER CONNECTOR (Admin API)                                                  │
│   ─────────────────────────────────────────────                                                  │
│                                                                                                  │
│   Every connector tracks timing data via the Admin API (GET /status). Not ring buffer msgs.      │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   TIMING METRICS (Admin API)                 THROUGHPUT METRICS (Admin API)              │   │
│   │   ──────────────────────────                 ────────────────────────────────            │   │
│   │                                                                                          │   │
│   │   MinimumReadMs              ms              MessagesAttempted              int          │   │
│   │   MaximumReadMs              ms              MessagesAccepted               int          │   │
│   │   LastReadMs                 ms                                                          │   │
│   │   MinimumScriptMs / MaximumScriptMs          Attempted = total reads from device         │   │
│   │   MinimumLoopMs / MaximumLoopMs              Accepted  = values that passed RBE          │   │
│   │                                                                                          │   │
│   │   ┌──────────── One Loop Cycle ────────────────────────────────────────┐                 │   │
│   │   │                                                                    │                 │   │
│   │   │  ┌───────────┐  ┌────────────┐  ┌──────────┐  ┌───────────────┐    │                 │   │
│   │   │  │ ReadTime  │  │ ScriptTime │  │  RBE     │  │ Publish to    │    │                 │   │
│   │   │  │ (device)  │  │ (Lua/Py)   │  │  Filter  │  │ Ring Buffer   │    │                 │   │
│   │   │  └───────────┘  └────────────┘  └──────────┘  └───────────────┘    │                 │   │
│   │   │                                                                    │                 │   │
│   │   │  ◄────────────── TotalLoopTime ──────────────────────────────────▶ │                 │   │
│   │   └────────────────────────────────────────────────────────────────────┘                 │   │
│   │                                                                                          │   │
│   │   MinReadTime / MaxReadTime track the fastest and slowest device reads.                  │   │
│   │   A growing MaxReadTime signals device latency or network issues.                        │   │
│   │                                                                                          │   │
│   │   MessagesAttempted vs MessagesAccepted reveals RBE effectiveness:                       │   │
│   │     Attempted=1000, Accepted=50 → 95% of values unchanged → RBE working well             │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   AUTO-RECOVERY — BUILT-IN FAULT TOLERANCE                                                       │
│   ────────────────────────────────────────                                                       │
│                                                                                                  │
│   ConnectorRunner handles faults automatically. No watchdog scripts needed.                      │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │    ┌──────────┐     exception      ┌───────────┐     disconnect     ┌──────────────┐     │   │
│   │    │          │ ──────────────────▶│           │ ──────────────────▶│              │     │   │
│   │    │ Reading  │                    │  Faulted  │                    │ Disconnected │     │   │
│   │    │          │ ◄──────────────────│           │ ◄──────────────────│              │     │   │
│   │    └──────────┘     reconnect      └───────────┘     reconnect      └──────────────┘     │   │
│   │                                                                                          │   │
│   │    What happens on fault:                                                                │   │
│   │                                                                                          │   │
│   │      1. Exception caught by ConnectorRunner                                              │   │
│   │      2. IsFaulted = true, Fault = exception message                                      │   │
│   │      3. FaultCount incremented                                                           │   │
│   │      4. Disconnect from device                                                           │   │
│   │      5. Wait (brief pause)                                                               │   │
│   │      6. Reconnect and resume Read/Write loop                                             │   │
│   │      7. ConnectCount incremented                                                         │   │
│   │      8. IsFaulted = false on successful reconnect                                        │   │
│   │                                                                                          │   │
│   │    This cycle repeats indefinitely. DIME never gives up on a connector.                  │   │
│   │    All fault transitions are published as $SYSTEM messages in real time.                 │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MONITORING & ALERTING — ROUTE $SYSTEM TO ANALYTICS                                             │
│   ──────────────────────────────────────────────────                                             │
│                                                                                                  │
│   $SYSTEM messages are normal ring buffer messages. Route them to any sink for alerting.         │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │    Connectors              Ring Buffer                   Analytics Sinks                 │   │
│   │    ──────────              ───────────                   ───────────────                 │   │
│   │                                                                                          │   │
│   │    ┌──────────┐         ┌──────────────┐         ┌───────────────────────┐               │   │
│   │    │ plc1     │────┐    │              │    ┌───▶│ Splunk                │               │   │
│   │    │ $SYSTEM  │    │    │  ┌────────┐  │    │    │                       │               │   │
│   │    └──────────┘    ├───▶│  │ $SYS   │  │────┤    │ include_filter:       │               │   │
│   │                    │    │  │ msgs   │  │    │    │   - ".*\\$SYSTEM.*"   │               │   │
│   │    ┌──────────┐    │    │  └────────┘  │    │    │                       │               │   │
│   │    │ mqtt1    │────┘    │              │    │    │ Dashboard: fault rate │               │   │
│   │    │ $SYSTEM  │         └──────────────┘    │    │ alerts, uptime graphs │               │   │
│   │    └──────────┘                             │    └───────────────────────┘               │   │
│   │                                             │                                            │   │
│   │                                             │    ┌───────────────────────┐               │   │
│   │                                             └───▶│ InfluxDB              │               │   │
│   │                                                  │                       │               │   │
│   │                                                  │ include_filter:       │               │   │
│   │                                                  │   - ".*\\$SYSTEM.*"   │               │   │
│   │                                                  │                       │               │   │
│   │                                                  │ Grafana: read times,  │               │   │
│   │                                                  │ loop times, fault cnt │               │   │
│   │                                                  └───────────────────────┘               │   │
│   │                                                                                          │   │
│   │    Use include_filter to capture ONLY $SYSTEM messages for health monitoring.            │   │
│   │    Use exclude_filter on data sinks to DROP $SYSTEM messages from production data.       │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   Every DIME instance is self-monitoring. No external agents. No sidecars. Just YAML.            │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON19-connector-ux.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        19 — Connector UX                              │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Desktop app for managing                       │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          local DIME instances.                          │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHAT IS CONNECTOR UX?                                                                          │
│   ─────────────────────                                                                          │
│                                                                                                  │
│   A cross-platform desktop application for monitoring and managing DIME instances.               │
│   Built with Tauri v2 + React. Runs on Windows, macOS, Linux, Android, and iOS.                  │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────┐               │   │
│   │   │          │   │          │   │          │   │          │   │          │               │   │
│   │   │ Windows  │   │  macOS   │   │  Linux   │   │ Android  │   │   iOS    │               │   │
│   │   │          │   │          │   │          │   │          │   │          │               │   │
│   │   └─────┬────┘   └─────┬────┘   └────┬─────┘   └────┬─────┘   └────┬─────┘               │   │
│   │         │              │             │              │              │                     │   │
│   │         └──────────────┴──────┬──────┴──────────────┴──────────────┘                     │   │
│   │                               │                                                          │   │
│   │                        ┌──────▼──────┐                                                   │   │
│   │                        │  Tauri v2   │                                                   │   │
│   │                        │  + React    │                                                   │   │
│   │                        │  frontend   │                                                   │   │
│   │                        └─────────────┘                                                   │   │
│   │                                                                                          │   │
│   │   One codebase, five platforms. Native performance. No Electron bloat.                   │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MULTI-INSTANCE MANAGEMENT                                                                      │
│   ─────────────────────────                                                                      │
│                                                                                                  │
│   Connect to several DIME instances simultaneously from a single app window.                     │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │                           ┌────────────────────────────────────┐                         │   │
│   │                           │        Connector UX App            │                         │   │
│   │                           │                                    │                         │   │
│   │                           │  ┌───────┐ ┌───────┐ ┌───────┐     │                         │   │
│   │                           │  │ Inst1 │ │ Inst2 │ │ Inst3 │     │                         │   │
│   │                           │  │  ●    │ │  ●    │ │  ◌    │     │                         │   │
│   │                           │  └───┬───┘ └───┬───┘ └───┬───┘     │                         │   │
│   │                           │      │         │         │         │                         │   │
│   │                           └──────┼─────────┼─────────┼─────────┘                         │   │
│   │                                  │         │         │                                   │   │
│   │                    ┌─────────────┼─────────┼─────────┼─────────────┐                     │   │
│   │                    │             │         │         │             │                     │   │
│   │                    │             ▼         ▼         ▼             │                     │   │
│   │                    │                                               │                     │   │
│   │                    │              Admin API (REST + WS)            │                     │   │
│   │                    │              http://host:9999                 │                     │   │
│   │                    │              ws://host:9998                   │                     │   │
│   │                    │                                               │                     │   │
│   │                    └───────────────────────────────────────────────┘                     │   │
│   │                                                                                          │   │
│   │    ● = connected     ◌ = disconnected                                                    │   │
│   │                                                                                          │   │
│   │    Each instance is reached via its Admin API.                                           │   │
│   │    Add instances by pointing at http://host:9999                                         │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FEATURE CATALOG                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   ┌────────────────────────────┐  ┌────────────────────────────┐  ┌────────────────────────┐     │
│   │                            │  │                            │  │                        │     │
│   │  LIVE DASHBOARD            │  │  CONFIGURATION EDITOR      │  │  SCHEMA BROWSER        │     │
│   │                            │  │                            │  │                        │     │
│   │  Real-time status cards    │  │  Monaco YAML editor with   │  │  Interactive config    │     │
│   │  for every connector.      │  │  syntax highlighting and   │  │  schema navigator.     │     │
│   │                            │  │  inline validation.        │  │                        │     │
│   │  ┌──────┐ ┌──────┐         │  │                            │  │ Browse every field,    │     │
│   │  │ plc1 │ │ mqtt │         │  │ Validates against the      │  │ see types, defaults,   │     │
│   │  │  ●   │ │  ●   │         │  │ DIME config JSON schema.   │  │ and descriptions.      │     │
│   │  │ 12ms │ │  4ms │         │  │                            │  │                        │     │
│   │  └──────┘ └──────┘         │  │ Push changes to running    │  │ Auto-complete from     │     │
│   │                            │  │  DIME instances.           │  │  schema definitions.   │     │
│   │  Health indicators,        │  │                            │  │                        │     │
│   │  throughput gauges,        │  └────────────────────────────┘  └────────────────────────┘     │
│   │  fault counts.             │                                                                 │
│   │                            │                                                                 │
│   └────────────────────────────┘                                                                 │
│                                                                                                  │
│   ┌────────────────────────────┐  ┌────────────────────────────┐  ┌────────────────────────┐     │
│   │                            │  │                            │  │                        │     │
│   │  LIVE DATA STREAM          │  │  EVENT LOG                 │  │  ADAPTER CONTROL       │     │
│   │                            │  │                            │  │                        │     │
│   │  Watch messages flowing    │  │  Filterable, searchable,   │  │  Start and stop        │     │
│   │  through the ring buffer   │  │  exportable event log.     │  │  connectors from the   │     │
│   │  in real time.             │  │                            │  │  UI.                   │     │
│   │                            │  │  Filter by connector,      │  │                        │     │
│   │  Path    Value    Time     │  │  severity, time range.     │  │  ┌─────┐  ┌──────┐     │     │
│   │  ────    ─────    ────     │  │                            │  │  │ ▶   │  │  ■   │     │     │
│   │  plc1/   23.5   12:00:01   │  │  Export to CSV or JSON     │  │  │Start│  │ Stop │     │     │
│   │  mqtt/   98.2   12:00:01   │  │  for offline analysis.     │  │  └─────┘  └──────┘     │     │
│   │  opcua/  1420   12:00:02   │  │                            │  │                        │     │
│   │                            │  │                            │  │  Per-connector enable  │     │
│   │  Subscribe to paths via    │  │                            │  │  and disable without   │     │
│   │  WebSocket real-time feed. │  │                            │  │  editing YAML.         │     │
│   │                            │  │                            │  │                        │     │
│   └────────────────────────────┘  └────────────────────────────┘  └────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CONNECTION SETUP                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│   Point the app at a DIME instance's Admin API to connect.                                       │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌─────────────────────────────────────────────────────┐                                │   │
│   │   │  Add DIME Instance                                  │                                │   │
│   │   │                                                     │                                │   │
│   │   │  Name:    [ Production Floor  ]                     │                                │   │
│   │   │  Address: [ http://10.0.0.50:9999 ]                 │                                │   │
│   │   │                                                     │                                │   │
│   │   │  [ Test Connection ]   [ Save ]                     │                                │   │
│   │   │                                                     │                                │   │
│   │   └─────────────────────────────────────────────────────┘                                │   │
│   │                                                                                          │   │
│   │   REST API (port 9999) provides:                                                         │   │
│   │     • GET /status         — connector states, health, metrics                            │   │
│   │     • GET /config/yaml    — running YAML configuration                                   │   │
│   │     • GET /config/json    — running JSON configuration                                   │   │
│   │     • POST /connector/add/sink/{name} — add sinks at runtime                             │   │
│   │                                                                                          │   │
│   │   WebSocket (port 9998) provides:                                                        │   │
│   │     • Real-time state change events                                                      │   │
│   │     • Live performance telemetry                                                         │   │
│   │     • Ring buffer message stream                                                         │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   Connector UX is a client only — it never modifies your DIME instance without your command.     │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON20-report-by-exception.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        20 — Report By Exception                       │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Only send what changed.                        │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Reduce data volume by 90%+.                    │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE PROBLEM                                                                                    │
│   ───────────                                                                                    │
│                                                                                                  │
│   A PLC reports temperature every second. The value only changes once a minute.                  │
│   59 out of 60 readings are duplicates. Your database stores all of them.                        │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   PLC reads temp every 1 second.  Value = 72.5 for 59 seconds, then 72.6.              │     │
│   │                                                                                        │     │
│   │   WITHOUT RBE  (60 messages per minute):                                               │     │
│   │                                                                                        │     │
│   │   t=0   t=1   t=2   t=3   t=4   ...  t=58  t=59                                        │     │
│   │    ●     ●     ●     ●     ●    ····   ●     ◆                                         │     │
│   │   72.5  72.5  72.5  72.5  72.5        72.5  72.6                                       │     │
│   │   ───────────────────────────────────────────────▶ time                                │     │
│   │   ALL sent. 59 duplicates. 1 real change.                                              │     │
│   │                                                                                        │     │
│   │   WITH RBE  (2 messages per minute):                                                   │     │
│   │                                                                                        │     │
│   │   t=0                                       t=59                                       │     │
│   │    ●                                          ◆                                        │     │
│   │   72.5                                       72.6                                      │     │
│   │   ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─▶ time                                    │     │
│   │   Only changes sent. 58 duplicates eliminated.                                         │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   MESSAGE VOLUME COMPARISON                                                                      │
│   ─────────────────────────                                                                      │
│                                                                                                  │
│   Messages per minute for a temperature sensor reading every 1 second:                           │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   WITHOUT RBE  ████████████████████████████████████████████████████████████  60 msg/min│     │
│   │                                                                                        │     │
│   │   WITH RBE     ██                                                            2 msg/min │     │
│   │                                                                                        │     │
│   │   10 sensors, 1-second scan, 1 hour:                                                   │     │
│   │                                                                                        │     │
│   │   WITHOUT RBE  ████████████████████████████████████████████████  36,000 messages       │     │
│   │                                                                                        │     │
│   │   WITH RBE     █                                                   ~600 messages       │     │
│   │                                                                                        │     │
│   │   Reduction: 98.3%                                                                     │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   HOW RBE WORKS                                                                                  │
│   ─────────────                                                                                  │
│                                                                                                  │
│   Each source connector caches the last published value per item.                                │
│   Before publishing, compare new value to cached value. Same? Skip it.                           │
│                                                                                                  │
│       ┌─────────────┐     Read       ┌──────────────────┐     Compare     ┌──────────────┐       │
│       │   Device    │───────────────▶│   New value:     │───────────────▶ │  Same as     │       │
│       │   (PLC)     │                │   72.5           │                 │  last sent?  │       │
│       └─────────────┘                └──────────────────┘                 └──────┬───────┘       │
│                                                                                  │               │
│                                                                     ┌────────────┴──────────┐    │
│                                                                     │                       │    │
│                                                                    YES                     NO    │
│                                                                     │                       │    │
│                                                                     ▼                       ▼    │
│                                                              ┌────────────┐         ┌─────────┐  │
│                                                              │  SKIP      │         │ PUBLISH │  │
│                                                              │  (silent)  │         │ to ring │  │
│                                                              │            │         │ buffer  │  │
│                                                              │  Cache     │         │         │  │
│                                                              │  stays     │         │ Update  │  │
│                                                              │  same      │         │ cache   │  │
│                                                              └────────────┘         └─────────┘  │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CONNECTOR-LEVEL RBE                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   Enable RBE for ALL items on a source with one flag:                                            │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sources:                                                                             │     │
│   │     - name: plc1                                                                       │     │
│   │       connector: OpcUa                                                                 │     │
│   │       rbe: !!bool true            ◀── All items on this source use RBE                 │     │
│   │       scan_interval: !!int 1000                                                        │     │
│   │       items:                                                                           │     │
│   │         - name: temperature       ── RBE active (inherited)                            │     │
│   │         - name: pressure          ── RBE active (inherited)                            │     │
│   │         - name: flow_rate         ── RBE active (inherited)                            │     │
│   │         - name: vibration         ── RBE active (inherited)                            │     │
│   │                                                                                        │     │
│   │   One flag, all items covered. The most common pattern.                                │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ITEM-LEVEL RBE                                                                                 │
│   ──────────────                                                                                 │
│                                                                                                  │
│   Override RBE per item when some data needs every reading:                                      │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sources:                                                                             │     │
│   │     - name: plc1                                                                       │     │
│   │       connector: OpcUa                                                                 │     │
│   │       rbe: !!bool true            ◀── Default for this source                          │     │
│   │       items:                                                                           │     │
│   │         - name: temperature                                                            │     │
│   │           rbe: !!bool true        ── Changes only (uses source default)                │     │
│   │         - name: pressure                                                               │     │
│   │           rbe: !!bool true        ── Changes only                                      │     │
│   │         - name: alarm_count                                                            │     │
│   │           rbe: !!bool false       ── Every reading! Overrides source default           │     │
│   │         - name: heartbeat                                                              │     │
│   │           rbe: !!bool false       ── Always send (used for liveliness)                 │     │
│   │                                                                                        │     │
│   │   Item-level rbe overrides the source-level setting.                                   │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FORCE EMIT — BYPASSING RBE                                                                     │
│   ──────────────────────────                                                                     │
│                                                                                                  │
│   In a Lua script, pass true as the third argument to emit() to force publish:                   │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   emit( path, value )          ── Normal: RBE applies, skips if unchanged              │     │
│   │   emit( path, value, true )    ── Force:  Always publishes, RBE bypassed               │     │
│   │                                                                                        │     │
│   │   script: |                                                                            │     │
│   │     -- Normal emit: RBE will suppress duplicates                                       │     │
│   │     emit('sensor/temperature', result)                                                 │     │
│   │                                                                                        │     │
│   │     -- Force emit: always publish, even if same value                                  │     │
│   │     emit('critical/alarm', result, true)                                               │     │
│   │                                                                                        │     │
│   │     -- Use case: heartbeats, watchdogs, "I am alive" signals                           │     │
│   │     emit('system/heartbeat', os.time(), true)                                          │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   every — COMPLEMENTARY THROTTLE                                                                 │
│   ──────────────────────────────────────                                                         │
│                                                                                                  │
│   RBE suppresses unchanged values. every skips entire scan cycles for slow items.                │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   scan_interval: 1000ms, every: 10                                                     │     │
│   │                                                                                        │     │
│   │   Cycle:  1    2    3    4    5    6    7    8    9    10   11   12  ...               │     │
│   │           ─    ─    ─    ─    ─    ─    ─    ─    ─    ●    ─    ─                     │     │
│   │          skip skip skip skip skip skip skip skip skip READ skip skip                   │     │
│   │                                                                                        │     │
│   │   Item is only read every 10th cycle = effectively every 10 seconds.                   │     │
│   │   Other items on the same source still read every cycle.                               │     │
│   │                                                                                        │     │
│   │   items:                                                                               │     │
│   │     - name: fast_sensor                                                                │     │
│   │       every: !!int 1      ── Every cycle (default)                                     │     │
│   │     - name: slow_sensor                                                                │     │
│   │       every: !!int 10     ── Every 10th cycle                                          │     │
│   │     - name: glacial_sensor                                                             │     │
│   │       every: !!int 60             ── Every 60th cycle (once per minute at 1s scan)     │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHEN NOT TO USE RBE                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   RBE is perfect for most sensor data. But some data streams need every reading:                 │
│                                                                                                  │
│   ┌──────────────────────────┐  ┌──────────────────────────┐  ┌──────────────────────────┐       │
│   │                          │  │                          │  │                          │       │
│   │   EVENT STREAMS          │  │   PRODUCTION COUNTS      │  │   ALARMS                 │       │
│   │                          │  │                          │  │                          │       │
│   │   Machine start/stop     │  │   Part counter may       │  │   Same alarm can fire    │       │
│   │   events that happen     │  │   increment by 1 each    │  │   repeatedly. Each       │       │
│   │   to have same value     │  │   time. Value "1" is     │  │   occurrence matters.    │       │
│   │   (e.g., "STOP" twice)   │  │   not a duplicate —      │  │   Do not suppress.       │       │
│   │   are NOT duplicates.    │  │   it's a new count.      │  │                          │       │
│   │                          │  │                          │  │   rbe: !!bool false      │       │
│   │   rbe: !!bool false      │  │   rbe: !!bool false      │  │                          │       │
│   │                          │  │                          │  │                          │       │
│   └──────────────────────────┘  └──────────────────────────┘  └──────────────────────────┘       │
│                                                                                                  │
│   Rule of thumb: if the same value twice means two different things, disable RBE.                │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   QUICK REFERENCE                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────┐       │
│   │                                                                                      │       │
│   │   Feature            Config                          Level                           │       │
│   │   ─────────────────  ──────────────────────────────  ──────────                      │       │
│   │   RBE on/off         rbe: !!bool true/false          Source or Item                  │       │
│   │   Force publish      emit(path, val, true)           Script only                     │       │
│   │   Cycle throttle     every: !!int N                   Item only                      │       │
│   │   Scan interval      scan_interval: !!int ms         Source only                     │       │
│   │                                                                                      │       │
│   │   Combine RBE + every for maximum reduction:                                         │       │
│   │   Read every 10th cycle, then suppress if unchanged = minimal traffic.               │       │
│   │                                                                                      │       │
│   └──────────────────────────────────────────────────────────────────────────────────────┘       │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON21-multi-file-configs.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        21 — Multi-File Configs                        │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Organize complex setups.                       │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Anchors, references, and overrides.            │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SINGLE FILE vs MULTI-FILE                                                                      │
│   ─────────────────────────                                                                      │
│                                                                                                  │
│   Simple setups: everything in main.yaml. Complex setups: split across multiple files.           │
│                                                                                                  │
│   ┌──────────────────────────────────────┐    ┌──────────────────────────────────────┐           │
│   │                                      │    │                                      │           │
│   │   SINGLE FILE                        │    │   MULTI-FILE                         │           │
│   │                                      │    │                                      │           │
│   │   Configs/                           │    │   Configs/                           │           │
│   │   └── main.yaml                      │    │  ├── mqtt-settings.yaml              │           │
│   │       ├── app:                       │    │  ├── plc-sources.yaml                │           │
│   │       ├── sources:                   │    │  ├── database-sinks.yaml             │           │
│   │       │   ├── plc1                   │    │  ├── dashboard-sinks.yaml            │           │
│   │       │   ├── plc2                   │    │  └── main.yaml                       │           │
│   │       │   └── mqtt                   │    │      └── app:                        │           │
│   │       └── sinks:                     │    │          └── (overrides only)        │           │
│   │           ├── influx                 │    │                                      │           │
│   │           └── splunk                 │    │  Each file contains part of the      │           │
│   │                                      │    │   configuration. All are merged.     │           │
│   │   Everything in one place.           │    │                                      │           │
│   │   Good for < 5 connectors.           │    │   Good for 5+ connectors.            │           │
│   │                                      │    │                                      │           │
│   └──────────────────────────────────────┘    └──────────────────────────────────────┘           │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   LOADING ORDER — HOW FILES MERGE                                                                │
│   ───────────────────────────────                                                                │
│                                                                                                  │
│   DIME loads all *.yaml files from the Configs directory. main.yaml is loaded LAST.              │
│                                                                                                  │
│   ┌───────────────────────────────────────────────────────────────────────────────────────┐      │
│   │                                                                                       │      │
│   │   Configs/                                                                            │      │
│   │   ├── 01-mqtt.yaml          ─┐                                                        │      │
│   │   ├── 02-opcua.yaml          │── loaded alphabetically                                │      │
│   │   ├── 03-influx.yaml         │   and merged together                                  │      │
│   │   ├── 04-splunk.yaml        ─┘                                                        │      │
│   │   └── main.yaml             ◀── loaded LAST, wins on conflicts                        │      │
│   │                                                                                       │      │
│   │                                                                                       │      │
│   │   ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐         ┌──────────┐         │      │
│   │   │01-mqtt   │  │02-opcua  │  │03-influx │  │04-splunk │         │ main     │         │      │
│   │   │.yaml     │  │.yaml     │  │.yaml     │  │.yaml     │         │ .yaml    │         │      │
│   │   └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘         └─────┬────┘         │      │
│   │        │             │             │             │                     │              │      │
│   │        └─────────────┴─────────────┴─────────────┘                     │              │      │
│   │                       │                                                │              │      │
│   │                       ▼                                                │              │      │
│   │              ┌─────────────────┐                                       │              │      │
│   │              │  Merged config  │◀──────────────────────────────────────┘              │      │
│   │              │  (all files)    │   main.yaml overrides on conflict                    │      │
│   │              └────────┬────────┘                                                      │      │
│   │                       │                                                               │      │
│   │                       ▼                                                               │      │
│   │              ┌─────────────────┐                                                      │      │
│   │              │  Running DIME   │                                                      │      │
│   │              │  instance       │                                                      │      │
│   │              └─────────────────┘                                                      │      │
│   │                                                                                       │      │
│   │   Arrays (sources, sinks) are concatenated. Scalar values: last loaded wins.          │      │
│   │                                                                                       │      │
│   └───────────────────────────────────────────────────────────────────────────────────────┘      │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   YAML ANCHORS & REFERENCES                                                                      │
│   ─────────────────────────                                                                      │
│                                                                                                  │
│   Define once, reuse everywhere. Anchors (&) create named values. References (*) reuse them.     │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   ┌─ DEFINE ──────────────────────────────────────────────────────────────────────┐    │     │
│   │   │                                                                               │    │     │
│   │   │   mqtt_settings: &mqtt_common      ◀── Anchor: names this block "mqtt_common" │    │     │
│   │   │     address: mqtt.factory.local                                               │    │     │
│   │   │     port: !!int 1883                                                          │    │     │
│   │   │     username: dime                                                            │    │     │
│   │   │     password: secret                                                          │    │     │
│   │   │                                                                               │    │     │
│   │   └───────────────────────────────────────────────────────────────────────────────┘    │     │
│   │                                                                                        │     │
│   │   ┌─ REUSE ───────────────────────────────────────────────────────────────────────┐    │     │
│   │   │                                                                               │    │     │
│   │   │   sources:                                                                    │    │     │
│   │   │     - name: line1_mqtt                                                        │    │     │
│   │   │       connector: MQTT                                                         │    │     │
│   │   │       <<: *mqtt_common               ◀── Merge: injects all mqtt_common keys  │    │     │
│   │   │       base_topic: line1/sensors      ◀── Override or add unique keys          │    │     │
│   │   │                                                                               │    │     │
│   │   │     - name: line2_mqtt                                                        │    │     │
│   │   │       connector: MQTT                                                         │    │     │
│   │   │       <<: *mqtt_common               ◀── Same settings, different topic       │    │     │
│   │   │       base_topic: line2/sensors                                               │    │     │
│   │   │                                                                               │    │     │
│   │   │     - name: line3_mqtt                                                        │    │     │
│   │   │       connector: MQTT                                                         │    │     │
│   │   │       <<: *mqtt_common               ◀── 10 connectors, 1 definition          │    │     │
│   │   │       base_topic: line3/sensors                                               │    │     │
│   │   │                                                                               │    │     │
│   │   └───────────────────────────────────────────────────────────────────────────────┘    │     │
│   │                                                                                        │     │
│   │   Change the MQTT broker address once in &mqtt_common, all connectors update.          │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FILE ORGANIZATION PATTERNS                                                                     │
│   ──────────────────────────                                                                     │
│                                                                                                  │
│   Three common approaches. Pick what matches your plant layout:                                  │
│                                                                                                  │
│   ┌──────────────────────────────┐  ┌──────────────────────────────┐  ┌───────────────────────┐  │
│   │                              │  │                              │  │                       │  │
│   │   BY PROTOCOL                │  │   BY MACHINE                 │  │   BY ROLE             │  │
│   │                              │  │                              │  │                       │  │
│   │   Configs/                   │  │   Configs/                   │  │   Configs/            │  │
│   │   ├── mqtt.yaml              │  │   ├── lathe-01.yaml          │  │   ├── sources.yaml    │  │
│   │   ├── opcua.yaml             │  │   ├── mill-02.yaml           │  │   ├── sinks.yaml      │  │
│   │   ├── s7.yaml                │  │   ├── press-03.yaml          │  │   ├── anchors.yaml    │  │
│   │   ├── influx.yaml            │  │   ├── robot-04.yaml          │  │   └── main.yaml       │  │
│   │   └── main.yaml              │  │   └── main.yaml              │  │                       │  │
│   │                              │  │                              │  │   Sources in one,     │  │
│   │   Good when protocols        │  │   Good when machines are     │  │   sinks in another.   │  │
│   │   have shared settings.      │  │   independently managed.     │  │   Clean separation.   │  │
│   │                              │  │                              │  │                       │  │
│   └──────────────────────────────┘  └──────────────────────────────┘  └───────────────────────┘  │
│                                                                                                  │
│   All three patterns work the same way — DIME loads and merges all *.yaml files.                 │
│   Choose what makes your team's workflow easiest.                                                │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE enabled FLAG — DISABLE WITHOUT DELETING                                                    │
│   ────────────────────────────────────────────                                                   │
│                                                                                                  │
│   Set enabled: !!bool false to skip a connector without removing its config.                     │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sources:                                                                             │     │
│   │     - name: active_plc                                                                 │     │
│   │       connector: OpcUa                                                                 │     │
│   │       enabled: !!bool true        ── Running (default if omitted)                      │     │
│   │       address: 192.168.1.10                                                            │     │
│   │                                                                                        │     │
│   │     - name: old_plc                                                                    │     │
│   │       connector: S7                                                                    │     │
│   │       enabled: !!bool false       ── Disabled, config preserved ◀── DIME ignores this  │     │
│   │       address: 192.168.1.20                                                            │     │
│   │                                                                                        │     │
│   │     - name: test_mqtt                                                                  │     │
│   │       connector: MQTT                                                                  │     │
│   │       enabled: !!bool false       ── Disabled during production                        │     │
│   │       address: mqtt.test.local                                                         │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│   ┌─────────────────────────────────────────────────────────────────────────────────────┐        │
│   │                                                                                     │        │
│   │   LOADED AT STARTUP                                                                 │        │
│   │                                                                                     │        │
│   │   ┌────────────┐  ┌────────────┐  ┌────────────┐                                    │        │
│   │   │ active_plc │  │ old_plc    │  │ test_mqtt  │                                    │        │
│   │   │            │  │            │  │            │                                    │        │
│   │   │  RUNNING   │  │  SKIPPED   │  │  SKIPPED   │                                    │        │
│   │   │  ✓         │  │  ✗ (false) │  │  ✗ (false) │                                    │        │
│   │   └────────────┘  └────────────┘  └────────────┘                                    │        │
│   │                                                                                     │        │
│   │   Disabled connectors use zero resources. Re-enable anytime by setting true.        │        │
│   │                                                                                     │        │
│   └─────────────────────────────────────────────────────────────────────────────────────┘        │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   VISUAL: MULTIPLE FILES → ONE RUNNING CONFIG                                                    │
│   ───────────────────────────────────────────                                                    │
│                                                                                                  │
│      ┌─────────────┐                                                                             │
│      │ mqtt.yaml   │──┐                                                                          │
│      │ sources: 2  │  │                                                                          │
│      └─────────────┘  │                                                                          │
│      ┌─────────────┐  │     ┌────────────────────────────────┐     ┌───────────────────────┐     │
│      │ opcua.yaml  │──┼────▶│         YAML MERGER            │────▶│   RUNNING CONFIG      │     │
│      │ sources: 3  │  │     │                                │     │                       │     │
│      └─────────────┘  │     │  Concatenate sources arrays    │     │  sources: 7           │     │
│      ┌─────────────┐  │     │  Concatenate sinks arrays      │     │  sinks: 4             │     │
│      │ sinks.yaml  │──┤     │  Last-wins for scalar keys     │     │  anchors: resolved    │     │
│      │ sinks: 4    │  │     │  Resolve all anchors           │     │                       │     │
│      └─────────────┘  │     └────────────────────────────────┘     └───────────┬───────────┘     │
│      ┌─────────────┐  │                     ▲                                  │                 │
│      │ main.yaml   │──┘                     │                                  ▼                 │
│      │ app: + wins │          main.yaml loaded last                   ┌────────────────┐         │
│      └─────────────┘          overrides on conflict                   │  DimeService   │         │
│                                                                       │  starts all    │         │
│                                                                       │  connectors    │         │
│                                                                       └────────────────┘         │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   QUICK REFERENCE                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────┐       │
│   │                                                                                      │       │
│   │   Feature            Syntax                          Effect                          │       │
│   │   ─────────────────  ──────────────────────────────  ──────────────────────────────  │       │
│   │   Anchor             &name                           Defines a reusable block        │       │
│   │   Reference          *name                           Inserts the anchored value      │       │
│   │   Merge key          <<: *name                       Merges keys into a mapping      │       │
│   │   Multi-file         *.yaml in Configs/              All loaded and merged           │       │
│   │   Override           main.yaml                       Loaded last, wins on conflict   │       │
│   │   Disable            enabled: !!bool false           Skips connector, keeps config   │       │
│   │                                                                                      │       │
│   └──────────────────────────────────────────────────────────────────────────────────────┘       │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON22-instance-chaining.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        22 — Instance Chaining                         │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Scale from one machine                         │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          to an entire enterprise.                       │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SINGLE INSTANCE — THE BUILDING BLOCK                                                           │
│   ────────────────────────────────────                                                           │
│                                                                                                  │
│   One DIME instance is a complete data pipeline: sources merge into one ring buffer,             │
│   and sinks fork out to any number of destinations.                                              │
│                                                                                                  │
│   ┌──────────────┐                                 ┌──────────────┐                              │
│   │  Source A    │ ──┐                          ┌──│  Sink X      │                              │
│   └──────────────┘   │   ┌────────────────┐     │  └──────────────┘                              │
│                      ├──▶│                │─────┤                                                │
│   ┌──────────────┐   │   │  Ring Buffer   │     │  ┌──────────────┐                              │
│   │  Source B    │───┤   │  (merge)       │─────├──│  Sink Y      │                              │
│   └──────────────┘   │   │                │     │  └──────────────┘                              │
│                      │   └────────────────┘     │                                                │
│   ┌──────────────┐   │         (fork)           │  ┌──────────────┐                              │
│   │  Source C    │───┘                          └──│  Sink Z      │                              │
│   └──────────────┘                                 └──────────────┘                              │
│                                                                                                  │
│   Many-to-one on the left (merge).  One-to-many on the right (fork).                             │
│   Everything flows through one lock-free ring buffer at sub-ms latency.                          │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   INSTANCE CHAINING — THE SCALING PATTERN                                                        │
│   ───────────────────────────────────────                                                        │
│                                                                                                  │
│   Connect two DIME instances by making one's sink speak the same protocol as the                 │
│   other's source.  The network becomes the wire between ring buffers.                            │
│                                                                                                  │
│   ┌──────────────────────────────┐         ┌──────────────────────────────┐                      │
│   │          DIME-A              │         │          DIME-B              │                      │
│   │                              │         │                              │                      │
│   │  [Sources] ──▶ Ring ──▶ SINK │───────▶ │ SOURCE ──▶ Ring ──▶ [Sinks]  │                      │
│   │                      (MQTT)  │  MQTT   │ (MQTT)                       │                      │
│   │                              │ publish │                              │                      │
│   └──────────────────────────────┘         └──────────────────────────────┘                      │
│                                                                                                  │
│   DIME-A publishes via an MQTT sink.  DIME-B subscribes via an MQTT source.                      │
│   Any shared protocol works.  Each instance has its own config, its own process.                 │
│                                                                                                  │
│   CHAINING PROTOCOLS                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   ┌────────────────┬──────────────────────────────────────────────────────────────────────┐      │
│   │ Protocol       │ Use Case                                                             │      │
│   ├────────────────┼──────────────────────────────────────────────────────────────────────┤      │
│   │ MQTT           │ Lightweight, reliable, broker-based. Most common for chaining.       │      │
│   ├────────────────┼──────────────────────────────────────────────────────────────────────┤      │
│   │ SparkplugB     │ Industrial MQTT with birth/death and typed metrics.                  │      │
│   ├────────────────┼──────────────────────────────────────────────────────────────────────┤      │
│   │ MTConnect      │ Manufacturing standard. Agent on DIME-A, client on DIME-B.           │      │
│   ├────────────────┼──────────────────────────────────────────────────────────────────────┤      │
│   │ SHDR           │ Pipe delimited, low overhead. Great for edge forwarding.             │      │
│   ├────────────────┼──────────────────────────────────────────────────────────────────────┤      │
│   │ HTTP           │ REST push/pull. Works through firewalls and proxies.                 │      │
│   ├────────────────┼──────────────────────────────────────────────────────────────────────┤      │
│   │ WebSocket      │ Persistent, full-duplex. Low-latency streaming.                      │      │
│   ├────────────────┼──────────────────────────────────────────────────────────────────────┤      │
│   │ Redis          │ Pub/Sub channel. In-memory speed. Same-network linking.              │      │
│   └────────────────┴──────────────────────────────────────────────────────────────────────┘      │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THREE-TIER TOPOLOGY                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   Chain instances into layers: Edge → Aggregator → Analytics.                                    │
│                                                                                                  │
│    EDGE TIER                    AGGREGATOR TIER               ANALYTICS TIER                     │
│    (factory floor)              (plant server)                (cloud / data center)              │
│                                                                                                  │
│    ┌──────────────┐                                                                              │
│    │  DIME Edge 1 │──┐                                                                           │
│    │  PLCs, CNCs  │  │         ┌──────────────────┐                                              │
│    └──────────────┘  │         │                  │          ┌──────────────────┐                │
│                      ├─ MQTT ─▶│  DIME Aggregator │ ─ MQTT ─▶│  Splunk          │                │
│    ┌──────────────┐  │         │                  │          └──────────────────┘                │
│    │  DIME Edge 2 │──┤         │  Merges all edge │                                              │
│    │  Sensors     │  │         │  streams. Serves │          ┌──────────────────┐                │
│    └──────────────┘  │         │  local dashboard.│── MQTT ─▶│  InfluxDB        │                │
│                      │         │                  │          └ ─────────────────┘                │
│    ┌──────────────┐  │         │  Forwards to     │                                              │
│    │  DIME Edge 3 │──┘         │  cloud via MQTT. │          ┌──────────────────┐                │
│    │  Robots      │            │                  │── HTTP ─▶│  MongoDB         │                │
│    └──────────────┘            └──────────────────┘          └──────────────────┘                │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   EDGE INSTANCE                                                                                  │
│   ─────────────                                                                                  │
│                                                                                                  │
│   Each edge DIME collects from local devices, normalizes, and forwards upstream.                 │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   # Edge: PLC → MQTT                                                                     │   │
│   │   sources:                                                                               │   │
│   │     - name: plc1                                                                         │   │
│   │       connector: S7                                                                      │   │
│   │       address: 192.168.1.10                                                              │   │
│   │       scan_interval: !!int 1000                                                          │   │
│   │       items:                                                                             │   │
│   │         - name: Temperature                                                              │   │
│   │           address: DB1.DBD0                                                              │   │
│   │         - name: Pressure                                                                 │   │
│   │           address: DB1.DBD4                                                              │   │
│   │                                                                                          │   │
│   │   sinks:                                                                                 │   │
│   │     - name: upstream                                                                     │   │
│   │       connector: MQTT                                                                    │   │
│   │       address: aggregator.local                                                          │   │
│   │       port: !!int 1883                                                                   │   │
│   │       base_topic: edge/line1                                                             │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   AGGREGATOR INSTANCE                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   Merges all edge streams, serves a local dashboard, and forwards to cloud.                      │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   # Aggregator: MQTT → Dashboard + Cloud                                                 │   │
│   │   sources:                                                                               │   │
│   │     - name: edge_data                                                                    │   │
│   │       connector: MQTT                                                                    │   │
│   │       address: localhost                                                                 │   │
│   │       port: !!int 1883                                                                   │   │
│   │       base_topic: edge/#                                                                 │   │
│   │                                                                                          │   │
│   │   sinks:                                                                                 │   │
│   │     - name: dashboard                                                                    │   │
│   │       connector: WebSocketServer                                                         │   │
│   │       port: !!int 8092                                                                   │   │
│   │                                                                                          │   │
│   │     - name: cloud                                                                        │   │
│   │       connector: MQTT                                                                    │   │
│   │       address: cloud-broker.com                                                          │   │
│   │       port: !!int 8883                                                                   │   │
│   │       tls: !!bool true                                                                   │   │
│   │       base_topic: plant/floor1                                                           │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   HOT RECONFIGURATION AT RUNTIME                                                                 │
│   ──────────────────────────────                                                                 │
│                                                                                                  │
│   Add a new sink to a running instance without restarting. Zero downtime.                        │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   $ curl -X POST http://localhost:9999/connector/add/sink/debug_console \                │   │
│   │       -H "Content-Type: text/plain" \                                                    │   │
│   │       -d 'name: debug_console                                                            │   │
│   │   connector: Console'                                                                    │   │
│   │                                                                                          │   │
│   │   ┌───────────────────────────────────────────────────────────────────────────┐          │   │
│   │   │  Before:   [plc1] ──▶ Ring ──▶ [upstream_mqtt]                            │          │   │
│   │   │                                                                           │          │   │
│   │   │  After:    [plc1] ──▶ Ring ──▶ [upstream_mqtt]                            │          │   │
│   │   │                             ──▶ [debug_console]  ◀── added live           │          │   │
│   │   └───────────────────────────────────────────────────────────────────────────┘          │   │
│   │                                                                                          │   │
│   │   Existing connectors unaffected. New sink starts receiving immediately.                 │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE MATH — SCALING WITH INSTANCE CHAINING                                                      │
│   ─────────────────────────────────────────                                                      │
│                                                                                                  │
│   ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐     │
│   │                   │  │                   │  │                   │  │                   │     │
│   │  N EDGE           │  │  1 YAML           │  │  1 AGGREGATOR     │  │  M ANALYTICS      │     │
│   │  INSTANCES        │  │  PER EDGE         │  │  INSTANCE         │  │  DESTINATIONS     │     │
│   │                   │  │                   │  │                   │  │                   │     │
│   │  One per machine  │  │  Same template.   │  │  Merges N edge    │  │  Splunk, Influx,  │     │
│   │  or cell. Each    │  │  Change address   │  │  streams into     │  │  MongoDB, custom  │     │
│   │  runs its own     │  │  and name per     │  │  one view.        │  │  dashboards —     │     │
│   │  DIME process.    │  │  deployment.      │  │  Serves local     │  │  each a sink on   │     │
│   │                   │  │                   │  │  dashboards.      │  │  the aggregator.  │     │
│   │                   │  │                   │  │                   │  │                   │     │
│   └───────────────────┘  └───────────────────┘  └───────────────────┘  └───────────────────┘     │
│                                                                                                  │
│   N edges × M devices.  One YAML per edge.  One aggregator to rule them all.                     │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON23-deploy-service.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        23 — Service Deployment                        │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Windows Service. Linux systemd.                │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Production-ready.                              │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   OVERVIEW — OS SERVICE MANAGEMENT                                                               │
│   ────────────────────────────────                                                               │
│                                                                                                  │
│   DIME runs as a native OS service on both Windows and Linux. Start on boot, survive             │
│   logouts, restart on failure — the OS manages the process lifecycle.                            │
│                                                                                                  │
│   ┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐      ┌──────────────┐    │
│   │                 │      │                 │      │                 │      │              │    │
│   │  OS Service     │─────▶│  DIME Process   │─────▶│  YAML Configs   │      │  Log Files   │    │
│   │  Manager        │      │                 │      │                 │      │              │    │
│   │                 │      │  Sources        │      │ /Configs/*.yaml │      │  Daily roll  │    │
│   │  Windows SCM    │◀─────│  Ring Buffer    │      │  Merged at      │      │  nlog.config │    │
│   │  or systemd     │ stat │  Sinks          │      │  startup        │      │  JSON / text │    │
│   │                 │      │  Admin API      │      │                 │      │              │    │
│   └─────────────────┘      └─────────────────┘      └─────────────────┘      └──────────────┘    │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WINDOWS SERVICE                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   Install DIME as a Windows service using the built-in installer.                                │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   INSTALL                                                                                │   │
│   │   ───────                                                                                │   │
│   │   > DIME.exe install                           # default service name "DIME"             │   │
│   │   > DIME.exe install /instance:Plant1          # named instance "DIME$Plant1"            │   │
│   │   > DIME.exe install /instance:Plant2          # another named instance                  │   │
│   │                                                                                          │   │
│   │   CONTROL                                                                                │   │
│   │   ───────                                                                                │   │
│   │   > net start DIME                             # start default service                   │   │
│   │   > net stop  DIME                             # stop default service                    │   │
│   │   > net start "DIME$Plant1"                    # start named instance                    │   │
│   │   > net stop  "DIME$Plant1"                    # stop named instance                     │   │
│   │                                                                                          │   │
│   │   UNINSTALL                                                                              │   │
│   │   ─────────                                                                              │   │
│   │   > DIME.exe uninstall                         # remove default service                  │   │
│   │   > DIME.exe uninstall /instance:Plant1        # remove named instance                   │   │
│   │                                                                                          │   │
│   │   POWERSHELL                                                                             │   │
│   │   ──────────                                                                             │   │
│   │   > Get-Service DIME* | Format-Table Name, Status, StartType                             │   │
│   │   > Restart-Service DIME                                                                 │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   Named instances let you run multiple DIME services on one Windows machine,                     │
│   each with different configs, different ports, different devices.                               │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   LINUX systemd                                                                                  │
│   ─────────────                                                                                  │
│                                                                                                  │
│   Install DIME as a systemd service using the provided install script.                           │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   INSTALL                                                                                │   │
│   │   ───────                                                                                │   │
│   │   $ sudo ./install-dime-connector.sh \                                                   │   │
│   │       dime-connector-linux-x64.tar.gz                                                    │   │
│   │                                                                                          │   │
│   │   WITH CUSTOM CONFIG DIRECTORY                                                           │   │
│   │   ────────────────────────────                                                           │   │
│   │   $ sudo ./install-dime-connector.sh \                                                   │   │
│   │       -d /etc/dime/plant1 \                                                              │   │
│   │       dime-connector-linux-x64.tar.gz                                                    │   │
│   │                                                                                          │   │
│   │   CONTROL                                                                                │   │
│   │   ───────                                                                                │   │
│   │   $ sudo systemctl start   dime-connector                                                │   │
│   │   $ sudo systemctl stop    dime-connector                                                │   │
│   │   $ sudo systemctl status  dime-connector                                                │   │
│   │   $ sudo systemctl restart dime-connector                                                │   │
│   │   $ sudo systemctl enable  dime-connector      # start on boot                           │   │
│   │                                                                                          │   │
│   │   LOGS                                                                                   │   │
│   │   ────                                                                                   │   │
│   │   $ sudo journalctl -u dime-connector -f       # live log stream                         │   │
│   │   $ ls /opt/dime-connector/Logs/                # file-based logs                        │   │
│   │                                                                                          │   │
│   │   UNINSTALL                                                                              │   │
│   │   ─────────                                                                              │   │
│   │   $ sudo ./install-dime-connector.sh -U                                                  │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   The -d flag points DIME to a custom config directory. Useful for running multiple              │
│   instances with separate configurations on one Linux machine.                                   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MULTIPLE INSTANCES ON ONE MACHINE                                                              │
│   ─────────────────────────────────                                                              │
│                                                                                                  │
│   Run several DIME instances side by side. Each gets its own port, config, and logs.             │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Instance         REST Port   WS Port   Config Directory                                │   │
│   │   ────────────────────────────────────────────────────────                               │   │
│   │   DIME (default)   9999        9998      ./Configs/                                      │   │
│   │   DIME$Plant1      9001        9002      C:\DIME\Plant1\Configs\                         │   │
│   │   DIME$Plant2      9003        9004      C:\DIME\Plant2\Configs\                         │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   ┌──────────────────────────┐  ┌──────────────────────────┐                             │   │
│   │   │  DIME$Plant1             │  │  DIME$Plant2             │                             │   │
│   │   │  :9001 / :9002           │  │  :9003 / :9004           │                             │   │
│   │   │                          │  │                          │                             │   │
│   │   │  ┌─ Sources ─┐           │  │ ┌─ Sources ─┐            │                             │   │
│   │   │  │ PLC Line 1│──▶ Ring   │  │ │ PLC Line 2│──▶ Ring    │                             │   │
│   │   │  └───────────┘   ──▶MQTT │  │ └───────────┘   ──▶MQTT  │                             │   │
│   │   │                          │  │                          │                             │   │
│   │   └──────────────────────────┘  └──────────────────────────┘                             │   │
│   │                                                                                          │   │
│   │   Each instance is fully isolated: own process, own ring buffer, own connectors.         │   │
│   │   Set ports in the app section of each instance's YAML config.                           │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DIRECTORY LAYOUT                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│   ┌──────────────────────────────────────────┐  ┌──────────────────────────────────────────┐     │
│   │  WINDOWS                                 │  │  LINUX                                   │     │
│   │                                          │  │                                          │     │
│   │  C:\Program Files\DIME\                  │  │  /opt/dime-connector/                    │     │
│   │  ├── DIME.exe                            │  │   ├── DIME                               │     │
│   │  ├── Configs\                            │  │   ├── Configs/                           │     │
│   │  │   ├── main.yaml                       │  │   │   ├── main.yaml                      │     │
│   │  │   ├── sources.yaml                    │  │   │   ├── sources.yaml                   │     │
│   │  │   └── sinks.yaml                      │  │   │   └── sinks.yaml                     │     │
│   │  ├── Logs\                               │  │   ├── Logs/                              │     │
│   │  │   ├── 2026-02-19.log                  │  │   │   ├── 2026-02-19.log                 │     │
│   │  │   └── 2026-02-18.log                  │  │   │   └── 2026-02-18.log                 │     │
│   │  ├── Scripts\                            │  │   ├── Scripts/                           │     │
│   │  └── nlog.config                         │  │   └── nlog.config                        │     │
│   │                                          │  │                                          │     │
│   └──────────────────────────────────────────┘  └──────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   LOG ROTATION & MANAGEMENT                                                                      │
│   ─────────────────────────                                                                      │
│                                                                                                  │
│   DIME uses NLog. Logging is configured in nlog.config.                                          │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   nlog.config controls:                                                                  │   │
│   │                                                                                          │   │
│   │   ┌────────────────────┬────────────────────────────────────────────────────────┐        │   │
│   │   │ Setting            │ Description                                            │        │   │
│   │   ├────────────────────┼────────────────────────────────────────────────────────┤        │   │
│   │   │ File target        │ Logs/${shortdate}.log — daily rolling file             │        │   │
│   │   ├────────────────────┼────────────────────────────────────────────────────────┤        │   │
│   │   │ Min level          │ Warn (default). Set to Info, Debug, or Trace to expand │        │   │
│   │   ├────────────────────┼────────────────────────────────────────────────────────┤        │   │
│   │   │ Archive            │ Max 14 files. Configurable retention.                  │        │   │
│   │   ├────────────────────┼────────────────────────────────────────────────────────┤        │   │
│   │   │ JSON layout        │ Optional structured JSON format for log aggregation    │        │   │
│   │   ├────────────────────┼────────────────────────────────────────────────────────┤        │   │
│   │   │ Console target     │ Enabled when running interactively (not as service)    │        │   │
│   │   └────────────────────┴────────────────────────────────────────────────────────┘        │   │
│   │                                                                                          │   │
│   │   Change log levels at runtime by editing nlog.config — NLog watches for changes.        │   │
│   │   No restart required.                                                                   │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON24-deploy-docker.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        24 — Docker Deployment                         │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Containerized. Compose.                        │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Cloud and edge ready.                          │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DOCKER RUN — QUICK START                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   One command to run DIME in a container. Mount your configs, expose your ports.                 │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   $ docker run -d \                                                                      │   │
│   │       --name dime \                                                                      │   │
│   │       -v /path/to/configs:/app/Configs \                                                 │   │
│   │       -p 9999:9999 \                         # REST API                                  │   │
│   │       -p 9998:9998 \                         # WebSocket                                 │   │
│   │       --restart unless-stopped \                                                         │   │
│   │       datainmotionenterprise/connector:latest                                            │   │
│   │                                                                                          │   │
│   │   ┌─── Docker Host ──────────────────────────────────────────────────────────────┐       │   │
│   │   │                                                                              │       │   │
│   │   │   ┌─── DIME Container ─────────────────────────────────────────────────┐     │       │   │
│   │   │   │                                                                    │     │       │   │
│   │   │   │   /app/DIME              ← DIME binary                             │     │       │   │
│   │   │   │   /app/Configs/          ← mounted from host                       │     │       │   │
│   │   │   │   /app/Logs/             ← log output                              │     │       │   │
│   │   │   │                                                                    │     │       │   │
│   │   │   │   :9999 ─── REST API     :9998 ─── WebSocket                       │     │       │   │
│   │   │   │                                                                    │     │       │   │
│   │   │   └────────────────────────────────────────────────────────────────────┘     │       │   │
│   │   │         │              │                                                     │       │   │
│   │   │     Volumes        Port Mapping                                              │       │   │
│   │   │   /path/to/configs   9999 → 9999                                             │       │   │
│   │   │                      9998 → 9998                                             │       │   │
│   │   │                                                                              │       │   │
│   │   └──────────────────────────────────────────────────────────────────────────────┘       │   │
│   │                                                                                          │   │
│   │   Runs as root by default. Restart policy keeps DIME running after reboots.              │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DOCKER COMPOSE — MULTI-CONTAINER STACK                                                         │
│   ──────────────────────────────────────                                                         │
│                                                                                                  │
│   Run DIME alongside InfluxDB, Grafana, or any companion service.                                │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   # docker-compose.yml                                                                   │   │
│   │   version: '3.8'                                                                         │   │
│   │   services:                                                                              │   │
│   │                                                                                          │   │
│   │     dime:                                                                                │   │
│   │       image: datainmotionenterprise/connector:latest                                     │   │
│   │       volumes:                                                                           │   │
│   │         - ./configs:/app/Configs                                                         │   │
│   │         - ./logs:/app/Logs                                                               │   │
│   │       ports:                                                                             │   │
│   │         - "9999:9999"                          # REST API                                │   │
│   │         - "9998:9998"                          # WebSocket                               │   │
│   │         - "7878:7878"                          # SHDR (if needed)                        │   │
│   │         - "1883:1883"                          # MQTT (if needed)                        │   │
│   │       restart: unless-stopped                                                            │   │
│   │                                                                                          │   │
│   │     influxdb:                                                                            │   │
│   │       image: influxdb:2                                                                  │   │
│   │       ports:                                                                             │   │
│   │         - "8086:8086"                                                                    │   │
│   │       volumes:                                                                           │   │
│   │         - influx-data:/var/lib/influxdb2                                                 │   │
│   │                                                                                          │   │
│   │     grafana:                                                                             │   │
│   │       image: grafana/grafana:latest                                                      │   │
│   │       ports:                                                                             │   │
│   │         - "3000:3000"                                                                    │   │
│   │       volumes:                                                                           │   │
│   │         - grafana-data:/var/lib/grafana                                                  │   │
│   │                                                                                          │   │
│   │   volumes:                                                                               │   │
│   │     influx-data:                                                                         │   │
│   │     grafana-data:                                                                        │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   ┌─── Compose Stack ────────────────────────────────────────────────────────────────────┐       │
│   │                                                                                      │       │
│   │   ┌─────────┐       ┌─────────┐       ┌─────────┐                                    │       │
│   │   │  DIME   │──────▶│ InfluxDB│──────▶│ Grafana │                                    │       │
│   │   │  :9999  │ write │  :8086  │ query │  :3000  │                                    │       │
│   │   │  :9998  │       │         │       │         │                                    │       │
│   │   └─────────┘       └─────────┘       └─────────┘                                    │       │
│   │       │                  │                  │                                        │       │
│   │    configs/          influx-data         grafana-data                                │       │
│   │    (bind mount)      (volume)            (volume)                                    │       │
│   │                                                                                      │       │
│   └──────────────────────────────────────────────────────────────────────────────────────┘       │
│                                                                                                  │
│   $ docker compose up -d                       # start the stack                                 │
│   $ docker compose logs -f dime                # follow DIME logs                                │
│   $ docker compose down                        # stop and remove                                 │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   VOLUME MOUNTS & PORT MAPPING                                                                   │
│   ────────────────────────────                                                                   │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   VOLUMES                                                                                │   │
│   │   ───────                                                                                │   │
│   │   /app/Configs   ← Mount your YAML files here. DIME reads *.yaml on startup.             │   │
│   │   /app/Logs      ← Optional. Mount to persist logs outside the container.                │   │
│   │   /app/Scripts   ← Optional. Mount external Lua/Python scripts.                          │   │
│   │                                                                                          │   │
│   │   PORTS                                                                                  │   │
│   │   ─────                                                                                  │   │
│   │   9999           ← REST Admin API (always needed)                                        │   │
│   │   9998           ← WebSocket feed (for dashboards / UX)                                  │   │
│   │   7878           ← SHDR server (if running MTConnect agent)                              │   │
│   │   1883           ← MQTT broker (if DIME acts as broker)                                  │   │
│   │   8092           ← WebSocketServer sink (custom port)                                    │   │
│   │                                                                                          │   │
│   │   Map only the ports your configuration actually uses.                                   │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ARM64 — RASPBERRY PI & EDGE GATEWAYS                                                           │
│   ────────────────────────────────────                                                           │
│                                                                                                  │
│   DIME provides ARM64 images for edge deployment on Raspberry Pi and industrial gateways.        │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   $ docker run -d \                                                                      │   │
│   │       --name dime-edge \                                                                 │   │
│   │       -v ./configs:/app/Configs \                                                        │   │
│   │       -p 9999:9999 \                                                                     │   │
│   │       --restart unless-stopped \                                                         │   │
│   │       datainmotionenterprise/connector:latest  # multi-arch: auto-selects ARM64          │   │
│   │                                                                                          │   │
│   │   ┌─────────────────────────────────────────────────────────────────────────────┐        │   │
│   │   │                                                                             │        │   │
│   │   │     Raspberry Pi 4/5          Industrial Edge Gateway                       │        │   │
│   │   │     ┌───────────────┐         ┌───────────────────────┐                     │        │   │
│   │   │     │ ARM64 Linux   │         │ ARM64 Linux           │                     │        │   │
│   │   │     │               │         │                       │                     │        │   │
│   │   │     │ ┌───────────┐ │         │ ┌───────────────────┐ │                     │        │   │
│   │   │     │ │ DIME      │ │         │ │ DIME              │ │                     │        │   │
│   │   │     │ │ Container │ │         │ │ Container         │ │                     │        │   │
│   │   │     │ └───────────┘ │         │ └───────────────────┘ │                     │        │   │
│   │   │     │ Modbus, S7    │         │ OPC-UA, MQTT          │                     │        │   │
│   │   │     └───────────────┘         └───────────────────────┘                     │        │   │
│   │   │                                                                             │        │   │
│   │   │   Same YAML config. Same container image. Same behavior. Just ARM64.        │        │   │
│   │   │                                                                             │        │   │
│   │   └─────────────────────────────────────────────────────────────────────────────┘        │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ROS2 DOCKER VARIANTS                                                                           │
│   ────────────────────                                                                           │
│                                                                                                  │
│   For robotics integration, DIME offers Docker images with ROS2 pre-installed.                   │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   IMAGE TAGS                                                                             │   │
│   │   ──────────                                                                             │   │
│   │                                                                                          │   │
│   │   Tag                                                        Description                 │   │
│   │   ────────────────────────────────────────────────────────  ────────────────────────     │   │
│   │   datainmotionenterprise/connector:latest                    Standard DIME. No ROS2.     │   │
│   │   datainmotionenterprise/connector:latest-ros2-humble        DIME + ROS2 Humble (LTS)    │   │
│   │   datainmotionenterprise/connector:latest-ros2-jazzy         DIME + ROS2 Jazzy (LTS)     │   │
│   │                                                                                          │   │
│   │   $ docker run -d \                                                                      │   │
│   │       --name dime-ros2 \                                                                 │   │
│   │       -v ./configs:/app/Configs \                                                        │   │
│   │       -p 9999:9999 \                                                                     │   │
│   │       datainmotionenterprise/connector:latest-ros2-humble                                │   │
│   │                                                                                          │   │
│   │   ROS2 images include the ROS2 runtime and DIME's ROS2 source connector.                 │   │
│   │   Subscribe to ROS2 topics and route them through DIME's ring buffer                     │   │
│   │   to any sink — InfluxDB, MQTT, Splunk, dashboards, and more.                            │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON25-horizon-gateway.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        25 — Horizon Gateway                           │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Site manager. Bridges edge to cloud.           │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          No inbound firewall.                           │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHAT IS HORIZON?                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│   Horizon is the site-level gateway that manages all DIME Connectors at a physical location.     │
│   It bridges the factory floor (edge) to the cloud (Zenith) without requiring any inbound        │
│   firewall rules. One Horizon per site. Dozens of Connectors per Horizon.                        │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   PULL-BASED ARCHITECTURE — NO INBOUND FIREWALL RULES                                            │
│   ────────────────────────────────────────────────────                                           │
│                                                                                                  │
│   Horizon always reaches OUT. Zenith never reaches in. No ports to open on site.                 │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   FACTORY SITE (behind firewall)                              CLOUD                      │   │
│   │   ─────────────────────────────                               ─────                      │   │
│   │                                                                                          │   │
│   │   ┌────────────┐                                                                         │   │
│   │   │ DIME #1    │──┐                                          ┌──────────────┐            │   │
│   │   │ (PLC)      │  │                                          │              │            │   │
│   │   └────────────┘  │     ┌──────────────────┐    OUTBOUND     │    ZENITH    │            │   │
│   │                   ├────▶│                  │  ══════════════▶│              │            │   │
│   │   ┌────────────┐  │     │    HORIZON       │    HTTPS only   │  Fleet C2    │            │   │
│   │   │ DIME #2    │──┤     │    Gateway       │ ◀══════════════ │              │            │   │
│   │   │ (MQTT)     │  │     │                  │    responses    │              │            │   │
│   │   └────────────┘  │     └──────────────────┘                 └──────────────┘            │   │
│   │                   │           │                                                          │   │
│   │   ┌────────────┐  │           │ Horizon calls each                                       │   │
│   │   │ DIME #3    │──┘           │ Connector's Admin API                                    │   │
│   │   │ (OPC-UA)   │              │ locally (localhost)                                      │   │
│   │   └────────────┘              ▼                                                          │   │
│   │                                                                                          │   │
│   │   ██████████████████████████████████████████████████████████                             │   │
│   │   █  FIREWALL — NO INBOUND RULES NEEDED — ALL OUTBOUND     █                             │   │
│   │   ██████████████████████████████████████████████████████████                             │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   HORIZON CONFIGURATION                                                                          │
│   ─────────────────────                                                                          │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   zenith:                                                                                │   │
│   │     uri: https://zenith.example.com         ◀── Zenith server address                    │   │
│   │     key: c1041c3a-a114-40c6-...             ◀── Unique authentication key                │   │
│   │     checkin_interval: !!int 10000           ◀── Check-in every 10 seconds                │   │
│   │                                                                                          │   │
│   │   connector:                                                                             │   │
│   │     - id: plc_collector                     ◀── Friendly name for this connector         │   │
│   │       admin_http_uri: http://localhost:9999  ◀── REST API for this DIME instance         │   │
│   │       admin_ws_uri: ws://localhost:9998      ◀── WebSocket for live data                 │   │
│   │                                                                                          │   │
│   │     - id: mqtt_bridge                                                                    │   │
│   │       admin_http_uri: http://localhost:9997                                              │   │
│   │       admin_ws_uri: ws://localhost:9996                                                  │   │
│   │                                                                                          │   │
│   │   Horizon knows each local DIME instance by its Admin API ports.                         │   │
│   │   Multiple instances on one machine use different port pairs.                            │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CHECK-IN CYCLE — 5 STEPS                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   Every checkin_interval milliseconds, Horizon runs this cycle:                                  │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────────────┐    │   │
│   │   │             │     │             │     │             │     │                     │    │   │
│   │   │ 1. CONTACT  │────▶│ 2. SEND     │────▶│ 3. RECEIVE  │────▶│ 4. EXECUTE          │    │   │
│   │   │    ZENITH   │     │    STATUS   │     │    TASKS    │     │    LOCALLY          │    │   │
│   │   │             │     │             │     │             │     │                     │    │   │
│   │   └─────────────┘     └─────────────┘     └─────────────┘     └──────────┬──────────┘    │   │
│   │                                                                          │               │   │
│   │         Horizon calls          Sends summary        Zenith returns       │               │   │
│   │         POST /horizon/         of all local         pending task         │               │   │
│   │         {key}/checkin          connector health     queue for this       ▼               │   │
│   │                                                     Horizon                              │   │
│   │                                                                   ┌─────────────────┐    │   │
│   │                                                                   │                 │    │   │
│   │         ┌──────────────────────────────────────────────────────── │ 5. REPORT       │    │   │
│   │         │                                                         │    RESULTS      │    │   │
│   │         │  Horizon posts task results back to Zenith              │                 │    │   │
│   │         │  POST /horizon/{key}/task/{id}                          └─────────────────┘    │   │
│   │         ▼                                                                                │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│   The cycle repeats on a timer. Missed check-ins cause Zenith to flag the site as stale.         │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SUPPORTED TASKS                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   Tasks are commands that Zenith queues for Horizon to execute on local Connectors.              │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   CONNECTOR TASKS                          HORIZON SELF-MANAGEMENT                       │   │
│   │   ───────────────                          ────────────────────────                      │   │
│   │                                                                                          │   │
│   │   ┌──────────────────────┬──────────────────────────────────────────┐                    │   │
│   │   │ Task                 │ Description                              │                    │   │
│   │   ├──────────────────────┼──────────────────────────────────────────┤                    │   │
│   │   │ get_connector_status │ Retrieve health, metrics, fault info     │                    │   │
│   │   ├──────────────────────┼──────────────────────────────────────────┤                    │   │
│   │   │ get_connector_config │ Retrieve current running YAML config     │                    │   │
│   │   ├──────────────────────┼──────────────────────────────────────────┤                    │   │
│   │   │ set_connector_config │ Push new YAML config (hot reload)        │                    │   │
│   │   ├──────────────────────┼──────────────────────────────────────────┤                    │   │
│   │   │ restart_connector    │ Restart the DIME Connector service       │                    │   │
│   │   ├──────────────────────┼──────────────────────────────────────────┤                    │   │
│   │   │ get_connector_data   │ Retrieve current data snapshot           │                    │   │
│   │   └──────────────────────┴──────────────────────────────────────────┘                    │   │
│   │                                                                                          │   │
│   │   ┌──────────────────────┬──────────────────────────────────────────┐                    │   │
│   │   │ Task                 │ Description                              │                    │   │
│   │   ├──────────────────────┼──────────────────────────────────────────┤                    │   │
│   │   │ get_horizon_config   │ Retrieve Horizon's own configuration     │                    │   │
│   │   ├──────────────────────┼──────────────────────────────────────────┤                    │   │
│   │   │ set_horizon_config   │ Update Horizon's configuration remotely  │                    │   │
│   │   ├──────────────────────┼──────────────────────────────────────────┤                    │   │
│   │   │ restart_horizon      │ Restart the Horizon service itself       │                    │   │
│   │   └──────────────────────┴──────────────────────────────────────────┘                    │   │
│   │                                                                                          │   │
│   │   Horizon executes tasks by calling the Connector's Admin REST API locally.              │   │
│   │   Results are reported back to Zenith on the next check-in.                              │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DEPLOYMENT OPTIONS                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌──────────────────┐   ┌──────────────────┐   ┌──────────────────┐                     │   │
│   │   │                  │   │                  │   │                  │                     │   │
│   │   │  WINDOWS         │   │  LINUX           │   │  DOCKER          │                     │   │
│   │   │  SERVICE         │   │  SYSTEMD         │   │  CONTAINER       │                     │   │
│   │   │                  │   │                  │   │                  │                     │   │
│   │   │  Horizon.exe     │   │  systemctl       │   │  docker run      │                     │   │
│   │   │  install         │   │  start horizon   │   │  -v config:/app  │                     │   │
│   │   │                  │   │                  │   │                  │                     │   │
│   │   └──────────────────┘   └──────────────────┘   └──────────────────┘                     │   │
│   │                                                                                          │   │
│   │   Horizon runs alongside DIME Connectors on the same machine or a dedicated gateway.     │   │
│   │   It only needs outbound HTTPS access to Zenith and local access to Connector APIs.      │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON26-zenith-cloud.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        26 — Zenith Cloud                              │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Fleet command center.                          │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          Hundreds of sites. One dashboard.              │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHAT IS ZENITH?                                                                                │
│   ───────────────                                                                                │
│                                                                                                  │
│   Zenith is the centralized cloud command center for the entire DIME fleet.                      │
│   It manages hundreds of Horizons and thousands of Connectors from a single server.              │
│   Every site checks in. Zenith sees everything.                                                  │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ARCHITECTURE — ASP.NET CORE + MONGODB                                                          │
│   ──────────────────────────────────────                                                         │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │                          ┌──────────────────────────────────────┐                        │   │
│   │                          │         DIME ZENITH SERVER           │                        │   │
│   │                          │                                      │                        │   │
│   │                          │   ASP.NET Core Minimal API           │                        │   │
│   │                          │   Key-based auth per Horizon         │                        │   │
│   │                          │   Automatic stale detection          │                        │   │
│   │                          │   Task queue management              │                        │   │
│   │                          │                                      │                        │   │
│   │                          └─────────────────┬────────────────────┘                        │   │
│   │                                            │                                             │   │
│   │                                            │ reads / writes                              │   │
│   │                                            ▼                                             │   │
│   │                          ┌──────────────────────────────────────┐                        │   │
│   │                          │            MONGODB                   │                        │   │
│   │                          │                                      │                        │   │
│   │                          │   Fleet-wide persistent storage      │                        │   │
│   │                          │   Scales to thousands of documents   │                        │   │
│   │                          │                                      │                        │   │
│   │                          └──────────────────────────────────────┘                        │   │
│   │                                            ▲                                             │   │
│   │                                            │                                             │   │
│   │          ┌─────────────────────────────────┼─────────────────────────────────┐           │   │
│   │          │                                 │                                 │           │   │
│   │   ┌──────────────┐                 ┌──────────────┐                 ┌──────────────┐     │   │
│   │   │              │                 │              │                 │              │     │   │
│   │   │  HORIZON     │    check-in     │  HORIZON     │    check-in     │  HORIZON     │     │   │
│   │   │  Site A      │ ──────────────▶ │  Site B      │ ─────────────▶  │  Site C      │     │   │
│   │   │  key: abc... │                 │  key: def... │                 │  key: ghi... │     │   │
│   │   │              │                 │              │                 │              │     │   │
│   │   └──────────────┘                 └──────────────┘                 └──────────────┘     │   │
│   │                                                                                          │   │
│   │   Each Horizon authenticates with a unique key. No passwords. No tokens to rotate.       │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   MONGODB COLLECTIONS                                                                            │
│   ───────────────────                                                                            │
│                                                                                                  │
│   Six collections store the entire fleet state:                                                  │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌────────────────────────┐      ┌────────────────────────────────┐                     │   │
│   │   │                        │      │                                │                     │   │
│   │   │  Horizons              │      │  Connectors                    │                     │   │
│   │   │                        │      │                                │                     │   │
│   │   │  Site metadata         │      │  Per-connector metadata        │                     │   │
│   │   │  Last check-in time    │      │  across all sites              │                     │   │
│   │   │  Horizon version       │      │  Connector type and name       │                     │   │
│   │   │                        │      │                                │                     │   │
│   │   └────────────────────────┘      └────────────────────────────────┘                     │   │
│   │                                                                                          │   │
│   │   ┌────────────────────────┐      ┌────────────────────────────────┐                     │   │
│   │   │                        │      │                                │                     │   │
│   │   │  Connectors-           │      │  Connectors-Status             │                     │   │
│   │   │  Configuration         │      │                                │                     │   │
│   │   │                        │      │  Live health and               │                     │   │
│   │   │  YAML configs stored   │      │  performance metrics           │                     │   │
│   │   │  centrally per         │      │  IsConnected, IsFaulted        │                     │   │
│   │   │  connector             │      │  ReadTime, LoopTime            │                     │   │
│   │   │                        │      │                                │                     │   │
│   │   └────────────────────────┘      └────────────────────────────────┘                     │   │
│   │                                                                                          │   │
│   │   ┌────────────────────────┐      ┌────────────────────────────────┐                     │   │
│   │   │                        │      │                                │                     │   │
│   │   │  Connectors-Data       │      │  Tasks                         │                     │   │
│   │   │                        │      │                                │                     │   │
│   │   │  Current data points   │      │  Task queue per Horizon        │                     │   │
│   │   │  Last known values     │      │  Pending, executing, done      │                     │   │
│   │   │  per connector         │      │  Results stored on completion  │                     │   │
│   │   │                        │      │                                │                     │   │
│   │   └────────────────────────┘      └────────────────────────────────┘                     │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   API ENDPOINTS                                                                                  │
│   ─────────────                                                                                  │
│                                                                                                  │
│   Zenith exposes two endpoints. Horizons are the only clients.                                   │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌────────┬──────────────────────────────────┬──────────────────────────────────────┐   │   │
│   │   │ METHOD │ PATH                             │ DESCRIPTION                          │   │   │
│   │   ├────────┼──────────────────────────────────┼──────────────────────────────────────┤   │   │
│   │   │  POST  │ /horizon/{key}/checkin           │ Horizon check-in: send status,       │   │   │
│   │   │        │                                  │ receive pending tasks                │   │   │
│   │   ├────────┼──────────────────────────────────┼──────────────────────────────────────┤   │   │
│   │   │  POST  │ /horizon/{key}/task/{id}         │ Report task execution results        │   │   │
│   │   │        │                                  │ back to Zenith                       │   │   │
│   │   └────────┴──────────────────────────────────┴──────────────────────────────────────┘   │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   CHECK-IN FLOW:                                                                         │   │
│   │                                                                                          │   │
│   │     Horizon ──POST /checkin──▶ Zenith                                                    │   │
│   │       │                          │                                                       │   │
│   │       │  { connector_status }    │  Updates Horizons, Connectors-Status,                 │   │
│   │       │                          │  Connectors-Data collections                          │   │
│   │       │                          │                                                       │   │
│   │       │   ◀── 200 OK ─────────── │  Returns: { tasks: [ ... ] }                          │   │
│   │       │                          │                                                       │   │
│   │       │                                                                                  │   │
│   │     Horizon ──POST /task/{id}──▶ Zenith                                                  │   │
│   │       │                          │                                                       │   │
│   │       │  { task_result }         │  Marks task complete, stores result                   │   │
│   │       │                          │                                                       │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   AUTOMATIC STALE DETECTION                                                                      │
│   ─────────────────────────                                                                      │
│                                                                                                  │
│   Zenith watches for Horizons that stop checking in.                                             │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Normal:     Horizon checks in every 10s  ──▶  status = ONLINE                          │   │
│   │                                                                                          │   │
│   │   Missed:     No check-in for 3x interval  ──▶  status = STALE                           │   │
│   │                                                                                          │   │
│   │   Recovery:   Horizon reconnects            ──▶  Zenith auto-queues data-refresh tasks   │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   When a stale Horizon comes back online, Zenith automatically generates:                │   │
│   │                                                                                          │   │
│   │     ┌──────────────────────────┐                                                         │   │
│   │     │ get_connector_status     │  ◀── refresh health for all connectors                  │   │
│   │     ├──────────────────────────┤                                                         │   │
│   │     │ get_connector_config     │  ◀── refresh configs in case of local changes           │   │
│   │     ├──────────────────────────┤                                                         │   │
│   │     │ get_connector_data       │  ◀── refresh current data snapshots                     │   │
│   │     └──────────────────────────┘                                                         │   │
│   │                                                                                          │   │
│   │   No manual intervention needed. Zenith self-heals its view of the fleet.                │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   KEY-BASED AUTHENTICATION                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   Every Horizon is assigned a unique GUID key at provisioning time.                      │   │
│   │                                                                                          │   │
│   │     Horizon Site A  ──▶  key: c1041c3a-a114-40c6-9c01-ee8e3b83596a                       │   │
│   │     Horizon Site B  ──▶  key: 7f2b8d4e-3c19-4a5f-b6d8-1e9f0a2c3d4e                       │   │
│   │     Horizon Site C  ──▶  key: a5e7c9b1-d3f2-4e6a-8c0b-2d4f6a8e0c1b                       │   │
│   │                                                                                          │   │
│   │   The key is included in every API call as a URL parameter:                              │   │
│   │     POST /horizon/c1041c3a-a114-40c6-9c01-ee8e3b83596a/checkin                           │   │
│   │                                                                                          │   │
│   │   Benefits:                                                                              │   │
│   │     - No username/password management                                                    │   │
│   │     - No token expiry or refresh flows                                                   │   │
│   │     - One key per site — revoke by deleting the Horizon record                           │   │
│   │     - Key stays in the Horizon config file — never transmitted in headers                │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FLEET SCALE                                                                                    │
│   ───────────                                                                                    │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │                         ┌────────────────────────────┐                                   │   │
│   │                         │                            │                                   │   │
│   │                         │    1 ZENITH instance       │                                   │   │
│   │                         │                            │                                   │   │
│   │                         └─────────────┬──────────────┘                                   │   │
│   │                                       │                                                  │   │
│   │                    ┌──────────────────┼─────────────────┐                                │   │
│   │                    │                  │                 │                                │   │
│   │              ┌─────┴─────┐     ┌──────┴─────┐    ┌──────┴─────┐                          │   │
│   │              │ HORIZON   │     │ HORIZON    │    │ HORIZON    │     ...100s more         │   │
│   │              │ Factory 1 │     │ Factory 2  │    │ Warehouse  │                          │   │
│   │              └─────┬─────┘     └──────┬─────┘    └──────┬─────┘                          │   │
│   │                    │                  │                 │                                │   │
│   │               ┌────┼────┐        ┌────┼────┐       ┌────┼────┐                           │   │
│   │               │    │    │        │    │    │       │    │    │                           │   │
│   │              CON  CON  CON     CON  CON  CON    CON  CON  CON   ...1000s more            │   │
│   │                                                                                          │   │
│   │   1 Zenith  ──▶  Hundreds of Horizons  ──▶  Thousands of Connectors                      │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON27-zenith-ux.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        27 — Zenith UX                                 │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Fleet management console.                      │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          See everything at a glance.                    │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   WHAT IS ZENITH UX?                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   Zenith UX is the desktop application for fleet operators. Built with Tauri + React,            │
│   it connects to Zenith and gives you full visibility and control over every Horizon             │
│   and Connector in the enterprise. Dark industrial theme for control rooms.                      │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FLEET TREE VIEW — HIERARCHICAL NAVIGATION                                                      │
│   ──────────────────────────────────────────                                                     │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌─────────────────────────────────────┐   ┌────────────────────────────────────────┐   │   │
│   │   │  FLEET TREE                         │   │  DETAIL PANEL                          │   │   │
│   │   │                                     │   │                                        │   │   │
│   │   │  ▼ Zenith (zenith.acme.com)         │   │  ┌────────────────────────────────┐    │   │   │
│   │   │    ▼ Horizon — Factory Chicago      │   │  │  Factory Chicago / plc_line1   │    │   │   │
│   │   │      ● plc_line1      [CONNECTED]   │   │  │                                │    │   │   │
│   │   │      ● plc_line2      [CONNECTED]   │   │  │  Status:    Connected          │    │   │   │
│   │   │      ○ mqtt_bridge    [FAULTED]     │   │  │  Faults:    0                  │    │   │   │
│   │   │      ● opc_quality   [CONNECTED]    │   │  │  LoopTime:  23 ms              │    │   │   │
│   │   │    ▼ Horizon — Plant Detroit        │   │  │  ReadTime:  12 ms              │    │   │   │
│   │   │      ● fanuc_robot1   [CONNECTED]   │   │  │  Items:     42                 │    │   │   │
│   │   │      ● fanuc_robot2   [CONNECTED]   │   │  │  Accepted:  1,420              │    │   │   │
│   │   │      ○ modbus_hvac    [OFFLINE]     │   │  │                                │    │   │   │
│   │   │    ▶ Horizon — Warehouse Austin     │   │  │  [Config] [Data] [Restart]     │    │   │   │
│   │   │    ▶ Horizon — Lab Singapore        │   │  │                                │    │   │   │
│   │   │                                     │   │  └────────────────────────────────┘    │   │   │
│   │   │  ● = connected   ○ = faulted/off    │   │                                        │   │   │
│   │   │                                     │   │                                        │   │   │
│   │   └─────────────────────────────────────┘   └────────────────────────────────────────┘   │   │
│   │                                                                                          │   │
│   │   Navigate the entire fleet as a tree: Zenith → Horizons → Connectors.                   │   │
│   │   Click any node to see its detail panel on the right.                                   │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   LIVE DASHBOARD — FLEET-WIDE METRICS                                                            │
│   ───────────────────────────────────                                                            │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐  ┌────────────┐    │   │
│   │   │                   │  │                   │  │                   │  │            │    │   │
│   │   │   CONNECTED       │  │   FAULTED         │  │   OFFLINE         │  │  STALE     │    │   │
│   │   │                   │  │                   │  │                   │  │            │    │   │
│   │   │      127          │  │        3          │  │        8          │  │     1      │    │   │
│   │   │                   │  │                   │  │                   │  │            │    │   │
│   │   │   ██████████████  │  │   ███             │  │   █████           │  │   █        │    │   │
│   │   │   (green)         │  │   (red)           │  │   (gray)          │  │   (amber)  │    │   │
│   │   │                   │  │                   │  │                   │  │            │    │   │
│   │   └───────────────────┘  └───────────────────┘  └───────────────────┘  └────────────┘    │   │
│   │                                                                                          │   │
│   │   ┌──────────────────────────────────────────────────────────────────────────────────┐   │   │
│   │   │  HORIZON STATUS                                                                  │   │   │
│   │   │                                                                                  │   │   │
│   │   │  Factory Chicago    ● Online    Last check-in: 2s ago    Connectors: 4/4         │   │   │
│   │   │  Plant Detroit      ● Online    Last check-in: 5s ago    Connectors: 2/3         │   │   │
│   │   │  Warehouse Austin   ● Online    Last check-in: 1s ago    Connectors: 8/8         │   │   │
│   │   │  Lab Singapore      ◐ Stale     Last check-in: 45s ago   Connectors: ?/?         │   │   │
│   │   │                                                                                  │   │   │
│   │   └──────────────────────────────────────────────────────────────────────────────────┘   │   │
│   │                                                                                          │   │
│   │   See the health of the entire fleet at a glance. Drill down from any metric.            │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DEEP-DIVE DETAIL — CONFIG / STATUS / DATA                                                      │
│   ──────────────────────────────────────────                                                     │
│                                                                                                  │
│   Click any connector in the tree to see its full detail:                                        │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌─── plc_line1 @ Factory Chicago ──────────────────────────────────────────────────┐   │   │
│   │   │                                                                                  │   │   │
│   │   │  ┌──────────┐  ┌──────────┐  ┌──────────┐                                        │   │   │
│   │   │  │ STATUS   │  │ CONFIG   │  │ DATA     │                                        │   │   │
│   │   │  └──────────┘  └──────────┘  └──────────┘                                        │   │   │
│   │   │                                                                                  │   │   │
│   │   │  STATUS TAB:                          CONFIG TAB:                                │   │   │
│   │   │  ─────────                            ──────────                                 │   │   │
│   │   │  IsConnected:   true                  sources:                                   │   │   │
│   │   │  IsFaulted:     false                   - name: plc_line1                        │   │   │
│   │   │  FaultCount:    0                         connector: SiemensS7                   │   │   │
│   │   │  ConnectCount:  1                         address: 10.0.1.50                     │   │   │
│   │   │  LoopTime:      23 ms                     items:                                 │   │   │
│   │   │  ReadTime:      12 ms                       - name: temperature                  │   │   │
│   │   │  ScriptTime:    4 ms                          address: DB1.DBD0                  │   │   │
│   │   │  Accepted:      1,420                                                            │   │   │
│   │   │                                                                                  │   │   │
│   │   │  DATA TAB:                                                                       │   │   │
│   │   │  ────────                                                                        │   │   │
│   │   │  plc_line1/temperature     72.4    2024-01-15 14:23:01                           │   │   │
│   │   │  plc_line1/pressure        14.7    2024-01-15 14:23:01                           │   │   │
│   │   │  plc_line1/speed          1200     2024-01-15 14:23:01                           │   │   │
│   │   │                                                                                  │   │   │
│   │   └──────────────────────────────────────────────────────────────────────────────────┘   │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   REMOTE YAML EDITING — PUSH CHAIN                                                               │
│   ────────────────────────────────                                                               │
│                                                                                                  │
│   Edit a connector's YAML from the console. Changes flow through the entire chain.               │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   ┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────────────┐    │   │
│   │   │             │     │             │     │             │     │                     │    │   │
│   │   │  ZENITH UX  │────▶│   ZENITH    │────▶│  HORIZON    │────▶│  DIME CONNECTOR     │    │   │
│   │   │             │     │             │     │             │     │                     │    │   │
│   │   │  Edit YAML  │     │  Queue      │     │  Pick up    │     │  POST /config/yaml  │    │   │
│   │   │  Click Save │     │  set_config │     │  on next    │     │  Hot reload         │    │   │
│   │   │             │     │  task       │     │  check-in   │     │  Zero downtime      │    │   │
│   │   │             │     │             │     │             │     │                     │    │   │
│   │   └─────────────┘     └─────────────┘     └─────────────┘     └─────────────────────┘    │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │   1. Operator edits YAML in the built-in editor                                          │   │
│   │   2. Zenith queues a set_connector_config task for the target Horizon                    │   │
│   │   3. Horizon picks up the task on its next check-in                                      │   │
│   │   4. Horizon pushes the config to the Connector via its Admin REST API                   │   │
│   │   5. Connector hot-reloads — no restart, no downtime                                     │   │
│   │   6. Result reported back through the chain to Zenith UX                                 │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   TASK MANAGEMENT — ISSUE AND TRACK                                                              │
│   ─────────────────────────────────                                                              │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │   MANUAL TASK PANEL                                                                      │   │
│   │   ─────────────────                                                                      │   │
│   │                                                                                          │   │
│   │   ┌──────────────────────────────────────────────────────────────────────────────────┐   │   │
│   │   │                                                                                  │   │   │
│   │   │  Target:   Horizon — Factory Chicago                                             │   │   │
│   │   │  Task:     [get_connector_status ▼]                                              │   │   │
│   │   │  Scope:    [All Connectors ▼]                                                    │   │   │
│   │   │                                                                                  │   │   │
│   │   │  [  Issue Task  ]                                                                │   │   │
│   │   │                                                                                  │   │   │
│   │   └──────────────────────────────────────────────────────────────────────────────────┘   │   │
│   │                                                                                          │   │
│   │   TASK HISTORY                                                                           │   │
│   │   ────────────                                                                           │   │
│   │                                                                                          │   │
│   │   ┌────────┬──────────────────────┬──────────────┬──────────┬───────────────────────┐    │   │
│   │   │ STATUS │ TASK                 │ HORIZON      │ TIME     │ RESULT                │    │   │
│   │   ├────────┼──────────────────────┼──────────────┼──────────┼───────────────────────┤    │   │
│   │   │  ✓     │ get_connector_status │ Chicago      │ 14:23:05 │ 4 connectors OK       │    │   │
│   │   ├────────┼──────────────────────┼──────────────┼──────────┼───────────────────────┤    │   │
│   │   │  ✓     │ set_connector_config │ Detroit      │ 14:22:58 │ Config applied        │    │   │
│   │   ├────────┼──────────────────────┼──────────────┼──────────┼───────────────────────┤    │   │
│   │   │  ⏳    │ restart_connector    │ Austin       │ 14:23:10 │ Pending check-in      │    │   │
│   │   └────────┴──────────────────────┴──────────────┴──────────┴───────────────────────┘    │   │
│   │                                                                                          │   │
│   │   Issue tasks manually and track their execution in real time.                           │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   OPERATOR WORKFLOW                                                                              │
│   ─────────────────                                                                              │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────┐   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │    ┌──────────┐         ┌──────────┐         ┌──────────┐         ┌──────────────────┐   │   │
│   │    │          │         │          │         │          │         │                  │   │   │
│   │    │ OPERATOR │────────▶│ ZENITH   │────────▶│ HORIZON  │────────▶│ DIME CONNECTORS  │   │   │
│   │    │          │         │ UX       │         │ SERVER   │         │ GATEWAYS         │   │   │
│   │    │  views   │         │          │         │          │         │                  │   │   │
│   │    │  edits   │         │ queries  │         │ forwards │         │ Factory Chicago  │   │   │
│   │    │  issues  │         │ Zenith   │         │ check-in │         │ Plant Detroit    │   │   │
│   │    │  tasks   │         │ API      │         │ tasks    │         │ Warehouse Austin │   │   │
│   │    │          │         │          │         │          │         │ Lab Singapore    │   │   │
│   │    └──────────┘         └──────────┘         └──────────┘         └──────────────────┘   │   │
│   │                                                                                          │   │
│   │                                                                                          │   │
│   │    Features:   Configurable polling rates per view (dashboard fast, config slow)         │   │
│   │                Dark industrial theme for control rooms and operations centers            │   │
│   │                Cross-platform: Windows, macOS, Linux (Tauri + React)                     │   │
│   │                                                                                          │   │
│   └──────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON28-edge-to-cloud.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        28 — Edge to Cloud                             │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          The big picture. Three tiers                   │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          working together.                              │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THREE-TIER ARCHITECTURE                                                                        │
│   ───────────────────────                                                                        │
│                                                                                                  │
│   Data flows UP. Commands flow DOWN. Three tiers, one platform.                                  │
│                                                                                                  │
│              COMMANDS ▼                              ▲ DATA                                      │
│              (config, tasks, firmware)               (telemetry, status, metrics)                │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │   TIER 3 — CLOUD                                                                       │     │
│   │                                                                                        │     │
│   │   ┌─────────────────────────────────┐    ┌─────────────────────────────────┐           │     │
│   │   │       DIME ZENITH               │    │       ZENITH UX                 │           │     │
│   │   │                                 │    │                                 │           │     │
│   │   │  Centralized fleet management   │    │  Desktop app for operators      │           │     │
│   │   │  MongoDB-backed config store    │◄──▶│  Fleet-wide dashboard           │           │     │
│   │   │  Health monitoring + stale det  │    │  Push config, view health       │           │     │
│   │   │  REST API + Web dashboard       │    │  Manage firmware updates        │           │     │
│   │   │                                 │    │                                 │           │     │
│   │   │  Scale: 1 instance globally     │    │  Connects via REST + WebSocket  │           │     │
│   │   │                                 │    │                                 │           │     │
│   │   └─────────────────┬───────────────┘    └─────────────────────────────────┘           │     │
│   │                     │                                                                  │     │
│   └─────────────────────┼──────────────────────────────────────────────────────────────────┘     │
│                         │                                                                        │
│                         │  Horizon PULLS from Zenith                                             │
│                         │  (no inbound firewall rules)                                           │
│                         │  Config, firmware, commands                                            │
│                         ▼                                                                        │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │   TIER 2 — GATEWAY                                                                     │     │
│   │                                                                                        │     │
│   │   ┌─────────────────────────────────────────────────────────────────────────────────┐  │     │
│   │   │       DIME HORIZON  (one per site: factory, plant, warehouse)                   │  │     │
│   │   │                                                                                 │  │     │
│   │   │  Site-level connector manager        Pull-based bridge to Zenith                │  │     │
│   │   │  Manages all local Connectors        Executes remote tasks + updates            │  │     │
│   │   │  Pushes config down to edge          Reports health + status upstream           │  │     │
│   │   │                                                                                 │  │     │
│   │   │  Scale: ~50 Horizons across all sites                                           │  │     │
│   │   │                                                                                 │  │     │
│   │   └──────────────────────────────┬──────────────────────────────────────────────────┘  │     │
│   │                                  │                                                     │     │
│   └──────────────────────────────────┼─────────────────────────────────────────────────────┘     │
│                                      │                                                           │
│                                      │  Horizon pushes config + commands                         │
│                                      │  to local Connectors                                      │
│                                      ▼                                                           │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │   TIER 1 — EDGE                                                                        │     │
│   │                                                                                        │     │
│   │   ┌───────────────┐  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐           │     │
│   │   │DIME CONNECTOR │  │DIME CONNECTOR │  │DIME CONNECTOR │  │DIME CONNECTOR │  ...      │     │
│   │   │               │  │               │  │               │  │               │           │     │
│   │   │ OPC-UA, S7,   │  │ MQTT, AMQP,   │  │ Modbus, FANUC │  │ HTTP, SNMP,   │           │     │
│   │   │ EtherNet/IP   │  │ SparkplugB    │  │ Beckhoff ADS  │  │ Custom Script │           │     │
│   │   │               │  │               │  │               │  │               │           │     │
│   │   │ Lua normalize │  │ Lua normalize │  │ Lua normalize │  │ Lua normalize │           │     │
│   │   │ MQTT/SHDR/HTTP│  │ MQTT/SHDR/HTTP│  │ MQTT/SHDR/HTTP│  │ MQTT/SHDR/HTTP│           │     │
│   │   └───────┬───────┘  └───────┬───────┘  └───────┬───────┘  └───────┬───────┘           │     │
│   │           │                  │                  │                  │                   │     │
│   │           ▼                  ▼                  ▼                  ▼                   │     │
│   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                   │     │
│   │   │  PLC / CNC  │  │  Sensors /  │  │  Robots /   │  │  Cameras /  │                   │     │
│   │   │  Controllers│  │  Gateways   │  │  Actuators  │  │  Meters     │                   │     │
│   │   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘                   │     │
│   │                                                                                        │     │
│   │   Scale: ~500 Connectors, ~50,000 data points                                          │     │
│   │   Platforms: Windows, Linux, ARM64, Docker                                             │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DATA FLOWS UP                                                                                  │
│   ─────────────                                                                                  │
│                                                                                                  │
│   Every data point travels from physical device to cloud dashboard:                              │
│                                                                                                  │
│    ┌─────────┐      ┌───────────┐      ┌───────────┐      ┌─────────┐      ┌───────────┐         │
│    │ DEVICE  │      │ CONNECTOR │      │  HORIZON  │      │ ZENITH  │      │ ZENITH UX │         │
│    │         │─────▶│           │─────▶│           │─────▶│         │─────▶│           │         │
│    │ PLC,    │ OPC  │ Read,     │ MQTT │ Aggregate │ HTTPS│ Store,  │ WS   │ Dashboard │         │
│    │ sensor, │ S7   │ transform,│ SHDR │ forward,  │ pull │ monitor,│ REST │ for ops   │         │
│    │ robot   │ Mod  │ publish   │ HTTP │ report    │      │ alert   │      │ team      │         │
│    └─────────┘      └───────────┘      └───────────┘      └─────────┘      └───────────┘         │
│                                                                                                  │
│    50+ protocols     Lua scripts         Site gateway       MongoDB          Fleet-wide          │
│    on factory floor  normalize data      bridges edge       stores all       monitoring          │
│                                          to cloud           state            and control         │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   COMMANDS FLOW DOWN                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   Configuration changes and tasks propagate from cloud to edge:                                  │
│                                                                                                  │
│    ┌───────────┐      ┌─────────┐      ┌───────────┐      ┌───────────┐                          │
│    │ ZENITH UX │      │ ZENITH  │      │  HORIZON  │      │ CONNECTOR │                          │
│    │           │─────▶│         │─────▶│           │─────▶│           │                          │
│    │ Operator  │ REST │ Queue   │ pull │ Apply     │ push │ Restart   │                          │
│    │ changes   │      │ command │      │ locally,  │      │ with new  │                          │
│    │ config    │      │ for     │      │ push to   │      │ config    │                          │
│    │           │      │ Horizon │      │ connector │      │           │                          │
│    └───────────┘      └─────────┘      └───────────┘      └───────────┘                          │
│                                                                                                  │
│    Operator publishes   Zenith holds    Horizon pulls on    Connector gets                       │
│    new YAML config      until Horizon   next check-in       new config and                       │
│    via Zenith UX        checks in       and applies         restarts cleanly                     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   ENTERPRISE SCALE                                                                               │
│   ────────────────                                                                               │
│                                                                                                  │
│    ┌──────────┐                                                                                  │
│    │  ZENITH  │  1 instance                                                                      │
│    └────┬─────┘                                                                                  │
│         │                                                                                        │
│    ┌────┴──────────────────────────────────────────────────────┐                                 │
│    │              ~50 Horizons (one per site)                  │                                 │
│    │  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐  ┌────────┐  │                                 │
│    │  │Site #1 │ │Site #2 │ │Site #3 │ │  ...   │  │Site #50│  │                                 │
│    │  └───┬────┘ └───┬────┘ └───┬────┘ └────────┘  └───┬────┘  │                                 │
│    └──────┼──────────┼──────────┼──────────────────────┼───────┘                                 │
│           │          │          │                      │                                         │
│      10 connectors   │     10 connectors           10 connectors                                 │
│      100 data pts    │     100 data pts            100 data pts                                  │
│                 10 connectors                                                                    │
│                 100 data pts                                                                     │
│                                                                                                  │
│    Total:  1 Zenith  x  50 Horizons  x  10 Connectors  x  100 Items  =  50,000 data points       │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON29-performance-tuning.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        29 — Performance Tuning                        │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Optimize for throughput, latency,              │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          or resource constraints.                       │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   RING BUFFER SIZING                                                                             │
│   ──────────────────                                                                             │
│                                                                                                  │
│   The ring buffer is the heart of DIME. Size it correctly for your workload.                     │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   app:                                                                                 │     │
│   │     ring_buffer: !!int 4096     ◀── Must be a power of 2                               │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   VALID SIZES                    WHY POWER OF 2?                                       │     │
│   │   ───────────                    ────────────────                                      │     │
│   │   1024  — low-memory edge        The Disruptor pattern uses                            │     │
│   │   2048  — constrained ARM        bitwise AND for index wrapping:                       │     │
│   │   4096  — default (recommended)    index = sequence & (size - 1)                       │     │
│   │   8192  — high-throughput         This is faster than modulo and                       │     │
│   │   16384 — burst-heavy workloads   requires power-of-2 size.                            │     │
│   │   32768 — maximum burst capacity                                                       │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   SIZE TRADEOFFS                                                                       │     │
│   │   ──────────────                                                                       │     │
│   │                                                                                        │     │
│   │   Larger buffer:                          Smaller buffer:                              │     │
│   │     + More burst absorption capacity        + Lower memory footprint                   │     │
│   │     + Tolerates slow sinks longer            + Lower latency (tighter loop)            │     │
│   │     - Higher memory usage                    - Less burst headroom                     │     │
│   │     - Slightly higher latency                - Backpressure sooner                     │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   SCAN INTERVAL TUNING                                                                           │
│   ────────────────────                                                                           │
│                                                                                                  │
│   scan_interval controls how often a source reads from its device. Choose wisely.                │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   INTERVAL        USE CASE                    CPU IMPACT       NOTES                   │     │
│   │   ────────        ────────                    ──────────       ─────                   │     │
│   │    50ms           Vibration / high-speed       ████████        Device must support it  │     │
│   │   100ms           Real-time dashboards         ██████          10 reads/sec per item   │     │
│   │   500ms           Fast monitoring              ████            Good balance            │     │
│   │  1000ms           Typical monitoring           ███             Default, recommended    │     │
│   │  5000ms           Slow-changing data           █               Temperature, humidity   │     │
│   │ 30000ms           Environmental sensors        ▏               Energy meters, weather  │     │
│   │ 60000ms           Config polling               ▏               Check for changes only  │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   Combine with execute_every for per-item throttling:                                  │     │
│   │                                                                                        │     │
│   │   scan_interval: !!int 1000                                                            │     │
│   │   items:                                                                               │     │
│   │     - name: fast_temp                                                                  │     │
│   │       execute_every: !!int 1      ── Every cycle = 1 Hz                                │     │
│   │     - name: slow_humidity                                                              │     │
│   │       execute_every: !!int 30     ── Every 30th cycle = once per 30s                   │     │
│   │                                                                                        │     │
│   │   One source, two items, two different effective rates.                                │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   RBE IMPACT ON RING BUFFER PRESSURE                                                             │
│   ──────────────────────────────────                                                             │
│                                                                                                  │
│   Report By Exception dramatically reduces messages flowing through the ring buffer.             │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   100 items, 1-second scan, typical industrial data:                                   │     │
│   │                                                                                        │     │
│   │   WITHOUT RBE   ████████████████████████████████████████████  6,000 msg/min            │     │
│   │   WITH RBE      ███                                             300 msg/min            │     │
│   │                                                                                        │     │
│   │   95% reduction = ring buffer stays nearly empty = no backpressure risk.               │     │
│   │                                                                                        │     │
│   │   Enable RBE on every source unless you have a specific reason not to:                 │     │
│   │     rbe: !!bool true                                                                   │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   DOUBLE-BUFFER PATTERN                                                                          │
│   ─────────────────────                                                                          │
│                                                                                                  │
│   Sinks use a double-buffer to decouple ring buffer speed from write speed.                      │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │                          RING BUFFER (producer side)                                   │     │
│   │                                  │                                                     │     │
│   │                           SinkDispatcher                                               │     │
│   │                           pushes messages                                              │     │
│   │                                  │                                                     │     │
│   │                                  ▼                                                     │     │
│   │                      ┌─────────────────────┐                                           │     │
│   │                      │  RECEIVE BUFFER  [A]│◄── Messages accumulate here               │     │
│   │                      └──────────┬──────────┘                                           │     │
│   │                                 │                                                      │     │
│   │                          ATOMIC SWAP                                                   │     │
│   │                      (on sink timer tick)                                              │     │
│   │                                 │                                                      │     │
│   │                      ┌──────────┴──────────┐                                           │     │
│   │                      │  WRITE BUFFER    [B]│──── Sink writes from here                 │     │
│   │                      └─────────────────────┘                                           │     │
│   │                                 │                                                      │     │
│   │                                 ▼                                                      │     │
│   │                          DESTINATION                                                   │     │
│   │                      (InfluxDB, MQTT, etc.)                                            │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   Why this matters:                                                                    │     │
│   │     - Ring buffer is never blocked by slow sinks                                       │     │
│   │     - Receive buffer fills while write buffer drains                                   │     │
│   │     - Atomic swap is O(1) — just pointer exchange                                      │     │
│   │     - Each sink has its own buffer pair — full isolation                               │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   BACKPRESSURE                                                                                   │
│   ────────────                                                                                   │
│                                                                                                  │
│   When a slow sink cannot keep up, the receive buffer grows.                                     │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   Normal operation:                                                                    │     │
│   │                                                                                        │     │
│   │   Sources ───▶ Ring Buffer ───▶ Sink Receive Buffer ───▶ Sink Write ───▶ Destination   │     │
│   │                                  [small, drains fast]                                  │     │
│   │                                                                                        │     │
│   │   Backpressure (slow sink):                                                            │     │
│   │                                                                                        │     │
│   │   Sources ───▶ Ring Buffer ───▶ Sink Receive Buffer ──X──▶ Slow Sink ···▶ Destination  │     │
│   │                                  [growing!]              write takes too long          │     │
│   │                                                                                        │     │
│   │   Symptoms:                                                                            │     │
│   │     - Memory usage grows steadily                                                      │     │
│   │     - LastLoopMs increases on sinks (GET /status)                                      │     │
│   │     - Destination falls behind real-time                                               │     │
│   │                                                                                        │     │
│   │   Solutions:                                                                           │     │
│   │     1. Enable RBE to reduce message volume (rbe: !!bool true)                          │     │
│   │     2. Increase sink scan_interval to batch more writes                                │     │
│   │     3. Use execute_every to throttle low-priority items                                │     │
│   │     4. Check destination latency (network, database load)                              │     │
│   │     5. Add include_filter to sink — only receive what you need                         │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   FINDING BOTTLENECKS WITH /STATUS METRICS                                                       │
│   ────────────────────────────────────────                                                       │
│                                                                                                  │
│   Every connector reports timing data via GET /status. Use it to find what is slow.              │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   GET http://localhost:9999/status                                                     │     │
│   │                                                                                        │     │
│   │   Key metrics per source connector:                                                    │     │
│   │                                                                                        │     │
│   │   ┌──────────── One Scan Cycle ──────────────────────────────────────────┐             │     │
│   │   │                                                                      │             │     │
│   │   │  ┌────────────┐  ┌─────────────┐  ┌──────────┐  ┌───────────────┐    │             │     │
│   │   │  │ LastReadMs │  │ LastScriptMs│  │  RBE     │  │ Publish to    │    │             │     │
│   │   │  │ (device)   │  │ (Lua/Py)    │  │  check   │  │ ring buffer   │    │             │     │
│   │   │  └────────────┘  └─────────────┘  └──────────┘  └───────────────┘    │             │     │
│   │   │                                                                      │             │     │
│   │   │  ◄──────────────── LastLoopMs ─────────────────────────────────────▶ │             │     │
│   │   │                                                                      │             │     │
│   │   └──────────────────────────────────────────────────────────────────────┘             │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   WHAT TO LOOK FOR                                                                     │     │
│   │   ────────────────                                                                     │     │
│   │                                                                                        │     │
│   │   LastLoopMs > scan_interval      ── Source cannot keep up! Reduce items or increase   │     │
│   │                                      scan_interval.                                    │     │
│   │                                                                                        │     │
│   │   MaximumReadMs >> MinimumReadMs ── Device has intermittent latency. Check network     │     │
│   │                                      or device load.                                   │     │
│   │                                                                                        │     │
│   │   LastScriptMs is high           ── Lua/Python script is too complex. Optimize or      │     │
│   │                                      move heavy logic to a downstream service.         │     │
│   │                                                                                        │     │
│   │   MessagesAttempted >> Accepted  ── RBE is working well. Most values unchanged.        │     │
│   │                                                                                        │     │
│   │   MessagesAttempted == Accepted  ── RBE not effective. Data volatile or RBE is off.    │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   LUA OPTIMIZATION TIPS                                                                          │
│   ─────────────────────                                                                          │
│                                                                                                  │
│   Keep scripts fast. Every millisecond in ScriptTime is a millisecond added to TotalLoopTime.    │
│                                                                                                  │
│     1. Avoid heavy computation  ──  Move complex math to a downstream service                    │
│     2. Cache globals locally    ──  local floor = math.floor (avoids table lookups)              │
│     3. Minimize string concat   ──  Use table.concat() for building strings                      │
│     4. No file I/O in scripts   ──  Disk reads block the scan loop                               │
│     5. No HTTP calls in scripts ──  Network latency kills scan timing                            │
│     6. Prefer emit() over return──  emit() gives you path control                                │
│                                                                                                  │
│   Target: ScriptTime < 1ms for most transforms.                                                  │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/CON30-troubleshooting.md
================================================================================

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                  │
│          ██████┐  ██┐ ███┐   ███┐ ███████┐        30 — Troubleshooting                           │
│          ██┌──██┐ ██│ ████┐ ████│ ██┌────┘                                                       │
│          ██│  ██│ ██│ ██┌████┌██│ █████┐          Fix it fast. The most common                   │
│          ██│  ██│ ██│ ██│└██┌┘██│ ██┌──┘          issues and how to solve them.                  │
│          ██████┌┘ ██│ ██│ └─┘ ██│ ███████┐                                                       │
│          └─────┘  └─┘ └─┘     └─┘ └──────┘                                                       │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   NO DATA FLOWING — 5-STEP CHECKLIST                                                             │
│   ──────────────────────────────────                                                             │
│                                                                                                  │
│   Work through these in order. Most problems are in step 1 or 2.                                 │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   ┌──────────────────────────────────────┐                                             │     │
│   │   │  1. Is the connector enabled?        │                                             │     │
│   │   │                                      │                                             │     │
│   │   │  Check: enabled: !!bool true         │                                             │     │
│   │   │  A missing !!bool tag means it is    │                                             │     │
│   │   │  a string "true", not boolean true.  │                                             │     │
│   │   └──────────────┬───────────────────────┘                                             │     │
│   │                  │ YES                                                                 │     │
│   │                  ▼                                                                     │     │
│   │   ┌──────────────────────────────────────┐                                             │     │
│   │   │  2. Is the source connected?         │                                             │     │
│   │   │                                      │                                             │     │
│   │   │  Check: GET /status                  │                                             │     │
│   │   │  Look for IsConnected = true         │                                             │     │
│   │   │  If false: wrong IP, port, or creds  │                                             │     │
│   │   └──────────────┬───────────────────────┘                                             │     │
│   │                  │ YES                                                                 │     │
│   │                  ▼                                                                     │     │
│   │   ┌──────────────────────────────────────┐                                             │     │
│   │   │  3. Are item addresses correct?      │                                             │     │
│   │   │                                      │                                             │     │
│   │   │  OPC-UA: ns=2;s=PLC.Tag              │                                             │     │
│   │   │  Modbus: 40001 (holding register)    │                                             │     │
│   │   │  S7: DB1.DBD0 (data block)           │                                             │     │
│   │   │  Check device docs for exact syntax. │                                             │     │
│   │   └──────────────┬───────────────────────┘                                             │     │
│   │                  │ YES                                                                 │     │
│   │                  ▼                                                                     │     │
│   │   ┌──────────────────────────────────────┐                                             │     │
│   │   │  4. Is RBE hiding unchanged values?  │                                             │     │
│   │   │                                      │                                             │     │
│   │   │  Temporarily set: rbe: !!bool false  │                                             │     │
│   │   │  If data appears, the value is not   │                                             │     │
│   │   │  changing. RBE is working correctly. │                                             │     │
│   │   └──────────────┬───────────────────────┘                                             │     │
│   │                  │ YES                                                                 │     │
│   │                  ▼                                                                     │     │
│   │   ┌──────────────────────────────────────┐                                             │     │
│   │   │  5. Are sink filters too restrictive?│                                             │     │
│   │   │                                      │                                             │     │
│   │   │  Check include_filter and            │                                             │     │
│   │   │  exclude_filter regex patterns.      │                                             │     │
│   │   │  Try removing filters temporarily.   │                                             │     │
│   │   │  Add a Console sink with no filters  │                                             │     │
│   │   │  to verify data is in the ring buffer│                                             │     │
│   │   └──────────────────────────────────────┘                                             │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   CONNECTOR KEEPS FAULTING                                                                       │
│   ────────────────────────                                                                       │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   ┌─────────────────┐        ┌─────────────────┐        ┌─────────────────┐            │     │
│   │   │ Check           │        │ Verify          │        │ Look at         │            │     │
│   │   │ FaultMessage    │───────▶│ network &       │───────▶│ FaultCount      │            │     │
│   │   │                 │        │ credentials     │        │                 │            │     │
│   │   │ GET /status     │        │                 │        │ Growing = the   │            │     │
│   │   │ IsFaulted: true │        │ Ping device?    │        │ device keeps    │            │     │
│   │   │ FaultMessage:   │        │ Firewall open?  │        │ dropping. Check │            │     │
│   │   │ "timeout"       │        │ Creds correct?  │        │ device health.  │            │     │
│   │   └─────────────────┘        └─────────────────┘        └─────────────────┘            │     │
│   │                                                                                        │     │
│   │   DIME auto-retries on fault. If FaultCount stabilizes, the device recovered.          │     │
│   │   If FaultCount keeps climbing, the root cause is external (network, device, creds).   │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   LUA SCRIPT ERRORS                                                                              │
│   ─────────────────                                                                              │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   Symptoms:                     Diagnosis:                                             │     │
│   │   ─────────                     ──────────                                             │     │
│   │   - Data stops or is wrong      1. Check LastScriptMs via GET /status                  │     │
│   │   - FaultMessage mentions Lua   2. Check FaultMessage for Lua stack trace              │     │
│   │   - ScriptTime spikes           3. Add Console sink to see raw vs. transformed data    │     │
│   │                                                                                        │     │
│   │   Common Lua mistakes:                                                                 │     │
│   │   ────────────────────                                                                 │     │
│   │   - Nil access: result is nil when device returns nothing                              │     │
│   │   - Type mismatch: tonumber() on a string that is not a number                         │     │
│   │   - Missing return: script must return a value or use emit()                           │     │
│   │   - Infinite loop: while true without break kills the scan cycle                       │     │
│   │                                                                                        │     │
│   │   Debugging strategy:                                                                  │     │
│   │   ───────────────────                                                                  │     │
│   │   1. Add a Console sink with no filters — see everything in stdout                     │     │
│   │   2. Simplify script to just "return result" — confirm raw data arrives                │     │
│   │   3. Add logic back one line at a time                                                 │     │
│   │   4. Use emit('debug/info', value) for printf-style debugging                          │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   COMMON YAML MISTAKES                                                                           │
│   ────────────────────                                                                           │
│                                                                                                  │
│   YAML looks simple, but these gotchas trip up everyone.                                         │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   MISTAKE #1: Missing type tags                                                        │     │
│   │                                                                                        │     │
│   │     WRONG:   rbe: true              ── YAML parses as string "true"                    │     │
│   │     WRONG:   scan_interval: 1000    ── YAML parses as string "1000"                    │     │
│   │     RIGHT:   rbe: !!bool true       ── Boolean true                                    │     │
│   │     RIGHT:   scan_interval: !!int 1000  ── Integer 1000                                │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   MISTAKE #2: Indentation errors                                                       │     │
│   │                                                                                        │     │
│   │     WRONG:   sources:               ── items must be indented under the source         │     │
│   │              - name: plc1                                                              │     │
│   │              items:                  ── same level as name = sibling, not child!       │     │
│   │                                                                                        │     │
│   │     RIGHT:   sources:                                                                  │     │
│   │                - name: plc1                                                            │     │
│   │                  items:              ── indented under name = child of source          │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   MISTAKE #3: Anchor / alias mismatches                                                │     │
│   │                                                                                        │     │
│   │     Anchor defined:   &my_defaults { scan_interval: !!int 1000 }                       │     │
│   │     Alias used:       <<: *my_default    ── typo! missing 's'                          │     │
│   │                                                                                        │     │
│   │     YAML will silently fail or throw a cryptic error.                                  │     │
│   │     Always double-check anchor names match exactly.                                    │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   MISTAKE #4: Special characters in strings                                            │     │
│   │                                                                                        │     │
│   │     WRONG:   address: ns=2;s=PLC:Tag     ── colon may confuse YAML parser              │     │
│   │     RIGHT:   address: "ns=2;s=PLC:Tag"   ── quote strings with special chars           │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   THE CONSOLE SINK — YOUR BEST DEBUGGING FRIEND                                                  │
│   ──────────────────────────────────────────────                                                 │
│                                                                                                  │
│   Add a Console sink during development. It prints every message to stdout.                      │
│                                                                                                  │
│   ┌────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                                                                                        │     │
│   │   sinks:                                                                               │     │
│   │     - name: debug                                                                      │     │
│   │       connector: Console              ◀── Prints to stdout                             │     │
│   │       # No include/exclude filters = see everything                                    │     │
│   │                                                                                        │     │
│   │   Output:                                                                              │     │
│   │   ───────                                                                              │     │
│   │   plc1/Temperature    72.5    1708300800000                                            │     │
│   │   plc1/Pressure       14.7    1708300800001                                            │     │
│   │   plc1/$SYSTEM/IsConnected    True    1708300800100                                    │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   Use with filters to isolate one source:                                              │     │
│   │                                                                                        │     │
│   │   sinks:                                                                               │     │
│   │     - name: debug_plc1                                                                 │     │
│   │       connector: Console                                                               │     │
│   │       include_filter: plc1/.*         ◀── Only plc1 messages                           │     │
│   │                                                                                        │     │
│   │                                                                                        │     │
│   │   THREE KEY DIAGNOSTICS                                                                │     │
│   │   ─────────────────────                                                                │     │
│   │                                                                                        │     │
│   │   ┌─────────────────────┐  ┌─────────────────────┐  ┌─────────────────────┐            │     │
│   │   │ Console sink        │  │ GET /status         │  │ GET /config/yaml    │            │     │
│   │   │                     │  │                     │  │                     │            │     │
│   │   │ See what data is    │  │ See connector state,│  │ See what DIME       │            │     │
│   │   │ flowing through     │  │ fault info, timing  │  │ actually loaded     │            │     │
│   │   │ the ring buffer.    │  │ metrics, counts.    │  │ (after merge).      │            │     │
│   │   │                     │  │                     │  │                     │            │     │
│   │   │ "Is data there?"    │  │ "Is it healthy?"    │  │ "Is config right?"  │            │     │
│   │   └─────────────────────┘  └─────────────────────┘  └─────────────────────┘            │     │
│   │                                                                                        │     │
│   │   Remove the Console sink before deploying to production.                              │     │
│   │                                                                                        │     │
│   └────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                  │
│  ──────────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                                  │
│   QUICK REFERENCE — OTHER COMMON ISSUES                                                          │
│   ─────────────────────────────────────                                                          │
│                                                                                                  │
│   ┌──────────────────────────────────────────────────────────────────────────────────────┐       │
│   │                                                                                      │       │
│   │   PROBLEM                         LIKELY CAUSE              FIX                      │       │
│   │   ───────                         ────────────              ───                      │       │
│   │   Messages not reaching sink      Path format wrong         Check source_name/item   │       │
│   │                                   or strip_path_prefix      Verify include_filter    │       │
│   │                                                                                      │       │
│   │   High CPU usage                  scan_interval too low     Increase to 1000ms+      │       │
│   │                                   Script too complex        Simplify Lua, cache vars │       │
│   │                                                                                      │       │
│   │   Memory growing                  ring_buffer too large     Reduce to 4096           │       │
│   │                                   Sink not consuming        Check sink connection    │       │
│   │                                   RBE off + fast scan       Enable RBE               │       │
│   │                                                                                      │       │
│   │   Duplicate messages              RBE off on source         Set rbe: !!bool true     │       │
│   │                                   Multiple sinks w/o filter Add include_filter       │       │
│   │                                                                                      │       │
│   │   Stale data in cache             Source disconnected       Check IsConnected        │       │
│   │                                   Device offline            Check FaultMessage       │       │
│   │                                                                                      │       │
│   └──────────────────────────────────────────────────────────────────────────────────────┘       │
│                                                                                                  │
│   When all else fails: GET /status is the single most useful diagnostic.                         │
│                                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

================================================================================
FILE: content/EX01-basic-counter.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX01 — BASIC COUNTER                                                 DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  The "hello world" of DIME. A Lua script source increments a counter every second      │
  │  and publishes to three sinks: Console, HTTP Server, and WebSocket Server.             │
  │  Single-file YAML config — the simplest possible DIME integration.                     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌────────────────────┐
       │   Script Source    │         ┌─────────────────┐
       │                    │    ┌───▶│  Console Sink   │  stdout
       │  counter = 0       │    │    └─────────────────┘
       │  counter = counter │    │
       │    + 1             │    │    ┌─────────────────┐
       │  return counter    ├────┼───▶│  HTTP Server    │  http://localhost:8080
       │                    │    │    └─────────────────┘
       │  scan: 1000ms      │    │
       │  RBE: true         │    │    ┌─────────────────┐
       └────────────────────┘    └───▶│  WebSocket Srv  │  ws://0.0.0.0:8092
                                      └─────────────────┘
              SOURCE                    RING BUFFER                SINKS
         (Lua scripting)             (4096 slots)           (3 destinations)

  CONFIGURATION — main.yaml                                                    [single file]
  ─────────────────────────

  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/       # Admin API                           │
  │    ws_server_uri: ws://127.0.0.1:9998/            # Admin WebSocket                    │
  │                                                                                        │
  │  sinks:                                                                                │
  │    - name: consoleSink                                                                 │
  │      enabled: !!bool true                                                              │
  │      scan_interval: !!int 1000                                                         │
  │      connector: console                           # Prints to stdout                   │
  │                                                                                        │
  │    - name: httpServerSink                                                              │
  │      enabled: !!bool true                                                              │
  │      scan_interval: !!int 1000                                                         │
  │      connector: httpServer                        # REST endpoint                      │
  │      uri: http://localhost:8080/                                                       │
  │      use_sink_transform: !!bool false                                                  │
  │                                                                                        │
  │    - name: websocketServerSink                                                         │
  │      connector: websocketServer                   # Real-time push                     │
  │      uri: ws://0.0.0.0:8092/                                                           │
  │      use_sink_transform: !!bool false                                                  │
  │                                                                                        │
  │  sources:                                                                              │
  │    - name: scriptSource                                                                │
  │      enabled: !!bool true                                                              │
  │      scan_interval: !!int 1000                    # Poll every 1 second                │
  │      connector: script                            # Lua script connector               │
  │      rbe: !!bool true                             # Report By Exception                │
  │      init_script: counter = 0                     # Runs once at startup               │
  │      items:                                                                            │
  │        - name: Counter1                                                                │
  │          enabled: !!bool true                                                          │
  │          script: |                                # Runs every scan_interval           │
  │            counter = counter + 1                                                       │
  │            return counter                                                              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • Script Connector — Lua scripting without external hardware. Ideal for testing,      │
  │    simulation, and data generation. init_script runs once, item scripts run every      │
  │    scan_interval.                                                                      │
  │                                                                                        │
  │  • Three Sink Types — Console for debugging, HTTP for REST API consumers, WebSocket    │
  │    for real-time push to browser dashboards.                                           │
  │                                                                                        │
  │  • Report By Exception (RBE) — When rbe: true, the source only publishes when the      │
  │    value changes. The counter increments every cycle so every scan produces output.    │
  │                                                                                        │
  │  • Ring Buffer — All sources publish to a shared 4096-slot Disruptor ring buffer.      │
  │    Every sink gets its own independent reader. No sink blocks another.                 │
  │                                                                                        │
  │  • YAML Types — !!int and !!bool tags ensure correct type coercion. Without them,      │
  │    "true" is a string, not a boolean.                                                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX02-horizon-zenith-minimum.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX02 — HORIZON & ZENITH MINIMUM                                     DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ──────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Minimum viable Horizon/Zenith configuration. A 5-axis CNC machine simulator           │
  │  generates real-time position data (X, Y, Z, A, B axes) via Lua scripting, then        │
  │  publishes to HTTP, WebSocket, and a static WebServer for browser visualization.       │
  │  Multi-file YAML with anchors (&/*) — the standard DIME modular config pattern.        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌─────────────────────────┐
      │   Machine Simulator     │          ┌──────────────────┐
      │   (Script connector)    │     ┌───▶│  HTTP Server     │  http://0.0.0.0:8080
      │                         │     │    │  (REST endpoint) │
      │   5-axis CNC state      │     │    └──────────────────┘
      │   machine: face mill    │     │
      │   + chamfer cycle       │     │    ┌──────────────────┐
      │                         ├─────┼───▶│  WebSocket Srv   │  ws://0.0.0.0:8092
      │   Items:                │     │    │  (real-time)     │
      │   · XPositionCurrent    │     │    └──────────────────┘
      │   · YPositionCurrent    │     │
      │   · ZPositionCurrent    │     │    ┌──────────────────┐
      │   · ARotationCurrent    │     └───▶│  Web Server      │  http://0.0.0.0:8090
      │   · BRotationCurrent    │          │  (static files)  │
      │                         │          └──────────────────┘
      │   scan: 20ms (50Hz)     │
      └─────────────────────────┘
              SOURCE                       RING BUFFER                SINKS
        (Lua state machine)              (4096 slots)           (3 destinations)

  CONFIGURATION — 5 files                                                      [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── main.yaml ──────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://0.0.0.0:9999/                                               │
  │    ws_server_uri: ws://0.0.0.0:9998/                                                   │
  │                                                                                        │
  │  sources:                                                                              │
  │    - *machineSimulator                            # Anchor from machineSimulator.yaml  │
  │                                                                                        │
  │  sinks:                                                                                │
  │    - *httpServerSink                              # Anchor from httpServerSink.yaml    │
  │    - *websocketSink                               # Anchor from websocketSink.yaml     │
  │    - *webServerSink                               # Anchor from webServerSink.yaml     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── machineSimulator.yaml ──────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  machineSimulator: &machineSimulator                                                   │
  │    name: machineSimulator                                                              │
  │    connector: Script                                                                   │
  │    scan_interval: !!int 20                        # 50Hz for smooth animation          │
  │    rbe: !!bool false                              # Always send (animation needs it)   │
  │    lang_script: Lua                                                                    │
  │    sink:                                                                               │
  │      transform:                                                                        │
  │        type: script                                                                    │
  │        template: Message.Data                                                          │
  │    init_script: |                                                                      │
  │      -- Initialize 5-axis CNC position simulator                                       │
  │      -- Face Milling and Chamfer Operations                                            │
  │      math.randomseed(os.time())                                                        │
  │      -- OPERATION states: RAPID_TO_START, PLUNGE, FACE_MILLING,                        │
  │      --   RETRACT, CHAMFER_POSITION, CHAMFER_CUT, CYCLE_COMPLETE                       │
  │      set("./current_operation", 1)                                                     │
  │      set("./XPosition", 0.0)                                                           │
  │      set("./YPosition", 0.0)                                                           │
  │      set("./ZPosition", 100.0)                    # Start at safe height               │
  │      set("./ARotation", 0.0)                                                           │
  │      set("./BRotation", 0.0)                                                           │
  │    enter_script: |                                                                     │
  │      -- State machine: smooth interpolation between target positions                   │
  │      -- Cycles through: rapid → plunge → face mill → retract → chamfer → repeat        │
  │      -- ~300 lines of Lua state machine logic (see full file)                          │
  │    items:                                                                              │
  │      - name: XPositionCurrent                                                          │
  │        script: return cache("./XPosition") or 0.0                                      │
  │      - name: YPositionCurrent                                                          │
  │        script: return cache("./YPosition") or 0.0                                      │
  │      - name: ZPositionCurrent                                                          │
  │        script: return cache("./ZPosition") or 0.0                                      │
  │      - name: ARotationCurrent                                                          │
  │        script: return cache("./ARotation") or 0.0                                      │
  │      - name: BRotationCurrent                                                          │
  │        script: return cache("./BRotation") or 0.0                                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── httpServerSink.yaml ────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  httpServerSink: &httpServerSink                                                       │
  │    name: httpServerSink                                                                │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: HTTPServer                                                               │
  │    uri: http://0.0.0.0:8080/                                                           │
  │    use_sink_transform: !!bool false                                                    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── websocketSink.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  websocketSink: &websocketSink                                                         │
  │    name: websocketSink                                                                 │
  │    connector: WebsocketServer                                                          │
  │    uri: ws://0.0.0.0:8092/                                                             │
  │    scan_interval: !!int 20                        # Match source for smooth updates    │
  │    use_sink_transform: !!bool false                                                    │
  │    include_filter:                                # Only send position data            │
  │      - "machineSimulator/XPositionCurrent"                                             │
  │      - "machineSimulator/YPositionCurrent"                                             │
  │      - "machineSimulator/ZPositionCurrent"                                             │
  │      - "machineSimulator/ARotationCurrent"                                             │
  │      - "machineSimulator/BRotationCurrent"                                             │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── webServerSink.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  webServerSink: &webServerSink                                                         │
  │    name: webServerSink                                                                 │
  │    connector: WebServer                                                                │
  │    uri: http://0.0.0.0:8090/                                                           │
  │    web_root: ./Configs/web                        # Serves static HTML/JS/CSS          │
  │    exclude_filter:                                                                     │
  │      - ".*"                                       # No data — static files only        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • Multi-File YAML — Each connector lives in its own file with an anchor (&name).      │
  │    The main.yaml uses aliases (*name) to compose the full config. DIME merges all      │
  │    YAML files in the directory automatically; main.yaml is loaded last.                │
  │                                                                                        │
  │  • YAML Anchors & Aliases — The &machineSimulator anchor defines the source config.    │
  │    In main.yaml, *machineSimulator references it. This lets you reuse connector        │
  │    definitions across multiple configs without duplication.                            │
  │                                                                                        │
  │  • High-Frequency Scanning — scan_interval: 20 gives 50Hz update rate. The WebSocket   │
  │    sink matches this rate for smooth browser animation. The HTTP sink stays at 1000ms  │
  │    since REST polling doesn't need 50Hz.                                               │
  │                                                                                        │
  │  • Include/Exclude Filters — The WebSocket sink uses include_filter to send only       │
  │    position items. The WebServer sink uses exclude_filter: ".*" to block all data      │
  │    (it only serves static files).                                                      │
  │                                                                                        │
  │  • Cache API — The Lua set()/cache() functions store and retrieve state between scan   │
  │    cycles. The state machine uses "./" prefix paths for source-scoped cache entries.   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX03-opcua-client-reads.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX03 — OPC-UA CLIENT READS                                             DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ──────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Reads OPC-UA nodes from an OPC server using username/password authentication.         │
  │  Demonstrates the OPC-UA source connector with namespace-based node addressing,        │
  │  per-item RBE overrides, and a Lua item_script that unwraps OPC DataValue objects.     │
  │  Multi-file YAML config with three files: source, sink, and main.                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   OPC-UA Source          │          ┌──────────────────┐
      │   (opcUaSource1)         │     ┌───▶│  Console Sink    │  stdout
      │                          │     │    │  (consoleSink1)  │
      │   server: localhost      │     │    └──────────────────┘
      │   port:   49320          ├─────┘
      │   auth:   user/pass      │
      │                          │
      │   Items:                 │
      │   · DateTime   (ns:2)    │
      │   · Random1-8  (ns:2)    │
      │   · Sine1-4    (ns:2)    │
      │   · Ramp1-8    (ns:2)    │
      │                          │
      │   scan: 2000ms           │
      └──────────────────────────┘
             SOURCE                        RING BUFFER               SINK
       (OPC-UA polling)                  (4096 slots)          (console output)

  CONFIGURATION — 3 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── opcUaSource1.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  opcUaSource1: &opcUaSource1                                                           │
  │    name: opcUaSource1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 2000                     # Poll every 2 seconds                │
  │    connector: OpcUA                              # OPC-UA client connector             │
  │    rbe: !!bool true                              # Source-level RBE default            │
  │    address: localhost                             # OPC server hostname                │
  │    port: !!int 49320                             # OPC server port                     │
  │    timeout: !!int 1000                           # Connection timeout (ms)             │
  │    anonymous: !!bool false                       # Require authentication              │
  │    username: chris                               # OPC-UA username                     │
  │    password: passwordpassword                    # OPC-UA password                     │
  │    init_script: ~                                # No init needed                      │
  │    item_script: |                                # Runs for EVERY item                 │
  │      return result.Value;                        # Unwrap OPC DataValue                │
  │    items:                                                                              │
  │      - name: DateTime                                                                  │
  │        enabled: !!bool true                                                            │
  │        rbe: !!bool true                          # Per-item RBE override               │
  │        namespace: !!int 2                        # OPC-UA namespace index              │
  │        address: _System._DateTime                # Node path within namespace          │
  │        script: ~                                 # Uses item_script above              │
  │      - name: Random1                                                                   │
  │        enabled: !!bool false                     # Disabled — enable as needed         │
  │        namespace: !!int 2                                                              │
  │        address: Simulation Examples.Functions.Random1                                  │
  │      - name: Sine1                                                                     │
  │        enabled: !!bool false                                                           │
  │        namespace: !!int 2                                                              │
  │        address: Simulation Examples.Functions.Sine1                                    │
  │      - name: Ramp1                                                                     │
  │        enabled: !!bool false                                                           │
  │        namespace: !!int 2                                                              │
  │        address: Simulation Examples.Functions.Ramp1                                    │
  │      # ... additional Random2-8, Sine2-4, Ramp2-8, User1-4 items follow                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── consoleSink1.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  consoleSink1: &consoleSink1                                                           │
  │    name: consoleSink1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # Write to console every 1s           │
  │    connector: Console                            # stdout output                       │
  │    use_sink_transform: !!bool true               # Apply sink transform                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/       # Admin REST API                      │
  │    ws_server_uri: ws://127.0.0.1:9998/            # Admin WebSocket                    │
  │                                                                                        │
  │  sinks:                                                                                │
  │    - *consoleSink1                               # Anchor from consoleSink1.yaml       │
  │                                                                                        │
  │  sources:                                                                              │
  │    - *opcUaSource1                               # Anchor from opcUaSource1.yaml       │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • OPC-UA Connector — DIME's OpcUA connector is a polling client that reads nodes      │
  │    from any OPC-UA server. Each item specifies a namespace index and node address.     │
  │    Supports both anonymous and authenticated connections.                              │
  │                                                                                        │
  │  • item_script vs script — item_script runs for EVERY item in the source and is        │
  │    ideal for common transformations. Each item can also have its own script that       │
  │    runs after item_script. Here, item_script unwraps the OPC DataValue wrapper to      │
  │    extract the raw .Value property.                                                    │
  │                                                                                        │
  │  • Namespace Addressing — OPC-UA nodes live in namespaces identified by integer        │
  │    index. Namespace 0 is the OPC standard namespace; higher indices (here ns:2) are    │
  │    vendor-specific. The address field holds the node's string identifier.              │
  │                                                                                        │
  │  • Per-Item RBE — RBE can be set at source level (applies to all items) and            │
  │    overridden per item. The DateTime item sets rbe: !!bool true explicitly, but        │
  │    since it changes every scan, every value is published anyway.                       │
  │                                                                                        │
  │  • Disabled Items — Setting enabled: !!bool false lets you pre-configure items         │
  │    without activating them. Useful for keeping a library of known tags that can be     │
  │    toggled on as needed without editing addresses.                                     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX04-siemens-s7-plc.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX04 — SIEMENS S7 PLC                                                  DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ──────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Reads inputs and outputs from a Siemens S7-1200 PLC using the native S7 protocol.    │
  │  Demonstrates the SiemensS7 source connector with bool data types, I/O addressing,    │
  │  rack/slot configuration, and system message filtering on the console sink.            │
  │  Multi-file YAML config with three files: source, sink, and main.                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   Siemens S7 Source      │          ┌──────────────────┐
      │   (s7Source1)            │     ┌───▶│  Console Sink    │  stdout
      │                          │     │    │  (console)       │
      │   PLC:  S7-1200          │     │    └──────────────────┘
      │   addr: 192.168.1.90     ├─────┘
      │   port: 102 (ISO-TSAP)   │
      │   rack: 0  slot: 0       │
      │                          │
      │   Items:                 │
      │   · input0   I0.0 bool   │
      │   · output0  Q0.0 bool   │
      │                          │
      │   scan: 500ms            │
      └──────────────────────────┘
             SOURCE                        RING BUFFER               SINK
       (S7 native protocol)              (4096 slots)          (console output)

  CONFIGURATION — 3 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── s7Source1.yaml ────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  s7Source1: &s7Source1                                                                 │
  │    name: s7Source1                                                                     │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 500                      # Poll every 500ms                    │
  │    connector: SiemensS7                          # Native S7 protocol connector        │
  │    rbe: !!bool true                              # Only publish on change              │
  │    type: S71200                                  # PLC family: S71200 or S71500        │
  │    address: 192.168.1.90                         # PLC IP address                      │
  │    port: !!int 102                               # ISO-TSAP port (always 102)          │
  │    rack: !!int 0                                 # Hardware rack number                │
  │    slot: !!int 0                                 # CPU slot number                     │
  │    init_script: ~                                # No init needed                      │
  │    enter_script: ~                               # No pre-scan logic                   │
  │    exit_script: ~                                # No post-scan logic                  │
  │    deinit_script: ~                              # No cleanup needed                   │
  │    items:                                                                              │
  │      - name: input0                                                                    │
  │        enabled: !!bool true                                                            │
  │        type: bool                                # PLC data type                       │
  │        address: I0.0                             # Input byte 0, bit 0                 │
  │      - name: output0                                                                   │
  │        enabled: !!bool true                                                            │
  │        type: bool                                # PLC data type                       │
  │        address: Q0.0                             # Output byte 0, bit 0                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # Write to console every 1s           │
  │    connector: Console                            # stdout output                       │
  │    exclude_filter:                                                                     │
  │      - s7Source1/$SYSTEM                         # Suppress system heartbeat msgs      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/       # Admin REST API                      │
  │    ws_server_uri: ws://127.0.0.1:9998/            # Admin WebSocket                    │
  │                                                                                        │
  │  sinks:                                                                                │
  │    - *console                                    # Anchor from console.yaml            │
  │                                                                                        │
  │  sources:                                                                              │
  │    - *s7Source1                                   # Anchor from s7Source1.yaml         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • S7 Protocol — The SiemensS7 connector uses the native S7comm protocol (ISO-TSAP     │
  │    on port 102). No OPC server required. Talks directly to the PLC CPU.                │
  │    Supports S71200 and S71500 via the type field.                                      │
  │                                                                                        │
  │  • I/O Addressing — S7 uses area-based addressing. I0.0 = Input byte 0 bit 0.          │
  │    Q0.0 = Output byte 0 bit 0. DB addresses use DB1.DBX0.0 format for data             │
  │    blocks. The type field (bool, int, word, real) tells DIME how to decode.            │
  │                                                                                        │
  │  • Rack and Slot — Physical hardware location of the CPU. For S7-1200 and S7-1500,     │
  │    rack=0 slot=0 is almost always correct. Older S7-300/400 may use slot=2.            │
  │                                                                                        │
  │  • System Message Filtering — Every source publishes $SYSTEM messages with             │
  │    connection health (IsConnected, IsFaulted, etc.). The exclude_filter on the         │
  │    console sink suppresses these so only data items are printed.                       │
  │                                                                                        │
  │  • Script Lifecycle — init/enter/exit/deinit scripts are all set to ~ (null) here,     │
  │    showing the full lifecycle hook surface. Use them when you need initialization,     │
  │    pre-scan logic, post-scan cleanup, or shutdown behavior.                            │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX05-modbus-tcp-registers.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX05 — MODBUS TCP REGISTERS                                            DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Reads Modbus TCP holding registers from a Banner Engineering device. Demonstrates     │
  │  the ModbusTCP source connector with register-type addressing, multi-register reads,   │
  │  and Lua struct library for binary decoding. The init_script loads the Lua struct      │
  │  library once at startup; item scripts extract register values.                        │
  │  Multi-file YAML config with three files: source, sink, and main.                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌───────────────────────────┐
      │   Modbus TCP Source       │          ┌──────────────────┐
      │   (modbusSource1)         │     ┌───▶│  Console Sink    │  stdout
      │                           │     │    │  (console)       │
      │   device: 192.168.111.215 │     │    └──────────────────┘
      │   port:   502             ├─────┘
      │   slave:  199             │
      │                           │
      │   Items (holding regs):   │
      │   · ResyncTimer      1 reg│
      │   · ResyncTimerRoll  2 reg│
      │   · RebootCause      2 reg│
      │   · WatchdogReset    2 reg│
      │   · HttpPushAttempts 2 reg│
      │                           │
      │   scan: 1000ms            │
      └───────────────────────────┘
             SOURCE                         RING BUFFER               SINK
       (Modbus TCP polling)               (4096 slots)          (console output)

  CONFIGURATION — 3 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── modbusSource1.yaml ────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  modbusSource1: &modbusSource1                                                         │
  │    name: modbusSource1                                                                 │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # Poll every 1 second                 │
  │    connector: ModbusTCP                          # Modbus TCP client connector         │
  │    rbe: !!bool true                              # Only publish on change              │
  │    address: 192.168.111.215                      # Device IP address                   │
  │    port: !!int 502                               # Modbus TCP port (standard)          │
  │    slave: !!int 199                              # Modbus slave/unit ID                │
  │    timeout: !!int 1000                           # Connection timeout (ms)             │
  │    init_script: |                                                                      │
  │      struct = require('struct')                  # Load Lua struct for binary decode   │
  │    items:                                                                              │
  │      - name: ResyncTimer                                                               │
  │        enabled: !!bool true                                                            │
  │        type: !!int 3                             # 3 = Holding Register (FC 03)        │
  │        address: !!int 10011                      # Starting register address           │
  │        count: !!int 1                            # Read 1 register (16 bits)           │
  │        script: |                                                                       │
  │          return result[0]                        # Extract single register value       │
  │      - name: ResyncTimerRollover                                                       │
  │        enabled: !!bool true                                                            │
  │        type: !!int 3                             # Holding Register                    │
  │        address: !!int 10013                                                            │
  │        count: !!int 2                            # Read 2 registers (32 bits)          │
  │        script: |                                                                       │
  │          return result                           # Return register array               │
  │      - name: RebootCause                                                               │
  │        enabled: !!bool true                                                            │
  │        type: !!int 3                                                                   │
  │        address: !!int 10015                                                            │
  │        count: !!int 2                                                                  │
  │        script: |                                                                       │
  │          return result                                                                 │
  │      - name: WatchdogResetCount                                                        │
  │        enabled: !!bool true                                                            │
  │        type: !!int 3                                                                   │
  │        address: !!int 10017                                                            │
  │        count: !!int 2                                                                  │
  │        script: |                                                                       │
  │          return result                                                                 │
  │      - name: HttpPushAttempts                                                          │
  │        enabled: !!bool true                                                            │
  │        type: !!int 3                                                                   │
  │        address: !!int 10031                                                            │
  │        count: !!int 2                                                                  │
  │        script: |                                                                       │
  │          return result                                                                 │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # Write to console every 1s           │
  │    connector: Console                            # stdout output                       │
  │    exclude_filter:                                                                     │
  │      - modbusSource1/$SYSTEM                     # Suppress system heartbeat msgs      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/       # Admin REST API                      │
  │    ws_server_uri: ws://127.0.0.1:9998/            # Admin WebSocket                    │
  │                                                                                        │
  │  sinks:                                                                                │
  │    - *console                                    # Anchor from console.yaml            │
  │                                                                                        │
  │  sources:                                                                              │
  │    - *modbusSource1                              # Anchor from modbusSource1.yaml      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • Modbus TCP Connector — DIME's ModbusTCP connector polls a Modbus slave device       │
  │    over TCP/IP on port 502. Each item specifies the function code (type), starting     │
  │    register address, and number of registers to read (count).                          │
  │                                                                                        │
  │  • Register Types — The type field maps to Modbus function codes:                      │
  │      1 = Coils (FC 01)          2 = Discrete Inputs (FC 02)                            │
  │      3 = Holding Registers (FC 03)   4 = Input Registers (FC 04)                       │
  │    This example reads holding registers (type: 3), the most common register type.      │
  │                                                                                        │
  │  • Multi-Register Reads — count: 2 reads two consecutive 16-bit registers (32 bits     │
  │    total). The result is an array indexed from 0. Use Lua struct library to decode     │
  │    multi-register values into floats, 32-bit integers, or other binary formats.        │
  │                                                                                        │
  │  • Lua struct Library — The init_script loads struct = require('struct'). This         │
  │    provides binary pack/unpack for converting raw register bytes into typed values.    │
  │    Example: struct.unpack('>f', bytes) decodes a big-endian 32-bit float.              │
  │                                                                                        │
  │  • Slave/Unit ID — Modbus TCP devices have a unit ID (slave). For single devices       │
  │    this is often 1 or 255. Gateways use it to route to downstream serial devices.      │
  │    This Banner device uses slave ID 199.                                               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX06-ethernet-ip-rockwell.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX06 — ETHERNET/IP (ROCKWELL)                                          DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Multi-source to multi-sink integration. Reads Allen-Bradley PLC data via EtherNet/IP  │
  │  (CIP protocol) and SHARC IoT sensor data via MQTT, then publishes to Console, MQTT    │
  │  broker, and Ignition SCADA via Sparkplug B. Demonstrates multi-source data fusion,    │
  │  sink transforms, Lua JSON parsing, the emit() API, and include/exclude filtering.     │
  │  Multi-file YAML config with six files.                                                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌───────────────────────────┐           ┌──────────────────┐
      │   EtherNet/IP Source      │      ┌───▶│  Console Sink    │  stdout
      │   (rockwell)              │      │    └──────────────────┘
      │                           │      │
      │   PLC:  MicroLogix        │      │    ┌──────────────────┐
      │   addr: 192.168.111.20    ├──────┼───▶│  MQTT Sink       │  wss.sharc.tech:1883
      │   path: 1,0               │      │    │  (mqttSink)      │
      │                           │      │    └──────────────────┘
      │   Items:                  │      │
      │   · Execution  B3:0/3     │      │    ┌──────────────────┐
      │   · GoodPartCount N7:1    │      └───▶│  Sparkplug B     │  localhost:1883
      └───────────────────────────┘           │  (ignition)      │
                                              └──────────────────┘
      ┌───────────────────────────┐                     │
      │   MQTT Source             │                     │
      │   (sharcs)                ├─────────────────────┘
      │                           │
      │   broker: wss.sharc.tech  │
      │   topic:  sharc/+/evt/#   │
      │                           │
      │   Items:                  │
      │   · AllSharcs (wildcard)  │
      │   · emit() per serial #   │
      └───────────────────────────┘
          2 SOURCES                       RING BUFFER             3 SINKS
    (EtherNet/IP + MQTT)               (4096 slots)        (Console+MQTT+SpB)

  CONFIGURATION — 6 files                                                     [multi-file]
  ───────────────────────

  ── rockwell.yaml ─────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  rockwell: &rockwell                                                                   │
  │    name: rockwell                                                                      │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1500                     # Poll every 1.5 seconds              │
  │    connector: EthernetIP                         # Allen-Bradley CIP protocol          │
  │    type: micrologix                              # PLC type: micrologix, logix, etc.   │
  │    address: 192.168.111.20                       # PLC IP address                      │
  │    path: 1,0                                     # CIP routing path (backplane,slot)   │
  │    sink:                                                                               │
  │      transform:                                                                        │
  │        type: script                                                                    │
  │        template: Message.Data;                   # Sink transform: extract Data only   │
  │    items:                                                                              │
  │      - name: Execution                                                                 │
  │        type: bool                                                                      │
  │        address: B3:0/3                           # Bit file B3, word 0, bit 3          │
  │        script: |                                                                       │
  │          local states = { [0]='Idle', [1]='Running' };                                 │
  │          return states[result and 1 or 0];       # Map bool to string                  │
  │      - name: GoodPartCount                                                             │
  │        type: int                                                                       │
  │        address: N7:1                             # Integer file N7, element 1          │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── sharcs.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  sharcs: &sharcs                                                                       │
  │    name: sharcs                                                                        │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 500                                                            │
  │    connector: MQTT                               # MQTT subscriber source              │
  │    rbe: !!bool true                                                                    │
  │    itemized_read: !!bool false                   # Event-driven, not polled            │
  │    address: wss.sharc.tech                       # MQTT broker hostname                │
  │    port: !!int 1883                                                                    │
  │    qos: !!int 0                                  # QoS 0: at most once                 │
  │    init_script: |                                                                      │
  │      json = require('json');                     # Load JSON parser                    │
  │      stringx = require('pl.stringx');            # Load Penlight string utils          │
  │    item_script: |                                # Runs for every incoming message     │
  │      local path_slugs = stringx.split(this.Key, '/');                                  │
  │      local sharc_serial = path_slugs[2];                                               │
  │      local sharc_event = path_slugs[4];                                                │
  │      local payload = json.decode(result).v;                                            │
  │      if sharc_event == "avail" then                                                    │
  │        emit("./" .. sharc_serial .. "/available", payload==true and true or false);    │
  │      elseif sharc_event == "net" then                                                  │
  │        emit("./" .. sharc_serial .. "/network/interface", payload.type);               │
  │        emit("./" .. sharc_serial .. "/network/ip", payload.ip);                        │
  │        emit("./" .. sharc_serial .. "/network/subnet_mask", payload.mask);             │
  │        emit("./" .. sharc_serial .. "/network/gateway", payload.gw);                   │
  │        emit("./" .. sharc_serial .. "/network/mac", payload.mac);                      │
  │      end                                                                               │
  │      return nil;                                 # emit() handles output               │
  │    items:                                                                              │
  │      - name: AllSharcs                                                                 │
  │        enabled: !!bool true                                                            │
  │        address: sharc/+/evt/#                    # MQTT wildcard subscription          │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    use_sink_transform: !!bool true               # Apply source sink transform         │
  │    exclude_filter:                                                                     │
  │      - rockwell/$SYSTEM                          # Suppress rockwell system msgs       │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── mqttSink.yaml ─────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  mqttSink: &mqttSink                                                                   │
  │    name: mqttSink                                                                      │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: MQTT                               # MQTT publisher sink                 │
  │    address: wss.sharc.tech                       # Broker hostname                     │
  │    port: !!int 1883                                                                    │
  │    base_topic: DimeTutorial                      # Topic prefix for all items          │
  │    qos: !!int 0                                                                        │
  │    retain: !!bool true                           # Retain last message on broker       │
  │    use_sink_transform: !!bool true                                                     │
  │    exclude_filter:                                                                     │
  │      - rockwell/$SYSTEM                          # Suppress system messages            │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── ignitionSink.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  ignitionSink: &ignitionSink                                                           │
  │    name: ignition                                                                      │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: SparkplugB                         # Sparkplug B for Ignition SCADA      │
  │    address: localhost                             # MQTT broker for Sparkplug          │
  │    port: !!int 1883                                                                    │
  │    username: user                                                                      │
  │    password: password                                                                  │
  │    host_id: Acme                                 # Sparkplug host application ID       │
  │    group_id: Chicago                             # Sparkplug group (e.g., plant)       │
  │    node_id: Factory1                             # Sparkplug edge node (e.g., line)    │
  │    device_id: DIMETutorial                       # Sparkplug device name               │
  │    reconnect_interval: !!int 15000               # Reconnect delay (ms)                │
  │    birth_delay: !!int 10000                      # Delay before birth certificate      │
  │    include_filter:                               # Only send PLC + sensor data         │
  │      - rockwell                                                                        │
  │      - sharcs                                                                          │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │                                                                                        │
  │  sinks:                                                                                │
  │    - *console                                                                          │
  │    - *mqttSink                                                                         │
  │    - *ignitionSink                                                                     │
  │                                                                                        │
  │  sources:                                                                              │
  │    - *rockwell                                                                         │
  │    - *sharcs                                                                           │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • EtherNet/IP Connector — DIME's EthernetIP connector uses CIP (Common Industrial     │
  │    Protocol) to read Allen-Bradley PLCs. The type field selects the PLC family         │
  │    (micrologix, logix, etc.) and path sets the CIP routing (backplane, slot).          │
  │                                                                                        │
  │  • AB Address Notation — MicroLogix uses file-based addressing: B3:0/3 = bit file 3,   │
  │    word 0, bit 3. N7:1 = integer file 7, element 1. CompactLogix/ControlLogix uses     │
  │    tag-based addressing instead (e.g., Program:Main.MyTag).                            │
  │                                                                                        │
  │  • emit() API — The SHARC source uses emit("./path", value) to publish multiple        │
  │    observations from a single incoming MQTT message. Each emit() creates a separate    │
  │    ring buffer entry. Return nil after emit() to suppress the default output.          │
  │                                                                                        │
  │  • Sink Transform — The rockwell source defines a sink transform (Message.Data) that   │
  │    extracts just the data payload. Sinks with use_sink_transform: true apply this      │
  │    transform; others receive the full MessageBoxMessage envelope.                      │
  │                                                                                        │
  │  • Sparkplug B — The SparkplugB sink publishes to Ignition SCADA using the Sparkplug   │
  │    B specification over MQTT. It manages birth/death certificates and uses             │
  │    host_id/group_id/node_id/device_id for the topic namespace hierarchy.               │
  │                                                                                        │
  │  • include_filter — The Ignition sink uses include_filter: [rockwell, sharcs] to       │
  │    receive only PLC and sensor data. Without it, admin and system messages would       │
  │    pollute the SCADA tag tree.                                                         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX07-beckhoff-ads.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX07 — BECKHOFF ADS                                                    DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Reads PLC variables from a Beckhoff TwinCAT runtime via ADS (Automation Device        │
  │  Specification) protocol. Demonstrates the BeckhoffADS source connector with AMS Net   │
  │  ID addressing, typed PLC variables, and multiple source instances reading the same    │
  │  controller. Multi-file YAML config with four files: two sources, sink, and main.      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌───────────────────────────┐
      │   ADS Source 1            │
      │   (adsSource1)            │          ┌──────────────────┐
      │                           │     ┌───▶│  Console Sink    │  stdout
      │   target: 192.168.111.191 │     │    │  (console)       │
      │   AMS:  192.168.111.191   │     │    └──────────────────┘
      │         .1.1              ├─────┤
      │   port: 851 (TC3 runtime) │     │
      │                           │     │
      │   Items:                  │     │
      │   · bool1  MAIN.testBool1 │     │
      │   · int1   MAIN.testDint1 │     │
      └───────────────────────────┘     │
                                        │
      ┌───────────────────────────┐     │
      │   ADS Source 2            │     │
      │   (adsSource2)            │     │
      │                           │     │
      │   target: 192.168.111.191 ├─────┘
      │   AMS:  192.168.111.191   │
      │         .1.1              │
      │   port: 851               │
      │                           │
      │   Items:                  │
      │   · bool1  MAIN.testBool1 │
      │   · int1   MAIN.testDint1 │
      └───────────────────────────┘
          2 SOURCES                       RING BUFFER               SINK
      (ADS connections)                 (4096 slots)          (console output)

  CONFIGURATION — 4 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── adsSource1.yaml ───────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  adsSource1: &adsSource1                                                               │
  │    name: adsSource1                                                                    │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 500                      # Poll every 500ms                    │
  │    connector: BeckhoffADS                        # TwinCAT ADS protocol connector      │
  │    rbe: !!bool true                              # Only publish on change              │
  │    local_netid: 1.1.1.1.1.1                      # Local AMS Net ID (this machine)     │
  │    target_ip: 192.168.111.191                    # TwinCAT runtime IP address          │
  │    address: 192.168.111.191.1.1                  # Target AMS Net ID                   │
  │    port: !!int 851                               # ADS port (851 = TC3 Runtime 1)      │
  │    init_script: ~                                                                      │
  │    enter_script: ~                                                                     │
  │    exit_script: ~                                                                      │
  │    deinit_script: ~                                                                    │
  │    items:                                                                              │
  │      - name: bool1                                                                     │
  │        enabled: !!bool true                                                            │
  │        type: bool                                # PLC BOOL type                       │
  │        address: MAIN.testBool1                   # TwinCAT symbol path                 │
  │      - name: int1                                                                      │
  │        enabled: !!bool true                                                            │
  │        type: int                                 # PLC DINT type                       │
  │        address: MAIN.testDint1                   # TwinCAT symbol path                 │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── adsSource2.yaml ───────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  adsSource2: &adsSource2                                                               │
  │    name: adsSource2                              # Second ADS connection               │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 500                                                            │
  │    connector: BeckhoffADS                                                              │
  │    rbe: !!bool true                                                                    │
  │    local_netid: 1.1.1.1.1.1                                                            │
  │    target_ip: 192.168.111.191                                                          │
  │    address: 192.168.111.191.1.1                                                        │
  │    port: !!int 851                                                                     │
  │    init_script: ~                                                                      │
  │    enter_script: ~                                                                     │
  │    exit_script: ~                                                                      │
  │    deinit_script: ~                                                                    │
  │    items:                                                                              │
  │      - name: bool1                                                                     │
  │        enabled: !!bool true                                                            │
  │        type: bool                                                                      │
  │        address: MAIN.testBool1                                                         │
  │      - name: int1                                                                      │
  │        enabled: !!bool true                                                            │
  │        type: int                                                                       │
  │        address: MAIN.testDint1                                                         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    exclude_filter:                                                                     │
  │      - adsSource1/$SYSTEM                        # Suppress ADS source 1 system msgs   │
  │      - adsSource2/$SYSTEM                        # Suppress ADS source 2 system msgs   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/       # Admin REST API                      │
  │    ws_server_uri: ws://127.0.0.1:9998/            # Admin WebSocket                    │
  │                                                                                        │
  │  sinks:                                                                                │
  │    - *console                                    # Anchor from console.yaml            │
  │                                                                                        │
  │  sources:                                                                              │
  │    - *adsSource1                                 # Anchor from adsSource1.yaml         │
  │    - *adsSource2                                 # Anchor from adsSource2.yaml         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • ADS Protocol — Beckhoff ADS (Automation Device Specification) is TwinCAT's native   │
  │    communication protocol. It uses AMS Net IDs (6-octet addresses like                 │
  │    192.168.111.191.1.1) to route messages between ADS devices on a network.            │
  │                                                                                        │
  │  • AMS Net ID — Every TwinCAT device has a unique AMS Net ID. The address field        │
  │    holds the target's AMS Net ID. The local_netid field identifies the DIME host.      │
  │    These must match the ADS routing table entries on both machines.                    │
  │                                                                                        │
  │  • ADS Port — Port 851 targets TwinCAT 3 Runtime 1 (the first PLC instance).           │
  │    Port 852 = Runtime 2, etc. Port 801 targets TwinCAT 2 Runtime 1. Each runtime       │
  │    is an independent PLC execution environment.                                        │
  │                                                                                        │
  │  • Symbol Addressing — Items use TwinCAT symbol paths: MAIN.testBool1 accesses         │
  │    variable testBool1 in program MAIN. The type field (bool, int) tells DIME how       │
  │    to interpret the raw bytes from the PLC memory.                                     │
  │                                                                                        │
  │  • Multiple Source Instances — This config creates two ADS connections to the same     │
  │    PLC. Each has its own scan loop and ring buffer publisher. Messages arrive as       │
  │    adsSource1/bool1 and adsSource2/bool1 — unique paths despite identical addresses.   │
  │    Useful for separating fast-scan and slow-scan variable groups.                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX08-opcua-server-sink.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX08 — OPC-UA SERVER SINK                                              DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  DIME as an OPC-UA server. A Lua script generates random data, and an OPC-UA Server    │
  │  sink exposes it to external OPC-UA clients (UaExpert, Ignition, Kepware, etc.).       │
  │  This turns DIME into a standards-compliant OPC-UA endpoint — any OPC-UA client        │
  │  can browse and subscribe to live data on port 4840.                                   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌───────────────────────┐
      │   Script Source       │          ┌───────────────────────┐
      │                       │     ┌───▶│  Console Sink         │  stdout
      │  random1 =            │     │    └───────────────────────┘
      │    math.random(200)   │     │
      │                       ├─────┤
      │  scan: 2000ms         │     │    ┌───────────────────────┐
      │  RBE: true            │     └───▶│  OPC-UA Server        │  opc.tcp://localhost:4840
      └───────────────────────┘          │  namespace: Production│
                                         │  root: Production     │
             SOURCE                      └───────────────────────┘
       (Lua random data)           RING BUFFER          SINKS
                                  (4096 slots)     (2 destinations)

  CONFIGURATION — 4 files                                                         [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── main.yaml ──────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/       # Admin API                           │
  │    ws_server_uri: ws://127.0.0.1:9998/            # Admin WebSocket                    │
  │  sinks:                                                                                │
  │    - *console                                     # Console for debugging              │
  │    - *opcUa                                       # OPC-UA Server endpoint             │
  │  sources:                                                                              │
  │    - *script                                      # Lua data generator                 │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── script.yaml ────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  script: &script                                                                       │
  │    name: script                                                                        │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 2000                      # Generate data every 2 seconds      │
  │    connector: Script                              # Lua script connector               │
  │    rbe: !!bool true                               # Only publish on change             │
  │    items:                                                                              │
  │      - name: random1                                                                   │
  │        enabled: !!bool true                                                            │
  │        script: |                                  # Random int 1-200                   │
  │          return math.random(200);                                                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                             # Print to stdout                    │
  │    use_sink_transform: !!bool false                                                    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── opcUa.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  opcUa: &opcUa                                                                         │
  │    name: opcUa                                                                         │
  │    connector: opcuaserver                         # OPC-UA Server sink                 │
  │    enabled: true                                                                       │
  │    port: 4840                                     # Standard OPC-UA port               │
  │    application_name: "DIME Production Data Server"                                     │
  │    application_uri: "urn:dime:production:server"                                       │
  │    namespace_uri: "urn:dime:production:data"      # Custom namespace URI               │
  │    root_folder: "Production"                      # Browse tree root node              │
  │    max_sessions: 50                               # Concurrent client limit            │
  │    session_timeout: 60000                          # Session timeout (ms)              │
  │    max_subscriptions: 20                           # Subscription limit per session    │
  │    exclude_filter:                                                                     │
  │      - /\$SYSTEM                                  # Hide system messages from clients  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * OPC-UA Server Sink — DIME becomes the server. External clients browse and           │
  │    subscribe to nodes. Each ring buffer item becomes an OPC-UA node under the          │
  │    root_folder in the configured namespace.                                            │
  │                                                                                        │
  │  * Server Identity — application_name and application_uri identify the server in       │
  │    client discovery. namespace_uri scopes the data nodes to avoid collisions with      │
  │    other OPC-UA servers on the network.                                                │
  │                                                                                        │
  │  * Session Management — max_sessions limits concurrent clients. session_timeout        │
  │    (60s) cleans up idle connections. max_subscriptions bounds per-session data         │
  │    subscriptions for resource control.                                                 │
  │                                                                                        │
  │  * System Message Filtering — The exclude_filter regex /\$SYSTEM hides DIME            │
  │    internal system messages ($SYSTEM) from OPC-UA clients. Only real data items        │
  │    appear in the browse tree.                                                          │
  │                                                                                        │
  │  * OPC-UA vs OPC-DA — This uses OPC-UA (Unified Architecture), the modern              │
  │    platform-independent standard. See EX10 for legacy COM-based OPC-DA.                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX09-fanuc-robot.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX09 — FANUC ROBOT                                                     DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Connect to a Fanuc industrial robot over Ethernet. Reads joint positions, cartesian   │
  │  coordinates, program state, string registers, and system variables. Lua scripts       │
  │  derive an execution state machine (ACTIVE/READY/STOPPED) from digital I/O signals.    │
  │  Multi-file YAML with JSON library for structured data extraction.                     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌────────────────────────────┐
      │   Fanuc Robot Source       │
      │   (10.1.1.200)             │        ┌───────────────────┐
      │                            │        │  Console Sink     │  stdout
      │  Digital I/O:              │        │                   │
      │  · UO.0 (SysReady)         │   ┌───▶│  exclude_filter:  │
      │  · UO.1 (PgmRun)           │   │    │  fanuc1/$SYSTEM   │
      │  · UO.2 (PgmPause)         │   │    └───────────────────┘
      │  Derived: Execution state  │   │
      │                            │   │
      │  Position Registers:       │   │
      │  · CartesianPosition.X     ├───┘
      │  · JointsPosition.J1       │
      │                            │
      │  System Variables:         │
      │  · $MOR_GRP[1].$cur_prog   │
      │  · $MOR_GRP[1].$line_off   │
      │  · $MOR_GRP[1].$CUR_DIS    │
      │                            │
      │  World Position:           │
      │  · worldCartesianPos.X     │
      │  · worldJointPosition.J1   │
      │                            │
      │  scan: 1000ms  RBE: true   │
      └────────────────────────────┘
             SOURCE                        RING BUFFER            SINK
       (Fanuc SRTP protocol)             (4096 slots)        (1 destination)

  CONFIGURATION — 3 files                                                         [multi-file]
  ───────────────────────

  ── main.yaml ──────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                     # Console output                     │
  │  sources:                                                                              │
  │    - *fanuc1                                      # Fanuc robot connection             │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── fanuc1.yaml ────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  fanuc1: &fanuc1                                                                       │
  │    name: fanuc1                                                                        │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                      # Read robot every 1 second          │
  │    connector: FanucRobot                          # Fanuc SRTP connector               │
  │    rbe: !!bool true                               # Only publish changes               │
  │    address: 10.1.1.200                            # Robot IP address                   │
  │    sink:                                                                               │
  │      transform:                                                                        │
  │        type: script                                                                    │
  │        template: Message.Data                     # Extract data value only            │
  │    init_script: |                                                                      │
  │      json = require('json');                      # Load JSON library                  │
  │    items:                                                                              │
  │      # --- Digital I/O → Cache (return nil = no publish) ---                           │
  │      - name: UO0                                                                       │
  │        address: UO.0                              # User Output bit 0                  │
  │        script: |                                                                       │
  │          set('./SysReady', result);                                                    │
  │          return nil;                              # Cache only, don't publish          │
  │      - name: UO1                                                                       │
  │        address: UO.1                                                                   │
  │        script: |                                                                       │
  │          set('./PgmRun', result);                                                      │
  │          return nil;                                                                   │
  │      - name: UO2                                                                       │
  │        address: UO.2                                                                   │
  │        script: |                                                                       │
  │          set('./PgmPause', result);                                                    │
  │          return nil;                                                                   │
  │      # --- Derived execution state from cached I/O ---                                 │
  │      - name: Execution                                                                 │
  │        script: |                                                                       │
  │          local ready = cache('./SysReady', 0);                                         │
  │          local run = cache('./PgmRun', 0);                                             │
  │          local pause = cache('./PgmPause', 0);                                         │
  │          if ready == 1 then                                                            │
  │            if run == 1 and pause == 0 then                                             │
  │              return "ACTIVE";                                                          │
  │            elseif run == 1 and pause == 1 then                                         │
  │              return "OPTIONAL_STOP";                                                   │
  │            else                                                                        │
  │              return "READY";                                                           │
  │            end                                                                         │
  │          else                                                                          │
  │            return "STOPPED";                                                           │
  │          end                                                                           │
  │      # --- Position registers ---                                                      │
  │      - name: XPos                                                                      │
  │        enabled: !!bool true                                                            │
  │        address: PositionRegisters.1               # Position register 1                │
  │        script: |                                                                       │
  │          return result.CartesianPosition.X;       # Extract X from struct              │
  │      - name: J1Pos                                                                     │
  │        enabled: !!bool true                                                            │
  │        address: PositionRegisters.1                                                    │
  │        script: |                                                                       │
  │          return result.JointsPosition.J1;         # Extract J1 from struct             │
  │      # --- Direct I/O reads ---                                                        │
  │      - name: SystemReady                                                               │
  │        address: UO.2                                                                   │
  │      - name: ProgramRunning                                                            │
  │        address: UO.3                                                                   │
  │      - name: ProgramPaused                                                             │
  │        address: UO.4                                                                   │
  │      # --- Registers and system variables ---                                          │
  │      - name: ProgramName                                                               │
  │        address: StringRegisters.1                 # String register 1                  │
  │      - name: ProgramId                                                                 │
  │        address: StringSystemVariables.$MOR_GRP[1].$cur_prog_id                         │
  │      - name: ProgramLineNumber                                                         │
  │        address: IntegerSystemVariables.$MOR_GRP[1].$line_offset                        │
  │      - name: J1Torque                                                                  │
  │        address: IntegerSystemVariables.$MOR_GRP[1].$CUR_DIS_TRQ[1]                     │
  │      # --- World coordinate reads ---                                                  │
  │      - name: XPosition                                                                 │
  │        address: worldCartesianPosition.X                                               │
  │      - name: J1Position                                                                │
  │        address: worldJointPosition.J1                                                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    use_sink_transform: !!bool true                # Use source's transform template    │
  │    exclude_filter:                                                                     │
  │      - fanuc1/$SYSTEM                             # Hide system heartbeat messages     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Fanuc Address Types — The connector supports multiple register families:            │
  │    UO (User Outputs), PositionRegisters, StringRegisters, IntegerSystemVariables,      │
  │    StringSystemVariables, worldCartesianPosition, worldJointPosition. Each uses        │
  │    dot notation: UO.0, PositionRegisters.1, worldCartesianPosition.X.                  │
  │                                                                                        │
  │  * Cache-and-Derive Pattern — Raw I/O bits (UO.0-2) are cached with set() and          │
  │    return nil (suppressing direct publish). The Execution item reads cached values     │
  │    with cache() to derive a human-readable state string. This is a common pattern      │
  │    for combining multiple raw signals into a single derived value.                     │
  │                                                                                        │
  │  * Structured Results — Position registers return complex objects. Lua scripts         │
  │    extract fields: result.CartesianPosition.X, result.JointsPosition.J1.               │
  │    The script runs on the raw .NET object returned by the connector.                   │
  │                                                                                        │
  │  * System Variables — Access Fanuc internal variables with $ prefix paths like         │
  │    $MOR_GRP[1].$cur_prog_id. These give deep visibility into robot internals:          │
  │    program ID, line number, joint torques.                                             │
  │                                                                                        │
  │  * Sink Transform — template: Message.Data strips the MessageBoxMessage envelope,      │
  │    sending only the data value. use_sink_transform: true on the console applies it.    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX10-opcda-legacy.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX10 — OPC-DA LEGACY                                                   DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Classic OPC-DA (COM/DCOM-based) connectivity for legacy systems. Reads tags from a    │
  │  Kepware KEPServerEX OPC-DA server using the traditional Windows COM interface.        │
  │  This is the simplest OPC-DA config — one source, one sink, one tag. Essential for     │
  │  brownfield factories still running Kepware, Wonderware, or RSLinx OPC-DA servers.     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌───────────────────────────┐
      │   OPC-DA Source           │
      │                           │        ┌───────────────────┐
      │  Server ProgID:           │        │  Console Sink     │  stdout
      │  Kepware.KEPServerEX.V6   │        │                   │
      │                           │   ┌───▶│  use_sink_        │
      │  Tags:                    │   │    │  transform: true  │
      │  · _System._DateTime      ├───┘    └───────────────────┘
      │                           │
      │  COM/DCOM on localhost    │
      │                           │
      │  scan: 1000ms             │
      │  RBE: true                │
      └───────────────────────────┘
             SOURCE                       RING BUFFER            SINK
       (OPC-DA COM interface)           (4096 slots)        (1 destination)

  CONFIGURATION — 3 files                                                         [multi-file]
  ───────────────────────

  ── main.yaml ──────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *consoleSink1                                # Console output                     │
  │  sources:                                                                              │
  │    - *opcDaSource1                                # OPC-DA connection                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── opcDaSource1.yaml ──────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  opcDaSource1: &opcDaSource1                                                           │
  │    name: opcDaSource1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                      # Poll every 1 second                │
  │    connector: OpcDA                               # Classic OPC-DA connector           │
  │    rbe: !!bool true                               # Report by exception                │
  │    address: Kepware.KEPServerEX.V6                # COM ProgID of OPC-DA server        │
  │    init_script: ~                                 # No initialization needed           │
  │    items:                                                                              │
  │      - name: DateTime                                                                  │
  │        enabled: !!bool true                                                            │
  │        rbe: !!bool true                           # Per-item RBE override              │
  │        address: _System._DateTime                 # OPC-DA tag path                    │
  │        script: ~                                  # No transformation                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── consoleSink1.yaml ──────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  consoleSink1: &consoleSink1                                                           │
  │    name: consoleSink1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    use_sink_transform: !!bool true                # Apply source transform             │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * OPC-DA (Data Access) — The original OPC standard from the 1990s, built on Windows   │
  │    COM/DCOM. Still widely deployed in legacy Kepware, Wonderware InTouch, RSLinx, and  │
  │    FactoryTalk installations. Requires Windows and local or DCOM network access.       │
  │                                                                                        │
  │  * COM ProgID Addressing — The address field takes the server's COM ProgID, not a      │
  │    URL. Common examples: Kepware.KEPServerEX.V6, RSLinx.OPCServer,                     │
  │    InTouch.OPC. Use OPC-DA browser tools to discover available servers.                │
  │                                                                                        │
  │  * Tag Path Notation — Item addresses use the OPC-DA server's tag hierarchy with       │
  │    dot separators. The _System group contains built-in Kepware tags like _DateTime.    │
  │    User-defined tags follow the channel.device.group.tag pattern.                      │
  │                                                                                        │
  │  * Per-Item RBE — Both the source-level rbe and item-level rbe are set to true.        │
  │    Item-level RBE overrides the source default. For high-frequency tags, set           │
  │    item rbe: false to stream every read regardless of change.                          │
  │                                                                                        │
  │  * OPC-DA vs OPC-UA — OPC-DA is Windows-only (COM). OPC-UA (see EX08) is platform-     │
  │    independent. Use OPC-DA for legacy brownfield; OPC-UA for new deployments.          │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX11-mqtt-to-websocket.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX11 — MQTT TO WEBSOCKET BRIDGE                                        DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Bridge MQTT topics to WebSocket clients. Subscribes to MQTT topics using wildcard     │
  │  patterns, parses JSON payloads with Lua, and pushes data to both console and a        │
  │  WebSocket server. Uses itemized_read: false for event-driven MQTT message handling.   │
  │  Demonstrates MQTT wildcards (+/#) and real-time data bridging to browser clients.     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌───────────────────────────┐
      │   MQTT Source             │
      │                           │        ┌──────────────────┐
      │  Broker: wss.sharc.tech   │   ┌───▶│  Console Sink    │  stdout
      │  Port:   1883             │   │    └──────────────────┘
      │                           │   │
      │  Subscribe:               │   │
      │  · sharc/+/evt/#          ├───┤
      │    (wildcard pattern)     │   │
      │                           │   │    ┌──────────────────┐
      │  Lua: from_json(result)   │   └───▶│  WebSocket Srv   │  ws://127.0.0.1:8082
      │                           │        └──────────────────┘
      │  scan: 500ms              │
      │  RBE: true                │
      │  itemized_read: false     │
      └───────────────────────────┘
             SOURCE                       RING BUFFER             SINKS
       (MQTT subscriber)                (4096 slots)         (2 destinations)

  CONFIGURATION — 4 files                                                         [multi-file]
  ───────────────────────

  ── main.yaml ──────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *consoleSink1                                # Debug output                       │
  │    - *websocketServerSink1                        # WebSocket push to browsers         │
  │  sources:                                                                              │
  │    - *mqttSource1                                 # MQTT subscription                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── mqttSource1.yaml ───────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  mqttSource1: &mqttSource1                                                             │
  │    name: mqttSource1                                                                   │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 500                       # Check for messages every 500ms     │
  │    connector: MQTT                                # MQTT source connector              │
  │    rbe: !!bool true                                                                    │
  │    itemized_read: !!bool false                    # Event-driven (queuing mode)        │
  │    address: wss.sharc.tech                        # MQTT broker hostname               │
  │    port: !!int 1883                               # Standard MQTT port                 │
  │    qos: !!int 0                                   # At most once delivery              │
  │    init_script: |                                                                      │
  │      -- Load JSON parsing library (bundled with DIME)                                  │
  │      json = require('json');                                                           │
  │    item_script: |                                                                      │
  │      return from_json(result);                    # Parse all items as JSON            │
  │    items:                                                                              │
  │      - name: AllSharcs                                                                 │
  │        enabled: !!bool true                                                            │
  │        address: sharc/+/evt/#                     # MQTT wildcard subscription         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── consoleSink1.yaml ──────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  consoleSink1: &consoleSink1                                                           │
  │    name: consoleSink1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── wsServerSink.yaml ──────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  websocketServerSink1: &websocketServerSink1                                           │
  │    name: websocketServerSink1                                                          │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: WebsocketServer                     # Push to WebSocket clients          │
  │    uri: ws://127.0.0.1:8082/                      # WebSocket endpoint                 │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * MQTT Wildcards — The topic address sharc/+/evt/# uses two MQTT wildcard types:      │
  │    + matches exactly one level (any device ID), # matches all remaining levels         │
  │    (any event path). This subscribes to all events from all SHARC devices.             │
  │                                                                                        │
  │  * itemized_read: false — Switches the MQTT connector to queuing (event-driven)        │
  │    mode. Messages arrive asynchronously from the broker. scan_interval controls        │
  │    how often queued messages are drained and published to the ring buffer.             │
  │                                                                                        │
  │  * JSON Parsing with Lua — init_script loads the json library once at startup.         │
  │    item_script applies from_json(result) to every incoming message, converting         │
  │    raw JSON strings into structured Lua tables that sinks receive as objects.          │
  │                                                                                        │
  │  * item_script vs script — item_script runs for ALL items in the source (shared        │
  │    transform). Per-item script runs only for that specific item. Use item_script       │
  │    when all items need the same processing (like JSON parsing).                        │
  │                                                                                        │
  │  * Protocol Bridge — MQTT (pub/sub) to WebSocket (push) is a common IoT pattern.       │
  │    DIME acts as the bridge: factory-floor devices publish MQTT, browser dashboards     │
  │    consume WebSocket. No custom code needed — just YAML configuration.                 │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX12-mqtt-secure-tls.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX12 — SECURE MQTT (TLS)                                               DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Encrypted MQTT with TLS and client certificates. Both source and sink connect to      │
  │  the same broker over port 8883 (MQTTS). The source subscribes to all topics (#),      │
  │  while the sink republishes to a base topic. Demonstrates certificate-based mutual     │
  │  authentication — client PFX cert, CA cert, and TLS configuration for secure MQTT.     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

                                          ┌──────────────────┐
      ┌───────────────────────┐      ┌───▶│  Console Sink    │  stdout
      │   MQTT Source (TLS)   │      │    │  transform: true │
      │                       │      │    └──────────────────┘
      │  Broker: localhost    │      │
      │  Port:   8883 (MQTTS) │      │
      │  TLS:    true         ├──────┤
      │  Client cert: PFX     │      │
      │  CA cert: ca.crt      │      │    ┌───────────────────┐
      │                       │      └───▶│  MQTT Sink (TLS)  │  localhost:8883
      │  Subscribe: #         │           │  base_topic:      │
      │  (all topics)         │           │  MqttSecure1      │
      │                       │           │  retain: true     │
      │  scan: 2000ms         │           └───────────────────┘
      │  RBE: true            │
      └───────────────────────┘
             SOURCE                      RING BUFFER              SINKS
       (MQTTS subscriber)             (4096 slots)          (2 destinations)

  CONFIGURATION — 4 files                                                         [multi-file]
  ───────────────────────

  ── main.yaml ──────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *consoleSink1                                # Debug output                       │
  │    - *mqttSink1                                   # Republish to MQTT                  │
  │  sources:                                                                              │
  │    - *mqttSource1                                 # Secure MQTT subscription           │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── mqttSource1.yaml ───────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  mqttSource1: &mqttSource1                                                             │
  │    name: mqttSource1                                                                   │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 2000                      # Drain queue every 2 seconds        │
  │    connector: MQTT                                                                     │
  │    rbe: !!bool true                                                                    │
  │    itemized_read: !!bool false                    # Event-driven queuing mode          │
  │    address: localhost                             # Broker hostname                    │
  │    port: !!int 8883                               # MQTTS (TLS) port                   │
  │    clean_session: !!bool true                     # Start fresh each connect           │
  │    tls: !!bool true                               # Enable TLS encryption              │
  │    tls_insecure: !!bool true                      # Skip server cert validation        │
  │    client_cert_path: c:/temp/client.pfx           # Client certificate (PKCS#12)       │
  │    client_cert_password: password                 # PFX file password                  │
  │    ca_cert_path: c:/temp/ca.crt                   # CA certificate for trust chain     │
  │    qos: !!int 0                                   # At most once                       │
  │    items:                                                                              │
  │      - name: All                                                                       │
  │        enabled: !!bool true                                                            │
  │        address: "#"                               # Subscribe to all topics            │
  │        sink:                                                                           │
  │          transform:                                                                    │
  │            type: script                                                                │
  │            template: |                                                                 │
  │              Message.Data                         # Extract data value only            │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── mqttSink1.yaml ─────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  mqttSink1: &mqttSink1                                                                 │
  │    name: mqttSink1                                                                     │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: MQTT                                # MQTT as a sink (publisher)         │
  │    address: localhost                                                                  │
  │    port: !!int 8883                               # Same broker, same TLS port         │
  │    base_topic: MqttSecure1                        # Prefix for published topics        │
  │    tls: !!bool true                               # TLS encryption                     │
  │    tls_insecure: !!bool true                                                           │
  │    client_cert_path: c:/temp/client.pfx                                                │
  │    client_cert_password: password                                                      │
  │    ca_cert_path: c:/temp/ca.crt                                                        │
  │    qos: !!int 0                                                                        │
  │    retain: !!bool true                            # Retain last message per topic      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── consoleSink1.yaml ──────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  consoleSink1: &consoleSink1                                                           │
  │    name: consoleSink1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    use_sink_transform: !!bool true                # Apply Message.Data transform       │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * TLS Encryption — tls: true enables encrypted transport. Port 8883 is the standard   │
  │    MQTTS port. All data between DIME and the broker is encrypted in transit.           │
  │                                                                                        │
  │  * Client Certificates — client_cert_path points to a PKCS#12 (.pfx) file containing   │
  │    the client's private key and certificate. client_cert_password unlocks it.          │
  │    ca_cert_path provides the CA certificate for the trust chain.                       │
  │                                                                                        │
  │  * tls_insecure: true — Skips server certificate hostname validation. Useful for       │
  │    development with self-signed certificates. Set to false in production and ensure    │
  │    the CA cert properly validates the broker's server certificate.                     │
  │                                                                                        │
  │  * MQTT Source + Sink — Both source and sink connect to the same broker. The source    │
  │    subscribes to # (all topics) and the sink republishes under base_topic. This        │
  │    creates a message relay with DIME as the processing layer in between.               │
  │                                                                                        │
  │  * Retain Flag — retain: true on the sink tells the broker to keep the last message    │
  │    for each topic. New subscribers immediately receive the latest value without        │
  │    waiting for the next publish cycle.                                                 │
  │                                                                                        │
  │  * clean_session — When true, the broker discards any previous session state.          │
  │    Subscriptions are re-established on each connection. Set to false for persistent    │
  │    sessions where the broker queues messages during disconnects.                       │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX13-sparkplugb-mqtt.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX13 — SPARKPLUGB INDUSTRIAL MQTT                                      DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  SparkplugB protocol for industrial MQTT. A SparkplugB source decodes Protobuf         │
  │  metrics from an MQTT broker, while an EthernetIP source reads Rockwell PLC data.      │
  │  The SparkplugB sink publishes birth/death certificates and metric updates to an       │
  │  Ignition SCADA gateway. An InfluxDB sink stores time-series data. Demonstrates        │
  │  the full SparkplugB lifecycle with multi-source, multi-sink industrial architecture.  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌─────────────────────────┐
      │  SparkplugB Source      │          ┌───────────────────┐
      │  (MQTT + Protobuf)      │     ┌───▶│  Console Sink     │  stdout
      │                         │     │    │  exclude: rockwell│
      │  Broker: localhost:1883 │     │    │  exclude: spb/SYS │
      │  Topic: spBv1.0/...     │     │    └───────────────────┘
      │  DDATA/Factory1/DIME1   │     │
      │                         │     │    ┌────────────────────┐
      │  Lua: decode Protobuf   ├─────┼───▶│  SparkplugB Sink   │  localhost:1883
      │  metrics via emit()     │     │    │  (Ignition SCADA)  │
      │                         │     │    │  host: Acme        │
      └─────────────────────────┘     │    │  group: Chicago    │
                                      │    │  node: Factory1    │
      ┌─────────────────────────┐     │    └────────────────────┘
      │  EthernetIP Source      │     │
      │  (Rockwell PLC)         │     │    ┌────────────────────┐
      │                         │     └───▶│  InfluxDB Sink     │  cloud InfluxDB
      │  PLC: 192.168.111.20    ├─────┘    │  bucket: DIME      │
      │  Tags: B3:0, N7:1       │          │  exclude: rockwell │
      │  type: micrologix       │          └────────────────────┘
      │  scan: 1500ms           │
      └─────────────────────────┘
           2 SOURCES                     RING BUFFER             3 SINKS
    (SparkplugB + EthernetIP)          (4096 slots)      (Console + SPB + Influx)

  CONFIGURATION — 6 files                                                         [multi-file]
  ───────────────────────

  ── main.yaml ──────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                                                          │
  │    - *ignition                                    # SparkplugB → Ignition gateway      │
  │    - *influx                                      # Time-series → InfluxDB             │
  │  sources:                                                                              │
  │    - *spb                                         # SparkplugB MQTT source             │
  │    - *rockwell                                    # EthernetIP PLC source              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── spb.yaml ───────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  spb: &spb                                                                             │
  │    name: spb                                                                           │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: SparkplugB                          # SparkplugB source connector        │
  │    rbe: !!bool true                                                                    │
  │    itemized_read: !!bool false                    # Event-driven message handling      │
  │    address: localhost                                                                  │
  │    port: !!int 1883                                                                    │
  │    username: user                                                                      │
  │    password: password                                                                  │
  │    clean_session: !!bool true                                                          │
  │    qos: !!int 0                                                                        │
  │    init_script: |                                                                      │
  │      import('System');                            # Import .NET System namespace       │
  │      json = require('json');                                                           │
  │      get_metric_value = function(metric)          # Helper: extract typed value        │
  │        local dt = Convert.ToInt32(metric.Datatype);                                    │
  │        local value = nil;                                                              │
  │        if dt == 12 then                           -- String                            │
  │          value = metric.StringValue:ToString();                                        │
  │        elseif dt == 11 then                       -- Boolean                           │
  │          value = Convert.ToBoolean(metric.BooleanValue);                               │
  │        elseif dt == 10 then                       -- Double                            │
  │          value = Convert.ToDouble(metric.DoubleValue);                                 │
  │        elseif dt == 9 then                        -- Float                             │
  │          value = Convert.ToDouble(metric.FloatValue);                                  │
  │        elseif dt == 8 or dt == 4 then             -- UInt64 / UInt16                   │
  │          value = Convert.ToInt32(metric.LongValue);                                    │
  │        elseif dt <= 7 then                        -- Int8..Int64                       │
  │          value = Convert.ToInt32(metric.IntValue);                                     │
  │        else                                                                            │
  │          value = nil;                                                                  │
  │        end                                                                             │
  │        return value;                                                                   │
  │      end                                                                               │
  │    items:                                                                              │
  │      - name: F1D1                                                                      │
  │        address: spBv1.0/Chicago/DDATA/Factory1/DIME1                                   │
  │        script: |                                                                       │
  │          result = from_json(result);              # Decode Protobuf payload            │
  │          for metric in luanet.each(result.Metrics) do;                                 │
  │            local value = get_metric_value(metric);                                     │
  │            emit("./" .. metric.Name:ToString(), value);                                │
  │          end;                                     # Each metric → individual item      │
  │          return nil;                              # Suppress raw message               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── rockwell.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  rockwell: &rockwell                                                                   │
  │    name: rockwell                                                                      │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1500                      # Poll PLC every 1.5 seconds         │
  │    connector: EthernetIP                          # Allen-Bradley EthernetIP           │
  │    rbe: !!bool true                                                                    │
  │    type: micrologix                               # PLC type (micrologix/controllogix) │
  │    address: 192.168.111.20                        # PLC IP address                     │
  │    path: 1,0                                      # Backplane routing path             │
  │    log: !!int 0                                                                        │
  │    timeout: !!int 1000                            # Connection timeout (ms)            │
  │    bypass_ping: !!bool false                                                           │
  │    items:                                                                              │
  │      - name: boolToCache                                                               │
  │        type: bool                                                                      │
  │        address: B3:0/2                            # Bit-level PLC address              │
  │        script: |                                                                       │
  │          set('boolTag', result);                   # Cache for cross-item use          │
  │          return nil;                                                                   │
  │      - name: boolFromCache                                                             │
  │        script: |                                                                       │
  │          return cache('boolTag', false);           # Read cached value                 │
  │      - name: Execution                                                                 │
  │        type: bool                                                                      │
  │        address: B3:0/3                                                                 │
  │        script: |                                                                       │
  │          local m = { [0]='Ready', [1]='Active' };                                      │
  │          return m[result and 1 or 0];             # Bool → string mapping              │
  │      - name: GoodPartCount                                                             │
  │        type: int                                                                       │
  │        address: N7:1                              # Integer register                   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── ignition.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  ignition: &ignition                                                                   │
  │    name: ignition                                                                      │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: SparkplugB                          # SparkplugB sink connector          │
  │    address: localhost                                                                  │
  │    port: !!int 1883                                                                    │
  │    username: user                                                                      │
  │    password: password                                                                  │
  │    host_id: Acme                                  # SparkplugB Host Application ID     │
  │    group_id: Chicago                              # SparkplugB Group                   │
  │    node_id: Factory1                              # SparkplugB Edge Node               │
  │    device_id: DIME1                               # SparkplugB Device                  │
  │    reconnect_interval: !!int 15000                # Reconnect delay (ms)               │
  │    birth_delay: !!int 10000                       # Delay before NBIRTH (ms)           │
  │    exclude_filter:                                                                     │
  │      - rockwell/$SYSTEM                           # No PLC system messages             │
  │      - spb                                        # No SparkplugB source loopback      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    exclude_filter:                                                                     │
  │      - rockwell                                   # Hide all PLC data on console       │
  │      - spb/$SYSTEM                                # Hide SparkplugB system messages    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── influx.yaml ────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  influx: &influx                                                                       │
  │    name: influx                                                                        │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: InfluxLP                            # InfluxDB Line Protocol sink        │
  │    address: https://us-east-1-1.aws.cloud2.influxdata.com                              │
  │    token: <your-influxdb-token>                   # InfluxDB API token                 │
  │    bucket_name: DIME                              # Target bucket                      │
  │    use_sink_transform: !!bool false                                                    │
  │    exclude_filter:                                                                     │
  │      - rockwell                                   # Only SparkplugB metrics to Influx  │
  │      - spb/$SYSTEM                                                                     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * SparkplugB Protocol — An industrial MQTT specification using Protobuf encoding.     │
  │    Topics follow: spBv1.0/{group}/DDATA/{node}/{device}. Metrics are strongly typed    │
  │    (int, float, bool, string) with datatype IDs defined by the SparkplugB spec.        │
  │                                                                                        │
  │  * Protobuf Metric Decoding — The init_script defines get_metric_value() which         │
  │    switches on metric.Datatype to extract the correct typed value. The Lua script      │
  │    accesses .NET objects directly via NLua interop (Convert.ToInt32, etc.).            │
  │                                                                                        │
  │  * emit() for Multiple Items — A single MQTT message contains multiple metrics. The    │
  │    script loops over result.Metrics and calls emit("./metricName", value) for each.    │
  │    return nil suppresses the raw message. Each metric becomes its own ring buffer      │
  │    item under the source connector's namespace.                                        │
  │                                                                                        │
  │  * Birth/Death Certificates — The SparkplugB sink (ignition) publishes NBIRTH on       │
  │    connect and NDEATH on disconnect. birth_delay gives time for metric discovery.      │
  │    host_id/group_id/node_id/device_id define the SparkplugB namespace hierarchy.       │
  │                                                                                        │
  │  * Multi-Source Filtering — Each sink uses exclude_filter to receive only relevant     │
  │    data. Console shows SparkplugB only, Ignition excludes PLC system messages and      │
  │    SparkplugB source loopback, InfluxDB stores only SparkplugB metrics.                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX14-activemq-enterprise.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX14 — ACTIVEMQ ENTERPRISE BROKER                                      DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Connect to Apache ActiveMQ Artemis for enterprise messaging. Subscribes to both a     │
  │  topic (pub/sub) and a queue (point-to-point) on the same broker. Uses the ActiveMQ    │
  │  connector with OpenWire protocol. Demonstrates the two fundamental messaging          │
  │  patterns — topics for broadcast and queues for load-balanced consumption.             │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌───────────────────────────┐
      │   ActiveMQ Source         │
      │                           │        ┌───────────────────┐
      │  Broker:                  │        │  Console Sink     │  stdout
      │  tcp://172.24.56.104:61616│        │                   │
      │  User: artemis            │   ┌───▶│  exclude_filter:  │
      │                           │   │    │  activemq/$SYSTEM │
      │  Subscriptions:           │   │    │  activemq         │
      │  · topic://FOO.BAR        ├───┘    └───────────────────┘
      │    (pub/sub broadcast)    │
      │  · queue://BAR.FOO        │
      │    (point-to-point)       │
      │                           │
      │  scan: 500ms              │
      │  itemized_read: false     │
      │  RBE: true                │
      └───────────────────────────┘
             SOURCE                       RING BUFFER            SINK
       (ActiveMQ OpenWire)              (4096 slots)        (1 destination)

  CONFIGURATION — 3 files                                                         [multi-file]
  ───────────────────────

  ── main.yaml ──────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                     # Console output                     │
  │  sources:                                                                              │
  │    - *activemq                                    # ActiveMQ subscription              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── activemq.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  activemq: &activemq                                                                   │
  │    name: activemq                                                                      │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 500                       # Drain queue every 500ms            │
  │    connector: ActiveMQ                            # Apache ActiveMQ connector          │
  │    rbe: !!bool true                                                                    │
  │    itemized_read: !!bool false                    # Event-driven queuing mode          │
  │    address: activemq:tcp://172.24.56.104:61616    # OpenWire protocol URI              │
  │    username: artemis                              # Broker credentials                 │
  │    password: artemis                                                                   │
  │    init_script: |                                                                      │
  │      print("hello world from lua");               # Startup confirmation               │
  │    items:                                                                              │
  │      - name: FooBar                                                                    │
  │        enabled: !!bool true                                                            │
  │        address: topic://FOO.BAR                   # Topic subscription (pub/sub)       │
  │      - name: BarFoo                                                                    │
  │        enabled: !!bool true                                                            │
  │        address: queue://BAR.FOO                   # Queue subscription (point-to-point)│
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    exclude_filter:                                                                     │
  │      - activemq/$SYSTEM                           # Hide system heartbeat              │
  │      - activemq                                   # Hide raw messages (debug toggle)   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Topics vs Queues — ActiveMQ supports two messaging patterns. topic://FOO.BAR        │
  │    is pub/sub: all subscribers receive every message. queue://BAR.FOO is point-to-     │
  │    point: only one consumer gets each message (load balanced). Both can coexist in     │
  │    the same DIME source connector.                                                     │
  │                                                                                        │
  │  * OpenWire Protocol — The address uses activemq:tcp:// prefix for Apache's native     │
  │    OpenWire protocol on port 61616. This is the default binary protocol for Artemis    │
  │    and Classic ActiveMQ, offering better performance than AMQP or STOMP.               │
  │                                                                                        │
  │  * Event-Driven Mode — itemized_read: false switches to queuing mode. Messages from    │
  │    the broker are queued internally. scan_interval: 500 controls how often DIME        │
  │    drains the queue and publishes to the ring buffer.                                  │
  │                                                                                        │
  │  * Enterprise Messaging — ActiveMQ Artemis supports message persistence, clustering,   │
  │    transactions, and dead-letter queues. DIME acts as a lightweight consumer that      │
  │    bridges enterprise broker messages into the DIME ring buffer for further routing.   │
  │                                                                                        │
  │  * Console Filter as Debug Toggle — The exclude_filter includes both system messages   │
  │    and the activemq source itself. Removing the "activemq" entry from the filter       │
  │    turns on raw message display for debugging.                                         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX15-mtconnect-agent-output.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX15 — MTCONNECT AGENT OUTPUT                                          DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Publishes Lua-generated random data to an MTConnect Agent sink. Each script item      │
  │  maps to a specific MTConnect Device/Controller path using per-item sink.mtconnect     │
  │  annotations. A Console sink provides debug output alongside the agent.                │
  │  Multi-file YAML — 4 files with anchors.                                               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   Script Source          │          ┌──────────────────┐
      │                          │     ┌───▶│  MTConnect Agent │  http://localhost:5000
      │   number1:               │     │    │  (SHDR protocol) │
      │     math.random(100)     │     │    └──────────────────┘
      │     → Device/Controller  │     │
      │       /Mass[Sample]      ├─────┤
      │                          │     │    ┌──────────────────┐
      │   number2:               │     └───▶│  Console Sink    │  stdout
      │     math.random(200)     │          └──────────────────┘
      │     → Device/Controller  │
      │       /Load[Sample]      │
      └──────────────────────────┘
              SOURCE                        RING BUFFER              SINKS
         (Lua scripting)                  (4096 slots)          (2 destinations)

  CONFIGURATION — 4 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── script.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  script: &script                                                                       │
  │    name: script                                                                        │
  │    connector: Script                                                                   │
  │    items:                                                                              │
  │      - name: number1                                                                   │
  │        script: return math.random(100);                                                │
  │        sink:                                     # Per-item MTConnect path mapping     │
  │          mtconnect: Device[name=device1]/Controller/Mass[category=Sample]              │
  │      - name: number2                                                                   │
  │        script: return math.random(200);                                                │
  │        sink:                                                                           │
  │          mtconnect: Device[name=device1]/Controller/Load[category=Sample]              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── agent.yaml ────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  agent: &agent                                                                         │
  │    name: agent                                                                         │
  │    connector: MTConnectAgent                     # Built-in MTConnect Agent sink       │
  │    port: !!int 5000                              # Agent listens on this port          │
  │    exclude_filter:                                                                     │
  │      - script/$SYSTEM                            # Filter out system messages          │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    connector: Console                            # Debug output to stdout              │
  │    exclude_filter:                                                                     │
  │      - script/$SYSTEM                            # Filter out system messages          │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/       # Admin API                           │
  │    ws_server_uri: ws://127.0.0.1:9998/            # Admin WebSocket                    │
  │  sinks:                                                                                │
  │    - *agent                                      # MTConnect Agent on port 5000        │
  │    - *console                                    # Debug to stdout                     │
  │  sources:                                                                              │
  │    - *script                                     # Lua random number generator         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • MTConnect Agent Sink — DIME embeds a full MTConnect Agent. The connector:           │
  │    MTConnectAgent type starts an HTTP server that speaks the MTConnect protocol.       │
  │    External MTConnect clients can read from it like any standard agent.                │
  │                                                                                        │
  │  • Per-Item Path Mapping — Each source item carries a sink.mtconnect annotation        │
  │    that defines where the value appears in the MTConnect device model:                 │
  │      Device[name=device1]/Controller/Mass[category=Sample]                             │
  │    This maps the value to the Mass DataItem under the Controller component.            │
  │                                                                                        │
  │  • Device Model Construction — The agent sink reads all sink.mtconnect paths from      │
  │    incoming items and automatically constructs the MTConnect device model XML.         │
  │    No separate Devices.xml file is needed.                                             │
  │                                                                                        │
  │  • Exclude Filters — Both sinks use exclude_filter to skip system messages             │
  │    (script/$SYSTEM). System messages contain connector health data (IsConnected,       │
  │    FaultCount) that don't belong in the MTConnect output.                              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX16-mtconnect-aggregation.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX16 — MTCONNECT AGGREGATION                                           DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Reads data from a remote MTConnect agent (Mazak demo server) and re-publishes it      │
  │  through a local MTConnect Agent sink. This is the agent-to-agent aggregation          │
  │  pattern — pull from one or more remote agents, combine, and serve locally.            │
  │  Uses strip_path_prefix and per-item sink.mtconnect path remapping.                    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   MTConnect Source       │          ┌──────────────────┐
      │                          │     ┌───▶│  MTConnect Agent │  http://localhost:5000
      │   Remote agent:          │     │    │  (local agent)   │
      │   mtconnect.mazakcorp    │     │    └──────────────────┘
      │   .com:5719              ├─────┤
      │                          │     │    ┌──────────────────┐
      │   Items:                 │     └───▶│  Console Sink    │  stdout (commented out)
      │   · Availability         │          └──────────────────┘
      │   · Execution            │
      │   · XLoad                │
      │                          │
      │   strip_path_prefix:     │
      │     true                 │
      └──────────────────────────┘
              SOURCE                        RING BUFFER              SINKS
      (remote MTConnect agent)            (4096 slots)          (local agent)

  CONFIGURATION — 4 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── mtConnectSource1.yaml ─────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  mtConnectSource1: &mtConnectSource1                                                   │
  │    name: mtConnectSource1                                                              │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # Poll remote agent every 1s          │
  │    connector: MTConnectAgent                     # Same connector, used as source      │
  │    rbe: !!bool true                              # Only publish on value changes       │
  │    itemized_read: !!bool true                    # Read each item individually         │
  │    address: mtconnect.mazakcorp.com              # Remote agent hostname               │
  │    port: !!int 5719                              # Remote agent port                   │
  │    init_script: ~                                                                      │
  │    strip_path_prefix: !!bool true                # Remove source path prefix           │
  │    sink:                                                                               │
  │      transform:                                                                        │
  │        type: script                                                                    │
  │        template: >-                              # Extract first value from response   │
  │          Message.Data[0].Value                                                         │
  │    items:                                                                              │
  │      - name: Availability                                                              │
  │        address: avail                            # MTConnect DataItem address          │
  │        sink:                                                                           │
  │          mtconnect: Device[Name=device1]/Availability[Category=Event]                  │
  │      - name: Execution                                                                 │
  │        address: execution                                                              │
  │        sink:                                                                           │
  │          mtconnect: Device[Name=device1]/Controller/Path/Execution[Category=Event]     │
  │      - name: XLoad                                                                     │
  │        address: Xload                                                                  │
  │        sink:                                                                           │
  │          mtconnect: Device[Name=device1]/Axes/Linear[Name=X]/Load[Category=Sample]     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── mtConnectSink1.yaml ───────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  mtConnectSink1: &mtConnectSink1                                                       │
  │    name: mtConnectSink1                                                                │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: MTConnectAgent                     # Local agent sink                    │
  │    port: !!int 5000                              # Serve locally on port 5000          │
  │    use_sink_transform: !!bool true               # Apply source transform              │
  │    exclude_filter:                                                                     │
  │      - mtConnectSource1/$SYSTEM                  # Skip system health messages         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── consoleSink1.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  consoleSink1: &consoleSink1                                                           │
  │    name: consoleSink1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    use_sink_transform: !!bool true                                                     │
  │    exclude_filter:                                                                     │
  │      - mtConnectSource1/$SYSTEM                                                        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    #- *consoleSink1                              # Uncomment for debug output          │
  │    - *mtConnectSink1                             # Local agent re-publishing data      │
  │  sources:                                                                              │
  │    - *mtConnectSource1                           # Remote Mazak agent                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • Agent-to-Agent Pattern — The MTConnectAgent connector works as both source and      │
  │    sink. As a source it reads /current from a remote agent. As a sink it publishes     │
  │    values through a local agent. This enables data aggregation from multiple plants.   │
  │                                                                                        │
  │  • strip_path_prefix — When true, the source connector strips its own name prefix      │
  │    from item paths. Without it, items arrive as mtConnectSource1/Availability.         │
  │    With it, they arrive as just Availability, which simplifies path remapping.         │
  │                                                                                        │
  │  • Sink Transform — The source defines a transform template Message.Data[0].Value      │
  │    to extract the raw value from the MTConnect response array. The sink sets           │
  │    use_sink_transform: true to apply it before writing to the local agent.             │
  │                                                                                        │
  │  • itemized_read — When true, each item is read individually from the remote agent     │
  │    using its address field. This gives per-item control vs. bulk reads.                │
  │                                                                                        │
  │  • Path Remapping — Each source item's sink.mtconnect annotation defines where it      │
  │    appears in the local agent's device model, allowing complete restructuring.         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX17-influxdb-time-series.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX17 — INFLUXDB TIME-SERIES                                            DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Collects data from industrial sources (Rockwell EthernetIP PLC and Modbus TCP)        │
  │  and writes to InfluxDB Cloud using the InfluxLP (Line Protocol) sink connector.       │
  │  Demonstrates token-based authentication, cloud endpoints, exclude filters, and        │
  │  Lua scripting for data caching and transformation.                                    │
  │  Multi-file YAML — 5 files with anchors.                                               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌─────────────────────────┐
      │   Rockwell EthernetIP   │
      │   (MicroLogix PLC)      │          ┌──────────────────┐
      │                         │     ┌───▶│  InfluxDB Cloud  │  InfluxLP over HTTPS
      │   192.168.111.20        │     │    │  us-east-1-1     │
      │   scan: 1500ms          │     │    │  bucket: DIME    │
      │   Items:                ├─────┤    └──────────────────┘
      │   · boolFromCache       │     │
      │   · Execution           │     │    ┌──────────────────┐
      │   · GoodPartCount       │     └───▶│  Console Sink    │  stdout
      └─────────────────────────┘          └──────────────────┘

      ┌─────────────────────────┐
      │   Modbus TCP            │
      │   (disabled by default) │
      │                         │
      │   192.168.111.20:502    │
      │   slave: 1              │
      │   Items:                │
      │   · DO0, DO1            │
      │   · holdingTags         │
      └─────────────────────────┘
             SOURCES                        RING BUFFER              SINKS
       (industrial PLCs)                  (4096 slots)       (InfluxDB + Console)

  CONFIGURATION — 5 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── rockwell.yaml ─────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  rockwell: &rockwell                                                                   │
  │    name: rockwell                                                                      │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1500                     # Poll PLC every 1.5 seconds          │
  │    connector: EthernetIP                         # Allen-Bradley EthernetIP/CIP        │
  │    rbe: !!bool true                              # Only publish changes                │
  │    type: micrologix                              # PLC family type                     │
  │    address: 192.168.111.20                                                             │
  │    path: 1,0                                     # Backplane routing path              │
  │    log: !!int 0                                                                        │
  │    timeout: !!int 1000                                                                 │
  │    bypass_ping: !!bool false                                                           │
  │    strip_path_prefix: !!bool false                                                     │
  │    sink:                                                                               │
  │      transform:                                                                        │
  │        type: script                                                                    │
  │        template: >-                                                                    │
  │          Message.Data                            # Extract raw data for sinks          │
  │    items:                                                                              │
  │      - name: boolToCache                         # Read bit, store in cache            │
  │        enabled: !!bool true                                                            │
  │        type: bool                                                                      │
  │        address: B3:0/2                           # PLC memory address                  │
  │        script: |                                                                       │
  │          set('boolTag', result);                  # Cache for other items              │
  │          return nil;                              # Don't publish this item            │
  │      - name: boolFromCache                       # Read from cache instead             │
  │        enabled: !!bool true                                                            │
  │        script: |                                                                       │
  │          return cache('boolTag', false);                                               │
  │      - name: Execution                           # Map bool to string state            │
  │        enabled: !!bool true                                                            │
  │        type: bool                                                                      │
  │        address: B3:0/3                                                                 │
  │        script: |                                                                       │
  │          local m = { [0]='Ready', [1]='Active' };                                      │
  │          return m[result and 1 or 0];                                                  │
  │      - name: GoodPartCount                       # Direct integer read                 │
  │        enabled: !!bool true                                                            │
  │        type: int                                                                       │
  │        address: N7:1                                                                   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── modbus.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  modbus: &modbus                                                                       │
  │    name: modbus                                                                        │
  │    enabled: !!bool false                         # Disabled — enable with hardware     │
  │    scan_interval: !!int 1000                                                           │
  │    connector: ModbusTCP                          # Modbus TCP/IP protocol              │
  │    rbe: !!bool true                                                                    │
  │    address: 192.168.111.20                                                             │
  │    port: !!int 502                               # Standard Modbus TCP port            │
  │    slave: !!int 1                                # Modbus slave/unit ID                │
  │    timeout: !!int 1000                                                                 │
  │    init_script: |                                                                      │
  │      struct = require('struct')                  # Binary packing library              │
  │    items:                                                                              │
  │      - name: DigitalOutputsSetUserCache                                                │
  │        type: !!int 1                             # Coils                               │
  │        address: !!int 16                                                               │
  │        count: !!int 12                                                                 │
  │        script: |                                                                       │
  │          set('outputs', result);                  # Cache array for sub-items          │
  │          return nil;                                                                   │
  │      - name: DO0                                                                       │
  │        script: return cache('outputs', nil)[0];                                        │
  │      - name: DO1                                                                       │
  │        script: return cache('outputs', nil)[1];                                        │
  │      - name: holdingTags                         # Multi-register float decode         │
  │        type: !!int 3                             # Holding registers                   │
  │        address: !!int 24                                                               │
  │        count: !!int 2                                                                  │
  │        script: |                                                                       │
  │          return struct.unpack('<I',                                                    │
  │            struct.pack('<HH', result[0], result[1]));                                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── influx.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  influx: &influx                                                                       │
  │    name: influx                                                                        │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: InfluxLP                           # InfluxDB Line Protocol sink         │
  │    address: https://us-east-1-1.aws.cloud2.influxdata.com   # Cloud endpoint           │
  │    token: holjd83YjHjuQg7n...Yy4Lg==             # API token (truncated)               │
  │    bucket_name: DIME                             # Target bucket                       │
  │    exclude_filter:                                                                     │
  │      - rockwell/$SYSTEM                          # Skip system messages                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    use_sink_transform: !!bool true               # Apply source transform              │
  │    exclude_filter:                                                                     │
  │      - rockwell/$SYSTEM                                                                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                    # Debug output                        │
  │    - *influx                                     # InfluxDB Cloud                      │
  │  sources:                                                                              │
  │    - *modbus                                     # Modbus TCP (disabled)               │
  │    - *rockwell                                   # EthernetIP PLC (active)             │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • InfluxLP Connector — Writes data using InfluxDB Line Protocol over HTTPS. Each      │
  │    item becomes a measurement with the source/item path as the measurement name.       │
  │    Timestamps are generated automatically.                                             │
  │                                                                                        │
  │  • Token Authentication — The InfluxLP sink uses a token property for API auth.        │
  │    This is the standard InfluxDB v2/Cloud authentication mechanism. Keep tokens        │
  │    in separate YAML files away from version control.                                   │
  │                                                                                        │
  │  • Cache-and-Forward Pattern — The Rockwell source caches raw PLC bits with            │
  │    set('boolTag', result) and return nil (suppressing direct publish). Other items     │
  │    read from cache('boolTag', false) to transform and publish derived values.          │
  │                                                                                        │
  │  • Multiple Sources, One Sink — Both Modbus and Rockwell sources feed the same         │
  │    InfluxDB sink. The ring buffer merges all source data; the sink writes it all.      │
  │    This is the standard DIME fan-in pattern.                                           │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX18-mongodb-documents.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX18 — MONGODB DOCUMENTS                                               DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Reads PLC data from a Rockwell MicroLogix via EthernetIP and stores it as             │
  │  documents in MongoDB Atlas (cloud). Demonstrates the MongoDB sink connector           │
  │  with Atlas connection strings, database/collection targeting, and                     │
  │  use_sink_transform for data formatting. Console sink for debugging.                   │
  │  Multi-file YAML — 4 files with anchors.                                               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌─────────────────────────┐
      │   Rockwell EthernetIP   │          ┌───────────────────┐
      │   (MicroLogix PLC)      │     ┌───▶│  MongoDB Atlas    │  mongodb+srv://
      │                         │     │    │  DB: DIME         │
      │   192.168.111.20        │     │    │  Collection: TS   │
      │   scan: 1500ms          ├─────┤    └───────────────────┘
      │                         │     │
      │   Items:                │     │    ┌──────────────────┐
      │   · boolFromCache       │     └───▶│  Console Sink    │  stdout
      │   · Execution           │          └──────────────────┘
      │   · GoodPartCount       │
      └─────────────────────────┘
              SOURCE                        RING BUFFER              SINKS
        (EthernetIP PLC)                  (4096 slots)       (MongoDB + Console)

  CONFIGURATION — 4 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── rockwell.yaml ─────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  rockwell: &rockwell                                                                   │
  │    name: rockwell                                                                      │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1500                     # Poll PLC every 1.5 seconds          │
  │    connector: EthernetIP                         # Allen-Bradley EthernetIP/CIP        │
  │    rbe: !!bool true                              # Only publish changes                │
  │    type: micrologix                              # PLC family type                     │
  │    address: 192.168.111.20                                                             │
  │    path: 1,0                                     # Backplane routing path              │
  │    log: !!int 0                                                                        │
  │    timeout: !!int 1000                                                                 │
  │    bypass_ping: !!bool false                                                           │
  │    strip_path_prefix: !!bool false                                                     │
  │    sink:                                                                               │
  │      transform:                                                                        │
  │        type: script                                                                    │
  │        template: >-                                                                    │
  │          Message.Data                            # Extract raw data value              │
  │    items:                                                                              │
  │      - name: boolToCache                         # Read bit, store in cache            │
  │        enabled: !!bool true                                                            │
  │        type: bool                                                                      │
  │        address: B3:0/2                                                                 │
  │        script: |                                                                       │
  │          set('boolTag', result);                                                       │
  │          return nil;                              # Suppress publish                   │
  │      - name: boolFromCache                       # Retrieve cached value               │
  │        enabled: !!bool true                                                            │
  │        script: |                                                                       │
  │          return cache('boolTag', false);                                               │
  │      - name: Execution                           # Map bool to string state            │
  │        enabled: !!bool true                                                            │
  │        type: bool                                                                      │
  │        address: B3:0/3                                                                 │
  │        script: |                                                                       │
  │          local m = { [0]='Ready', [1]='Active' };                                      │
  │          return m[result and 1 or 0];                                                  │
  │      - name: GoodPartCount                       # Direct integer read                 │
  │        enabled: !!bool true                                                            │
  │        type: int                                                                       │
  │        address: N7:1                                                                   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── mongo.yaml ────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  mongo: &mongo                                                                         │
  │    name: mongo                                                                         │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: MongoDB                            # MongoDB document sink               │
  │    use_sink_transform: !!bool true               # Apply source transform              │
  │    address: mongodb+srv://user:pa55w0rd@cluster0.h7xod.mongodb.net/                    │
  │             ?retryWrites=true&w=majority&appName=Cluster0                              │
  │    database: DIME                                # Target database name                │
  │    collection: TS                                # Target collection name              │
  │    exclude_filter:                                                                     │
  │      - rockwell/$SYSTEM                          # Skip system messages                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    use_sink_transform: !!bool true                                                     │
  │    exclude_filter:                                                                     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                    # Debug output                        │
  │    - *mongo                                      # MongoDB Atlas                       │
  │  sources:                                                                              │
  │    - *rockwell                                   # EthernetIP PLC                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • MongoDB Sink — The MongoDB connector writes each incoming message as a document     │
  │    to the specified database and collection. Each document includes the item path,     │
  │    value, and timestamp. Ideal for event logs and time-series document storage.        │
  │                                                                                        │
  │  • Atlas Connection String — Uses the mongodb+srv:// protocol for MongoDB Atlas        │
  │    cloud clusters. The connection string includes authentication credentials,          │
  │    retry settings, and write concern. Keep credentials out of version control.         │
  │                                                                                        │
  │  • use_sink_transform — When true on a sink, it applies the source's                   │
  │    sink.transform.template to extract just the data value (Message.Data) before        │
  │    writing. Without it, the full MessageBoxMessage envelope is stored.                 │
  │                                                                                        │
  │  • Cache-and-Forward Pattern — Same as EX17: cache raw PLC bits with set/return nil,   │
  │    then read with cache() in derived items. This separates data acquisition from       │
  │    data transformation cleanly.                                                        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX19-postgresql-polling.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX19 — POSTGRESQL POLLING                                              DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Polls a PostgreSQL database on a timer, executing SQL queries with dynamic            │
  │  parameterization. The {top} placeholder in the SQL query is replaced at runtime       │
  │  via Lua scripting in enter_script — each scan uses a random row limit.                │
  │  Results are mapped to named items and output to the Console sink.                     │
  │  Multi-file YAML — 3 files with anchors.                                               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   Postgres Source        │
      │                          │          ┌──────────────────┐
      │   172.16.10.43:5342      │     ┌───▶│  Console Sink    │  stdout
      │   Database: postgres     ├─────┘    └──────────────────┘
      │                          │
      │   SQL:                   │
      │   select * from          │
      │     public.fedex         │
      │     limit {top}          │
      │                          │
      │   {top} replaced each    │
      │   scan with random 1-9   │
      │                          │
      │   Items:                 │
      │   · TrackingNumber       │
      │   · ShipToName           │
      │                          │
      │   scan: 1000ms           │
      └──────────────────────────┘
              SOURCE                        RING BUFFER              SINK
       (PostgreSQL polling)               (4096 slots)           (Console)

  CONFIGURATION — 3 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── postgresSource1.yaml ──────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  postgresSource1: &postgresSource1                                                     │
  │    name: postgresSource1                                                               │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # Poll every 1 second                 │
  │    connector: Postgres                           # PostgreSQL source connector         │
  │    rbe: !!bool true                              # Only publish changes                │
  │    connection_string: Host=172.16.10.43;Port=5342;Username=postgres;                   │
  │                       Password=postgres;Database=postgres;                             │
  │    command_text: select * from public.fedex limit {top};                               │
  │    init_script: |                                                                      │
  │      top = "{top}"                               # Store placeholder for gsub          │
  │    deinit_script: ~                                                                    │
  │    enter_script: |                               # Runs before each scan cycle         │
  │      local conn = configuration().CommandText;                                         │
  │      next_num = math.random(1, 9);               # Random row limit 1-9                │
  │      conn = string.gsub(conn, top, next_num);    # Replace {top} or last value         │
  │      top = next_num;                              # Update for next gsub               │
  │      configuration().CommandText = conn;          # Apply modified query               │
  │      print(conn);                                 # Debug: show actual SQL             │
  │    items:                                                                              │
  │      - name: TrackingNumber                                                            │
  │        enabled: !!bool true                                                            │
  │        address: package_tracking_number           # Column name in result set          │
  │        script: return result[0];                  # First row value                    │
  │      - name: ShipToName                                                                │
  │        enabled: !!bool true                                                            │
  │        address: ship_to_name                      # Column name in result set          │
  │        script: return result;                     # Full result                        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── consoleSink1.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  consoleSink1: &consoleSink1                                                           │
  │    name: consoleSink1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *consoleSink1                                                                     │
  │  sources:                                                                              │
  │    - *postgresSource1                                                                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • Postgres Connector — DIME includes a native PostgreSQL source connector. It         │
  │    executes command_text as a SQL query each scan cycle. The address field on each     │
  │    item maps to a column name in the result set.                                       │
  │                                                                                        │
  │  • Dynamic Query Parameterization — The {top} placeholder in the SQL query is          │
  │    replaced at runtime using Lua string.gsub() in the enter_script. The init_script    │
  │    stores the original placeholder pattern, and enter_script swaps it before each      │
  │    scan. This enables dynamic queries without restarting DIME.                         │
  │                                                                                        │
  │  • configuration() API — Lua's configuration() function returns the connector's        │
  │    live configuration object. Modifying configuration().CommandText directly changes   │
  │    the SQL query for the next scan cycle. This is powerful but use with caution.       │
  │                                                                                        │
  │  • enter_script vs init_script — init_script runs once at startup (stores the {top}    │
  │    pattern). enter_script runs before every scan cycle (modifies the query). This      │
  │    separation enables one-time setup vs. per-cycle logic.                              │
  │                                                                                        │
  │  • Column-to-Item Mapping — Each item's address field corresponds to a column name     │
  │    in the SQL result set. The script processes the result (e.g., result[0] for first   │
  │    row). Multiple items can map to different columns from the same query.              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX20-sql-server-reads.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX20 — SQL SERVER READS                                                DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Polls a Microsoft SQL Server database on a timer, reading manufacturing order         │
  │  data with encrypted connections. Uses standard ADO.NET connection strings with        │
  │  Encrypt=True and TrustServerCertificate=True for secure database access.              │
  │  Each item maps to a column in the result set via the address field.                   │
  │  Multi-file YAML — 3 files with anchors.                                               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   MSSQL Source           │
      │                          │          ┌──────────────────┐
      │   172.16.10.5            │     ┌───▶│  Console Sink    │  stdout
      │   Database: Tykma        ├─────┘    └──────────────────┘
      │   Encrypt: True          │
      │                          │
      │   SQL:                   │
      │   select top 5 * from    │
      │     dbo.Silicone         │
      │     RubberOrders         │
      │                          │
      │   Items:                 │
      │   · OrderNumber          │
      │   · OrderQuantity        │
      │                          │
      │   scan: 1000ms           │
      └──────────────────────────┘
              SOURCE                        RING BUFFER              SINK
        (SQL Server polling)              (4096 slots)           (Console)

  CONFIGURATION — 3 files                                                     [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── msSqlSource1.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  msSqlSource1: &msSqlSource1                                                           │
  │    name: msSqlSource1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # Poll every 1 second                 │
  │    connector: MSSQL                              # Microsoft SQL Server connector      │
  │    rbe: !!bool true                              # Only publish changes                │
  │    connection_string: >-                                                               │
  │      Server=172.16.10.5;                                                               │
  │      Database=Tykma;                                                                   │
  │      User Id=datareader;                                                               │
  │      Password=datareader;                                                              │
  │      Encrypt=True;                               # TLS encryption enabled              │
  │      TrustServerCertificate=True;                # Accept self-signed certs            │
  │    command_text: select top 5 * from dbo.SiliconeRubberOrders;                         │
  │    init_script: ~                                                                      │
  │    deinit_script: ~                                                                    │
  │    enter_script: ~                                                                     │
  │    exit_script: ~                                                                      │
  │    items:                                                                              │
  │      - name: OrderNumber                                                               │
  │        enabled: !!bool true                                                            │
  │        address: ManufacturingOrderNumber          # SQL column name                    │
  │        script: return result[0];                  # First row value                    │
  │      - name: OrderQuantity                                                             │
  │        enabled: !!bool true                                                            │
  │        address: OrderQuantity                     # SQL column name                    │
  │        script: return result[0];                  # First row value                    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── consoleSink1.yaml ─────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  consoleSink1: &consoleSink1                                                           │
  │    name: consoleSink1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *consoleSink1                                                                     │
  │  sources:                                                                              │
  │    - *msSqlSource1                                                                     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • MSSQL Connector — DIME includes a native Microsoft SQL Server source connector.     │
  │    Uses ADO.NET under the hood with full support for connection string parameters.     │
  │    Each scan executes the command_text query and maps results to items.                │
  │                                                                                        │
  │  • Encrypted Connections — The connection string includes Encrypt=True for TLS         │
  │    encryption and TrustServerCertificate=True to accept self-signed certificates.      │
  │    In production, use proper CA-signed certificates and remove TrustServerCert.        │
  │                                                                                        │
  │  • Column-to-Item Mapping — Each item's address field corresponds to a SQL column      │
  │    name. The script: return result[0] extracts the first row's value. For multiple     │
  │    rows, use result[n] to access the nth row.                                          │
  │                                                                                        │
  │  • Lifecycle Scripts — All four lifecycle scripts (init, deinit, enter, exit) are      │
  │    set to ~ (null), meaning no custom logic. Compare with EX19 where enter_script      │
  │    dynamically modifies the SQL query each cycle.                                      │
  │                                                                                        │
  │  • Minimal Sink — The Console sink has no filters, receiving all messages including    │
  │    $SYSTEM. For production, add exclude_filter to suppress health messages.            │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX21-splunk-edge-hub.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX21 — SPLUNK EDGE HUB                                                 DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Collects data from multiple industrial sources (Haas SHDR, EthernetIP PLC, Lua        │
  │  scripts) and forwards to a Splunk Edge Hub via the SplunkEhSDK connector.             │
  │  Complete single-file configuration with 3 sources and 3 sinks. Demonstrates the       │
  │  numbers_to_metrics option and complex cross-source data combination via cache.        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌─────────────────────────┐
      │   Haas SHDR Source      │
      │   192.168.111.221:9998  │          ┌──────────────────┐
      │   · CPU (HIGH/LOW)      │     ┌───▶│  Splunk EH SDK   │  gRPC :50051
      └────────────────────┬────┘     │    └──────────────────┘
                           │          │
      ┌────────────────────┴────┐     │    ┌──────────────────┐
      │   EthernetIP Source     ├─────┼───▶│  HTTP Server     │  http://*:8080
      │   192.168.111.20        │     │    └──────────────────┘
      │   · boolGetUserCache    │     │
      │   · Execution           │     │    ┌──────────────────┐
      │   · GoodPartCount       │     └───▶│  Console Sink    │  stdout
      └────────────────────┬────┘          └──────────────────┘
                           │
      ┌────────────────────┴────┐
      │   Script Source         │
      │   Cross-source combiner │
      │   · luaPackagePath      │
      │   · machineNameDiscrete │
      │   · dateTime            │
      │   · randomFromUserCache │
      │   · mqttSensorReading   │
      │   · OverallAvailability │
      └─────────────────────────┘
             SOURCES                        RING BUFFER              SINKS
      (Haas + PLC + Script)              (4096 slots)       (Splunk + HTTP + Console)

  CONFIGURATION — main.yaml                                                   [single file]
  ─────────────────────────

  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  haasSource1: &haasSource1                       # ── Haas CNC via SHDR protocol ──    │
  │    name: haasSource1                                                                   │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: HaasSHDR                           # Haas Serial Data Record protocol    │
  │    rbe: !!bool true                                                                    │
  │    itemized_read: !!bool false                                                         │
  │    address: 192.168.111.221                                                            │
  │    port: !!int 9998                                                                    │
  │    timeout: !!int 1000                                                                 │
  │    heartbeat_interval: !!int 0                                                         │
  │    retry_interval: !!int 10000                                                         │
  │    init_script: |                                                                      │
  │      luanet.load_assembly("System")              # .NET interop for CLR types          │
  │      CLR = { env = luanet.import_type("System.Environment") };                         │
  │    items:                                                                              │
  │      - name: CPU                                                                       │
  │        address: CPU                                                                    │
  │        script: |                                                                       │
  │          local cpu = tonumber(result);                                                 │
  │          if cpu > 0.5 then return 'HIGH'; else return 'LOW'; end                       │
  │                                                                                        │
  │  eipSource1: &eipSource1                         # ── Allen-Bradley PLC ──             │
  │    name: eipSource1                                                                    │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 500                                                            │
  │    connector: EthernetIP                                                               │
  │    rbe: !!bool true                                                                    │
  │    type: micrologix                                                                    │
  │    address: 192.168.111.20                                                             │
  │    path: 1,0                                                                           │
  │    timeout: !!int 1000                                                                 │
  │    bypass_ping: !!bool true                                                            │
  │    items:                                                                              │
  │      - name: boolSetUserCacheOnly                                                      │
  │        type: bool                                                                      │
  │        address: B3:0/2                                                                 │
  │        script: |                                                                       │
  │          set('boolTag', result); return nil;      # Cache only, suppress publish       │
  │      - name: boolGetUserCache                                                          │
  │        script: return cache('boolTag', false);                                         │
  │      - name: Execution                                                                 │
  │        type: bool                                                                      │
  │        address: B3:0/3                                                                 │
  │        script: |                                                                       │
  │          local m = { [0]='Ready', [1]='Active' };                                      │
  │          return m[result and 1 or 0];                                                  │
  │        sink:                                                                           │
  │          mtconnect: Device[name=device1]/Controller/Path/Execution[category=Event]     │
  │      - name: GoodPartCount                                                             │
  │        type: int                                                                       │
  │        address: N7:1                                                                   │
  │                                                                                        │
  │  scriptSource1: &scriptSource1                   # ── Cross-source combiner ──         │
  │    name: scriptSource1                                                                 │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 500                                                            │
  │    connector: Script                                                                   │
  │    rbe: !!bool true                                                                    │
  │    init_script: |                                                                      │
  │      luanet.load_assembly("System")                                                    │
  │      CLR = { env = luanet.import_type("System.Environment") };                         │
  │      json = require('json');                     # JSON library                        │
  │      moses = require('moses');                   # Functional utility library          │
  │      pcArray = {}                                                                      │
  │    items:                                                                              │
  │      - name: luaPackagePath                      # Diagnostic: Lua search paths        │
  │        script: return package.path;                                                    │
  │      - name: machineNameDiscrete                 # .NET interop: machine name          │
  │        rbe: !!bool false                                                               │
  │        script: return CLR.env.MachineName;                                             │
  │      - name: dateTime                                                                  │
  │        script: return os.date("%Y-%m-%d %H:%M:%S");                                    │
  │      - name: randomFromUserCache                 # Cache demo: write then read         │
  │        script: return cache('random', -1);                                             │
  │      - name: mqttSensorReading                   # Cross-source: read MQTT cache       │
  │        script: return cache('mqttSource1/ffe4Sensor', 0);                              │
  │      - name: mqttSensorReadingMedian             # Running median over 100 samples     │
  │        script: |                                                                       │
  │          table.insert(pcArray, cache('mqttSource1/ffe4Sensor', 0));                    │
  │          pcArray = moses.last(pcArray, 100);                                           │
  │          return moses.median(pcArray);                                                 │
  │      - name: OverallAvailabilityRbe              # System cache: connection state      │
  │        rbe: !!bool true                                                                │
  │        script: |                                                                       │
  │          local n = cache('eipSource1/$SYSTEM/IsConnected', nil);                       │
  │          return n==true and 'Available' or 'Unavailable';                              │
  │        sink:                                                                           │
  │          mtconnect: Device[name=device1]/Availability[category=Event]                  │
  │                                                                                        │
  │  splunkEhSdkSink1: &splunkEhSdkSink1            # ── Splunk Edge Hub sink ──           │
  │    name: splunkEhSdkSink1                                                              │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: SplunkEhSDK                        # Splunk Edge Hub SDK (gRPC)          │
  │    address: http://host.docker.internal          # Docker host address                 │
  │    port: !!int 50051                             # gRPC port                           │
  │    numbers_to_metrics: !!bool true               # Convert numerics to Splunk metrics  │
  │                                                                                        │
  │  consoleSink1: &consoleSink1                     # ── Debug console ──                 │
  │    name: consoleSink1                                                                  │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │                                                                                        │
  │  httpServerSink1: &httpServerSink1               # ── HTTP REST endpoint ──            │
  │    name: httpServerSink1                                                               │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: HTTPServer                                                               │
  │    uri: http://*:8080/                                                                 │
  │                                                                                        │
  │  app:                                                                                  │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://*:9999/                                                     │
  │    ws_server_uri: ws://0.0.0.0:9998/                                                   │
  │  sinks:                                                                                │
  │    - *consoleSink1                                                                     │
  │    - *httpServerSink1                                                                  │
  │    - *splunkEhSdkSink1                                                                 │
  │  sources:                                                                              │
  │    - *eipSource1                                                                       │
  │    - *haasSource1                                                                      │
  │    - *scriptSource1                                                                    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  • SplunkEhSDK Connector — Sends data to Splunk Edge Hub using gRPC protocol.          │
  │    The address and port point to the Edge Hub's gRPC endpoint. The                     │
  │    numbers_to_metrics: true option converts numeric values to Splunk metrics format.   │
  │                                                                                        │
  │  • Single-File Config — All anchors and the app section live in one main.yaml.         │
  │    Anchors (&name) are defined inline and referenced (*name) in the sinks/sources      │
  │    arrays at the bottom. Valid for smaller configs; multi-file is better at scale.     │
  │                                                                                        │
  │  • Cross-Source Cache — The Script source reads values from other sources using        │
  │    cache('eipSource1/Execution') and cache('mqttSource1/ffe4Sensor'). This enables     │
  │    data combination, aggregation, and derived calculations across sources.             │
  │                                                                                        │
  │  • $SYSTEM Cache — cache('eipSource1/$SYSTEM/IsConnected') reads the PLC's             │
  │    connection state from the system cache. This enables health-aware logic like        │
  │    mapping IsConnected to 'Available'/'Unavailable' MTConnect events.                  │
  │                                                                                        │
  │  • .NET Interop — The init_script uses luanet.load_assembly and luanet.import_type     │
  │    to access .NET CLR types directly from Lua (e.g., System.Environment.MachineName).  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX22-json-web-scraper.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX22 — JSON WEB SCRAPER                                                DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Scrapes a public JSON REST API using the JSONWebScraper connector. Extracts nested    │
  │  values with JSON path queries ($.catalog.manifestID), transforms them via Lua, and    │
  │  publishes to Console, MTConnect Agent, and MTConnect SHDR sinks.                      │
  │  Multi-file YAML config — 5 files composed with anchors.                               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   JSONWebScraper Source  │         ┌─────────────────────┐
      │                          │    ┌────▶│  Console Sink       │  stdout
      │   uri: GitHub raw JSON   │    │     └─────────────────────┘
      │                          │    │
      │   Item: node1            │    │     ┌─────────────────────┐
      │   address: $.catalog     ├────┼────▶│  MTConnect Agent    │  port 5000
      │     .manifestID          │    │     │  (XML endpoint)     │
      │                          │    │     └─────────────────────┘
      │   Lua: json.decode()     │    │
      │   to extract first match │    │     ┌─────────────────────┐
      │                          │    └────▶│  MTConnect SHDR     │  port 7878
      │   scan: 5000ms           │          │  (pipe-delimited)   │
      └──────────────────────────┘          └─────────────────────┘
              SOURCE                        RING BUFFER              SINKS
        (REST API polling)                (4096 slots)          (3 destinations)

  CONFIGURATION — 5 files                                                      [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── json1.yaml ────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  json1: &json1                                                                         │
  │    name: json1                                                                         │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 5000                     # Poll API every 5 seconds            │
  │    connector: JSONWebScraper                     # REST API scraper connector          │
  │    rbe: !!bool true                              # Only publish on change              │
  │    uri: https://raw.githubusercontent.com/       # Target URL (GitHub raw JSON)        │
  │      jpadfield/simple-site/refs/heads/                                                 │
  │      master/build/mirador.json                                                         │
  │    sink:                                                                               │
  │      transform:                                                                        │
  │        type: script                                                                    │
  │        template: Message.Data                    # Extract raw data for sinks          │
  │    init_script: |                                                                      │
  │      json = require('json');                     # Load JSON library once              │
  │    items:                                                                              │
  │      - name: node1                                                                     │
  │        enabled: !!bool true                                                            │
  │        address: $.catalog.manifestID             # JSON path query                     │
  │        script: |                                                                       │
  │          return json.decode(result)[1];          # Decode + take first element         │
  │        sink:                                                                           │
  │          mtconnect: Device[name=device1]/        # MTConnect data item mapping         │
  │            Controller/Load[category=Sample]                                            │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── agent.yaml ────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  agent: &agent                                                                         │
  │    name: agent                                                                         │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: MTConnectAgent                     # Serves MTConnect XML on port 5000   │
  │    port: !!int 5000                                                                    │
  │    use_sink_transform: !!bool true               # Apply sink.transform from source    │
  │    exclude_filter:                                                                     │
  │      - xml1/$SYSTEM                              # Filter out system messages          │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── shdr.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  shdr: &shdr                                                                           │
  │    name: shdr                                                                          │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: MTConnectSHDR                      # SHDR adapter (pipe-delimited)       │
  │    port: !!int 7878                              # TCP port for agent connection       │
  │    device_key: ~                                 # Null = default device               │
  │    heartbeat_interval: !!int 10000               # Keep-alive every 10 seconds         │
  │    filter_duplicates: !!bool true                # Suppress duplicate values           │
  │    use_sink_transform: !!bool true                                                     │
  │    exclude_filter:                                                                     │
  │      - xml1/$SYSTEM                                                                    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                            # Prints to stdout                    │
  │    use_sink_transform: !!bool false                                                    │
  │    exclude_filter:                                                                     │
  │      - haas1/$SYSTEM                             # Filter system messages              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                    # Console for debugging               │
  │    - *agent                                      # MTConnect Agent XML endpoint        │
  │    - *shdr                                       # MTConnect SHDR adapter              │
  │  sources:                                                                              │
  │    - *json1                                      # JSONWebScraper source               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * JSONWebScraper Connector -- Polls any HTTP endpoint returning JSON. The uri         │
  │    property specifies the target URL. Each item's address uses JSON path syntax        │
  │    ($.path.to.field) to extract nested values from the response.                       │
  │                                                                                        │
  │  * JSON Path Queries -- The address "$.catalog.manifestID" navigates into the JSON     │
  │    response tree. The result variable in the item script contains the matched value.   │
  │    When the path returns an array, Lua json.decode(result)[1] extracts the first       │
  │    element.                                                                            │
  │                                                                                        │
  │  * MTConnect Sink Mapping -- The sink.mtconnect property on each item maps data to     │
  │    the MTConnect information model. The path Device[name=device1]/Controller/          │
  │    Load[category=Sample] places the value into a specific MTConnect data item.         │
  │                                                                                        │
  │  * MTConnect SHDR -- The SHDR sink produces pipe-delimited output on a TCP port.       │
  │    An external MTConnect Agent can connect to this port to collect adapter data.       │
  │    filter_duplicates and heartbeat_interval manage connection health.                  │
  │                                                                                        │
  │  * Lua JSON Library -- The init_script loads json = require('json') once at startup.   │
  │    Item scripts then use json.decode() and json.encode() for parsing and formatting.   │
  │    Libraries should always be loaded in init_script, not per-item scripts.             │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX23-weather-api.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX23 — WEATHER API                                                      DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Connects to the US National Weather Service public API to fetch real-time weather     │
  │  forecasts. Demonstrates the NwsWeather connector with lat/lon coordinates, daily vs   │
  │  hourly forecast types, and Lua scripting to extract temperature values.               │
  │  Single-file YAML config with multiple city items.                                     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   NwsWeather Source      │
      │                          │
      │   address: api.weather   │         ┌─────────────────────┐
      │     .gov                 │    ┌───▶│  Console Sink       │  stdout
      │                          │    │    └─────────────────────┘
      │   Items:                 │    │
      │   · NewYork   (daily)    ├────┘
      │     40.7128, -74.0060    │
      │   · LosAngeles (hourly)  │
      │     34.0522, -118.2437   │
      │   · Chicago    (daily)   │
      │     41.8781, -87.6298    │
      │                          │
      │   scan: 10000ms          │
      │   agent: (DimeWeather)   │
      └──────────────────────────┘
              SOURCE                       RING BUFFER              SINK
        (NWS public API)                 (4096 slots)          (Console out)

  CONFIGURATION — main.yaml                                                    [single file]
  ─────────────────────────

  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  nwsweather: &nwsweather                                                               │
  │    name: nwsweather                                                                    │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 10000                    # Poll every 10 seconds               │
  │    connector: NwsWeather                         # National Weather Service connector  │
  │    address: https://api.weather.gov              # NWS API base URL                    │
  │    agent: (DimeWeather, contact@dime.com)        # Required User-Agent header          │
  │    items:                                                                              │
  │      - name: NewYork                                                                   │
  │        enabled: !!bool true                                                            │
  │        address: 40.7128, -74.0060                # Latitude, Longitude                 │
  │        forecast: daily                           # Daily forecast periods              │
  │        script: |                                 # Extract temperature from response   │
  │          print(result.properties.periods[0].temperature)                               │
  │          return result.properties.periods[0].temperature;                              │
  │      - name: LosAngeles                                                                │
  │        enabled: !!bool false                     # Disabled by default                 │
  │        address: 34.0522, -118.2437                                                     │
  │        forecast: hourly                          # Hourly forecast periods             │
  │      - name: Chicago                                                                   │
  │        enabled: !!bool false                                                           │
  │        address: 41.8781, -87.6298                                                      │
  │        forecast: daily                                                                 │
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    connector: Console                            # Prints to stdout                    │
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sources:                                                                              │
  │    - *nwsweather                                 # Weather source                      │
  │  sinks:                                                                                │
  │    - *console                                    # Console output                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * NwsWeather Connector -- Purpose-built connector for the US National Weather         │
  │    Service API. Handles the two-step NWS lookup: first resolves lat/lon to a grid      │
  │    point, then fetches the forecast for that grid. The agent property sets the         │
  │    required User-Agent header (NWS blocks requests without one).                       │
  │                                                                                        │
  │  * Lat/Lon Addressing -- Each item's address is "latitude, longitude" as a string.     │
  │    The connector parses these and calls the correct NWS grid endpoint. You can add     │
  │    as many city items as needed, each with different coordinates.                      │
  │                                                                                        │
  │  * Forecast Types -- The forecast property selects "daily" (7-day periods) or          │
  │    "hourly" (detailed hourly). The response structure differs: daily has fewer, longer │
  │    periods; hourly has many short periods. Your script must match the structure.       │
  │                                                                                        │
  │  * Lua Result Processing -- The result variable contains the parsed JSON response      │
  │    from the NWS API. The script navigates the response tree:                           │
  │    result.properties.periods[0].temperature extracts the first period's temp.          │
  │    The print() call logs to DIME console for debugging.                                │
  │                                                                                        │
  │  * External API Integration -- This example shows the pattern for any public REST      │
  │    API: configure the connector with the base URL, set items for each data point,      │
  │    and use scripts to extract and transform the response payload.                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX24-http-client-post.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX24 — HTTP CLIENT POST                                                DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Posts data to an external HTTP endpoint using the HTTPClient sink. A Lua Script       │
  │  source simulates a machine press generating Execution, SystemCondition, and Position  │
  │  data. A Scriban template formats the combined state into a custom payload before      │
  │  POSTing. Demonstrates custom headers, Authorization, and template formatting.         │
  │  Multi-file YAML config — 3 files composed with anchors.                               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   Script Source (press1) │
      │                          │
      │   Items:                 │         ┌──────────────────────────┐
      │   · Execution            │         │  HTTPClient Sink         │
      │     (Active/Ready)       │         │                          │
      │   · SystemCondition      ├────────▶│  POST to webhook URL     │
      │     (Fault/Normal)       │         │  Content-Type: text/plain│
      │   · Position             │         │  Authorization: None     │
      │     (-100 to 100)        │         │                          │
      │   · ModelInstance        │         │  Scriban template        │
      │     (combined state)     │         │  formats payload         │
      │                          │         └──────────────────────────┘
      │   scan: 1000ms           │
      └──────────────────────────┘
              SOURCE                       RING BUFFER              SINK
        (Lua simulation)                 (4096 slots)       (HTTP POST output)

  CONFIGURATION — 3 files                                                      [multi-file]
  ───────────────────────

  ── mtInstance1.yaml (source) ─────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  mtInstance1: &mtInstance1                                                             │
  │    name: press1                                                                        │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # 1-second scan cycle                 │
  │    connector: Script                             # Lua script source                   │
  │    rbe: !!bool true                              # Report By Exception                 │
  │    init_script: |                                                                      │
  │      json = require('json');                     # Load JSON library                   │
  │    items:                                                                              │
  │      - name: Execution                                                                 │
  │        enabled: !!bool true                                                            │
  │        rbe: !!bool true                                                                │
  │        script: |                                                                       │
  │          local n = math.random(0, 1);                                                  │
  │          set("Execution", n==1 and 'Active' or 'Ready');                               │
  │          return nil;                             # set() stores; nil suppresses output │
  │      - name: SystemCondition                                                           │
  │        enabled: !!bool true                                                            │
  │        rbe: !!bool true                                                                │
  │        script: |                                                                       │
  │          local n = math.random(0, 1);                                                  │
  │          set("SystemCondition", n==1 and 'Fault' or 'Normal');                         │
  │          return nil;                                                                   │
  │      - name: Position                                                                  │
  │        enabled: !!bool true                                                            │
  │        rbe: !!bool true                                                                │
  │        script: |                                                                       │
  │          set("Position", math.random(-100, 100));                                      │
  │          return nil;                                                                   │
  │      - name: ModelInstance                       # Combines cached state               │
  │        enabled: !!bool true                                                            │
  │        rbe: !!bool true                                                                │
  │        script: |                                                                       │
  │          return {                                                                      │
  │            type = "press",                                                             │
  │            name = configuration().Name,          # Connector name from config          │
  │            available = cache("./$SYSTEM/IsConnected", false),                          │
  │            execution = cache("./Execution", false),                                    │
  │            system = cache("./SystemCondition", "NORMAL"),                              │
  │            position = cache("./Position", 0)                                           │
  │          }                                                                             │
  │        sink:                                                                           │
  │          transform:                                                                    │
  │            type: scriban                         # Scriban template engine             │
  │            template: >-                                                                │
  │              {{-Message.Data["type"]}},name={{Message.Data["name"]}}                   │
  │              {{for o in Message.Data}}{{o.Key}}={{o.Value}}                            │
  │              {{if !for.last}},{{end}}{{end}}                                           │
  │              {{Message.Timestamp}}                                                     │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── httpClientSink1.yaml ──────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  httpClientSink1: &httpClientSink1                                                     │
  │    name: httpClientSink1                                                               │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: HTTPClient                         # HTTP POST sink                      │
  │    uri: https://webhook-test.com/...             # Target webhook endpoint             │
  │    headers:                                      # Custom HTTP headers                 │
  │      Content-Type: text/plain                                                          │
  │      Authorization: None                         # Placeholder for Bearer token        │
  │    exclude_filter:                                                                     │
  │      - press1/$SYSTEM                            # Filter system messages              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://localhost:9999/                                             │
  │    ws_server_uri: ws://localhost:9998/                                                 │
  │  sinks:                                                                                │
  │    - *httpClientSink1                            # HTTP POST to webhook                │
  │  sources:                                                                              │
  │    - *mtInstance1                                # Script source (press1)              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * HTTPClient Sink -- Posts data to an external HTTP endpoint. Unlike HTTPServer       │
  │    (which listens), HTTPClient actively sends outbound requests. Set the uri to any    │
  │    REST endpoint, webhook, or API gateway.                                             │
  │                                                                                        │
  │  * Custom Headers -- The headers map adds HTTP headers to every request. Use           │
  │    Content-Type to set the payload format. The Authorization header supports Bearer    │
  │    tokens, API keys, or any auth scheme your target API requires.                      │
  │                                                                                        │
  │  * Scriban Templates -- The sink.transform.type "scriban" enables the Scriban          │
  │    template engine. Access message data with {{Message.Data["key"]}}. Loop over        │
  │    key-value pairs with {{for o in Message.Data}}. Use {{if !for.last}} for            │
  │    conditional separators. Scriban uses {{- for whitespace trimming.                   │
  │                                                                                        │
  │  * Cache-Based State Assembly -- Individual items use set() to cache values (and       │
  │    return nil to suppress direct output). The ModelInstance item then assembles all    │
  │    cached values into a single Lua table. This pattern produces one combined message   │
  │    per scan cycle from multiple independent data points.                               │
  │                                                                                        │
  │  * configuration() API -- The Lua configuration() function returns the current         │
  │    connector's config object. configuration().Name yields the connector name. This     │
  │    lets scripts adapt to their runtime context without hardcoded values.               │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX25-lua-data-transforms.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX25 — LUA DATA TRANSFORMS                                             DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  The simplest multi-file configuration. A Lua Script source generates two random       │
  │  numbers via math.random() and publishes them to a Console sink. Demonstrates          │
  │  modular YAML with anchors, minimal Script connector setup, and system message         │
  │  filtering. Three files — the building blocks of every multi-file DIME config.         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌──────────────────────────┐
      │   Script Source          │
      │                          │         ┌─────────────────────┐
      │   Items:                 │         │  Console Sink       │
      │   · number1              ├────────▶│                     │  stdout
      │     math.random(100)     │         │  exclude_filter:    │
      │   · number2              │         │    script/$SYSTEM   │
      │     math.random(200)     │         └─────────────────────┘
      │                          │
      │   (defaults apply:       │
      │    scan_interval, rbe)   │
      └──────────────────────────┘
              SOURCE                       RING BUFFER              SINK
         (Lua random gen)                (4096 slots)         (Console output)

  CONFIGURATION — 3 files                                                      [multi-file]
  ───────────────────────

  Each file defines a YAML anchor (&name). The main.yaml references them with aliases (*).

  ── script.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  script: &script                                                                       │
  │    name: script                                                                        │
  │    connector: Script                             # Lua script connector                │
  │    items:                                                                              │
  │      - name: number1                                                                   │
  │        script: return math.random(100);          # Random 1-100                        │
  │      - name: number2                                                                   │
  │        script: return math.random(200);          # Random 1-200                        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    connector: Console                            # Prints to stdout                    │
  │    exclude_filter:                                                                     │
  │      - script/$SYSTEM                            # Filter system messages              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                    # Console output sink                 │
  │  sources:                                                                              │
  │    - *script                                     # Script source                       │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Minimal Multi-File Config -- This is the simplest possible multi-file setup:        │
  │    one source file, one sink file, one main.yaml. Each file defines an anchor          │
  │    (&name) and main.yaml references them with aliases (*name). DIME loads all YAML     │
  │    files in the directory and merges them automatically.                               │
  │                                                                                        │
  │  * Config Defaults -- When properties like scan_interval, enabled, or rbe are          │
  │    omitted, DIME applies sensible defaults. The Script source here uses default        │
  │    scan_interval (1000ms) and default rbe (true). This keeps minimal configs clean     │
  │    while still being fully functional.                                                 │
  │                                                                                        │
  │  * Lua math.random() -- The Script connector's embedded Lua runtime provides the       │
  │    full Lua standard library. math.random(n) returns an integer from 1 to n. No        │
  │    init_script is needed here because no libraries or state are required.              │
  │                                                                                        │
  │  * System Message Filtering -- Every connector publishes to a $SYSTEM path             │
  │    (e.g. script/$SYSTEM) with health data like IsConnected and FaultCount. The         │
  │    Console sink uses exclude_filter to suppress these, showing only data items.        │
  │                                                                                        │
  │  * Modular YAML Pattern -- Separating connectors into individual files makes it easy   │
  │    to add, remove, or swap connectors. To add an HTTP sink, create a new YAML file     │
  │    with an anchor and add its alias to main.yaml's sinks array.                        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX26-python-scripting.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX26 — PYTHON SCRIPTING                                                DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Demonstrates DIME's embedded Python runtime as an alternative to Lua. Uses .NET CLR   │
  │  interop (System.Random), Python standard library modules (random, math, sys), custom  │
  │  module imports, tuple creation, and the DIME cache API from Python.                   │
  │  Multi-file YAML config — 3 files. Ten items showcase different Python capabilities.   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌────────────────────────────┐
      │   Script Source (Python)   │
      │   lang_script: python      │
      │                            │       ┌─────────────────────┐
      │   init: import clr,        │       │  Console Sink       │
      │     System.Random          │       │                     │
      │                            ├──────▶│  use_sink_transform │  stdout
      │   Items (10):              │       │    !!bool true      │
      │   · SysPath    (sys.path)  │       │                     │
      │   · Swallow    (None)      │       │  transform: script  │
      │   · CLRRandom  (.NET)      │       │  Message.Data       │
      │   · PyRandom   (random)    │       └─────────────────────┘
      │   · Tuple      (1,2,3)     │
      │   · Module     (example)   │
      │   · Math       (math.pi)   │
      │   · CacheSet   (dime.set)  │
      │   · CacheGet   (dime.cache)│
      │   · Counter    (global var)│
      │                            │
      │   scan: 1000ms             │
      └────────────────────────────┘
              SOURCE                       RING BUFFER              SINK
        (Python embedded)                (4096 slots)         (Console output)

  CONFIGURATION — 3 files                                                      [multi-file]
  ───────────────────────

  ── script.yaml ───────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  script: &script                                                                       │
  │    name: script                                                                        │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # 1-second scan cycle                 │
  │    connector: Script                                                                   │
  │    rbe: !!bool true                              # Report By Exception                 │
  │    sink:                                                                               │
  │      transform:                                                                        │
  │        type: script                                                                    │
  │        template: Message.Data                    # Extract raw data for sink           │
  │    lang_script: python                           # Switch runtime to Python            │
  │    init_script: |                                # Runs once at startup                │
  │      print('hello world from script.init_script')                                      │
  │      import clr                                  # .NET CLR bridge                     │
  │      clr.AddReference("System")                  # Load System assembly                │
  │      from System import Random                   # Import .NET Random class            │
  │      counter = 0                                 # Global state variable               │
  │    items:                                                                              │
  │      - name: SysPath                             # Show Python module paths            │
  │        script: |                                                                       │
  │          import sys                                                                    │
  │          sys.path                                # Last expression = return value      │
  │      - name: Swallow                             # Return None (nil equivalent)        │
  │        script: |                                                                       │
  │          None                                                                          │
  │      - name: CLRRandom                           # .NET System.Random via CLR          │
  │        script: |                                                                       │
  │          Random().NextDouble()                   # Call .NET method directly           │
  │      - name: PyRandom                            # Python standard random              │
  │        script: |                                                                       │
  │          import random                                                                 │
  │          random.random()                         # Python-native random float          │
  │      - name: Tuple                               # Python tuples as return values      │
  │        script: |                                                                       │
  │          (1, 2, 3)                                                                     │
  │      - name: Module                              # Import custom module                │
  │        script: |                                                                       │
  │          from example import add                 # example.py in Python/ directory     │
  │          add(100, 100)                           # Call exported function              │
  │      - name: Math                                # Python math library                 │
  │        script: |                                                                       │
  │          import math as m                                                              │
  │          m.pi                                    # Returns 3.14159...                  │
  │      - name: CacheSet                            # Store value in DIME cache           │
  │        script: |                                                                       │
  │          dime.set('cacheTest', 555)              # Python cache API                    │
  │          None                                    # Suppress output                     │
  │      - name: CacheGet                            # Retrieve from DIME cache            │
  │        script: |                                                                       │
  │          dime.cache('cacheTest', 0)              # Get cached value (default: 0)       │
  │      - name: Counter                             # Global variable persistence         │
  │        script: |                                                                       │
  │          counter = counter + 1                                                         │
  │          counter                                 # Increments across scan cycles       │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── console.yaml ──────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                            # Prints to stdout                    │
  │    use_sink_transform: !!bool true               # Apply source's transform template   │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  ── main.yaml ─────────────────────────────────────────────────────────────────────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  app:                                                                                  │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                    │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                    # Console output                      │
  │  sources:                                                                              │
  │    - *script                                     # Python script source                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Python Runtime (lang_script: python) -- DIME embeds a Python runtime alongside      │
  │    Lua. Set lang_script: python at the connector level. All items in that connector    │
  │    then execute Python instead of Lua. The last expression in each script block        │
  │    becomes the return value (no explicit return needed).                               │
  │                                                                                        │
  │  * .NET CLR Interop -- The clr module bridges Python to the .NET runtime. Use          │
  │    clr.AddReference("System") to load assemblies, then import classes directly:        │
  │    from System import Random. This gives Python scripts access to the full .NET        │
  │    ecosystem including System, LINQ, and custom assemblies.                            │
  │                                                                                        │
  │  * Python Cache API -- In Python, the DIME cache uses the dime module:                 │
  │    dime.set('key', value) to store, dime.cache('key', default) to retrieve. This       │
  │    differs from Lua's set()/cache() syntax but provides identical functionality.       │
  │    Cache entries persist across scan cycles for stateful processing.                   │
  │                                                                                        │
  │  * Custom Modules -- Place .py files in DIME's Python/ directory. Import them with     │
  │    standard Python syntax: from example import add. The paths_script property can      │
  │    add additional module search paths if needed.                                       │
  │                                                                                        │
  │  * Global Variables -- Variables defined in init_script (like counter = 0) persist     │
  │    across scan cycles in the Python runtime. Item scripts can read and modify them.    │
  │    This enables stateful computation without the cache API.                            │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX27-sliding-window-analytics.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX27 — SLIDING WINDOW ANALYTICS                                        DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Demonstrates windowed analytics using the sliding_window Lua module. A simulated      │
  │  temperature sensor feeds values into two sliding windows: one computes a 5-sample     │
  │  moving average, the other detects temperature spikes by comparing min/max deviation.  │
  │  Liquid templates format the output as structured JSON. Single-file YAML config.       │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

      ┌────────────────────────────┐
      │   Script Source            │
      │   (sliding_window)         │
      │                            │       ┌──────────────────────────┐
      │   init: require            │       │  Console Sink            │
      │     ('sliding_window')     │       │                          │
      │   window1 = create(5)      │       │  use_sink_transform:     │
      │   window2 = create(5)      │       │    !!bool true           │
      │                            ├──────▶│                          │  stdout
      │   Items:                   │       │  exclude_filter:         │
      │   · Temperature            │       │    /\$SYSTEM             │
      │     (25.0 +/- 2.0)         │       │                          │
      │   · TemperatureMovingAvg   │       │  Liquid templates format │
      │     window1:average()      │       │  items as JSON payloads  │
      │   · TemperatureSpike       │       └──────────────────────────┘
      │     deviation > 3.0?       │
      │                            │
      │   scan: 1000ms             │
      └────────────────────────────┘
              SOURCE                       RING BUFFER              SINK
        (Lua sliding window)             (4096 slots)         (Console output)

  CONFIGURATION — main.yaml                                                    [single file]
  ─────────────────────────

  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  # Console sink                                                                        │
  │  console: &console                                                                     │
  │    name: console                                                                       │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                                                           │
  │    connector: Console                                                                  │
  │    use_sink_transform: !!bool true               # Apply Liquid templates              │
  │    exclude_filter:                                                                     │
  │      - /\$SYSTEM                                 # Filter system messages (regex)      │
  │                                                                                        │
  │  # Script source with sliding window                                                   │
  │  sliding_window_script: &sliding_window_script                                         │
  │    name: sliding_window                                                                │
  │    enabled: !!bool true                                                                │
  │    scan_interval: !!int 1000                     # 1-second scan cycle                 │
  │    connector: Script                                                                   │
  │    init_script: |                                                                      │
  │      local window_module = require('sliding_window')                                   │
  │      window1 = window_module.create(5)           # 5-sample moving average window      │
  │      window2 = window_module.create(5)           # 5-sample spike detection window     │
  │    items:                                                                              │
  │      - name: Temperature                         # Simulated sensor data               │
  │        script: |                                                                       │
  │          local base_temp = 25.0                  # 25C base temperature                │
  │          local variation = 2.0                   # +/- 2C random variation             │
  │          return base_temp + (math.random() * variation * 2 - variation)                │
  │                                                                                        │
  │      - name: TemperatureMovingAvg                # Moving average over 5 samples       │
  │        enabled: !!bool true                                                            │
  │        script: |                                                                       │
  │          local temp = cache("sliding_window/Temperature", 0)                           │
  │          window1:add(temp)                       # Push value into window              │
  │          return window1:average()                # Return windowed average             │
  │        sink:                                                                           │
  │          transform:                                                                    │
  │            type: liquid                          # Liquid template engine              │
  │            template: |                                                                 │
  │              {                                                                         │
  │                "value": {{Message.Data}},                                              │
  │                "timestamp": {{Message.Timestamp}},                                     │
  │                "unit": "C"                                                             │
  │              }                                                                         │
  │                                                                                        │
  │      - name: TemperatureSpike                    # Spike detection via min/max         │
  │        enabled: !!bool true                                                            │
  │        script: |                                                                       │
  │          local temp = cache("sliding_window/Temperature", 0)                           │
  │          window2:add(temp)                                                             │
  │          local max_value = window2:max()                                               │
  │          local min_value = window2:min()                                               │
  │          local deviation = max_value - min_value                                       │
  │          local is_spike = deviation > 3.0        # Spike if range > 3C                 │
  │          return {                                                                      │
  │            is_spike = is_spike,                                                        │
  │            deviation = deviation,                                                      │
  │            max = max_value,                                                            │
  │            min = min_value                                                             │
  │          }                                                                             │
  │        sink:                                                                           │
  │          transform:                                                                    │
  │            type: liquid                          # Liquid template for spike data      │
  │            template: |                                                                 │
  │              {                                                                         │
  │                "is_spike": {{Message.Data.is_spike}},                                  │
  │                "deviation": {{Message.Data.deviation}},                                │
  │                "max": {{Message.Data.max}},                                            │
  │                "min": {{Message.Data.min}},                                            │
  │                "timestamp": {{Message.Timestamp}}                                      │
  │              }                                                                         │
  │                                                                                        │
  │  # Application configuration                                                           │
  │  app:                                                                                  │
  │    license: 0000                                                                       │
  │    ring_buffer: !!int 4096                                                             │
  │    http_server_uri: http://127.0.0.1:9999/                                             │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                 │
  │  sinks:                                                                                │
  │    - *console                                                                          │
  │  sources:                                                                              │
  │    - *sliding_window_script                                                            │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Sliding Window Module -- The sliding_window Lua module provides a circular buffer   │
  │    for time-series analytics. Create with window_module.create(size). Methods:         │
  │    add(value), average(), sum(), min(), max(), count(), full(), clear(). The window    │
  │    automatically evicts the oldest value when full.                                    │
  │                                                                                        │
  │  * Moving Average -- The TemperatureMovingAvg item reads the latest Temperature from   │
  │    the cache, pushes it into window1, and returns window1:average(). With a window     │
  │    size of 5, this smooths out noise by averaging the last 5 readings. Larger windows  │
  │    produce smoother but more delayed results.                                          │
  │                                                                                        │
  │  * Spike Detection -- The TemperatureSpike item computes max - min over the window.    │
  │    If this deviation exceeds 3.0 degrees, is_spike becomes true. This pattern detects  │
  │    sudden changes without requiring threshold comparisons on individual values.        │
  │                                                                                        │
  │  * Liquid Templates -- The sink.transform.type "liquid" enables DotLiquid templating.  │
  │    Access data with {{Message.Data}}, {{Message.Data.field}}, and                      │
  │    {{Message.Timestamp}}. Liquid is ideal for formatting structured JSON payloads.     │
  │    The Console sink enables these templates with use_sink_transform: true.             │
  │                                                                                        │
  │  * Cross-Item Cache Reads -- The cache("sliding_window/Temperature", 0) call reads     │
  │    another item's most recent value using the absolute path "sourceName/itemName".     │
  │    The second argument (0) is the default if the cache entry does not yet exist.       │
  │    Items are evaluated in order, so Temperature runs before its dependents.            │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```

================================================================================
FILE: content/EX28-unified-namespace.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX28 — UNIFIED NAMESPACE (UNS)                                       DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Demonstrates Industry 4.0 Unified Namespace (UNS) principles using DIME. Three        │
  │  simulated sources (PLC, Robot, Sensors) publish to an MQTT broker following ISA-95    │
  │  hierarchical topics. An analytics engine computes OEE, production rate, and           │
  │  environmental health from cached data. 10-file multi-file configuration.              │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌───────────────┐
       │  plc1         │  1000ms   Machine state, part counts,
       │  (Script)     │           quality rate, cycle time, temp
       └──────┬────────┘
              │         ┌─────────────────────────────┐
       ┌──────┴────────┐│                             │
       │  robot1       ││   Disruptor Ring Buffer     │    ┌──────────────────┐
       │  (Script)     ││   4096 slots                ├───▶│  unsMqtt (MQTT)  │  :1883
       │  500ms        │├─────────────────────────────┤    └──────────────────┘
       └──────┬────────┘│                             │    ┌──────────────────┐
              │         │                             ├───▶│  consoleSink     │  stdout
       ┌──────┴────────┐│                             │    └──────────────────┘
       │  envSensors   ││                             │    ┌──────────────────┐
       │  (Script)     │├─────────────────────────────┤───▶│  webHttpServer   │  :8090
       │  5000ms       ││                             │    └──────────────────┘
       └──────┬────────┘│                             │    ┌──────────────────┐
              │         │                             ├───▶│  webWsServer     │  ws:8092
       ┌──────┴────────┐│                             │    └──────────────────┘
       │analyticsEngine││                             │
       │  (Script)     ││                             │
       │  5000ms       ││                             │
       └───────────────┘└─────────────────────────────┘

         4 SOURCES              RING BUFFER                    4 SINKS
     (Lua simulation)         (4096 slots)            (MQTT + Console + Web)

  ISA-95 TOPIC HIERARCHY
  ──────────────────────

       Acme / Dallas / Assembly / plc1      / Execution
       Acme / Dallas / Assembly / plc1      / PartCount
       Acme / Dallas / Assembly / robot1    / Status
       Acme / Dallas / Assembly / robot1    / PositionX
       Acme / Dallas / Assembly / envSensors/ AmbientTemperature
       ───────┬──────────┬──────────┬─────────────┬────────────
        Enterprise     Site      Area         Device / Property

  CONFIGURATION                                                          [10 files, 1 folder]
  ─────────────

  ┌─ plc1_source.yaml ───────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  plc1: &plc1                                                                             │
  │    name: plc1                                                                            │
  │    enabled: !!bool true                                                                  │
  │    scan_interval: !!int 1000              # Poll every second                            │
  │    connector: Script                                                                     │
  │    rbe: !!bool true                                                                      │
  │    init_script: |                                                                        │
  │      math.randomseed(os.time())                                                          │
  │      machine_states = {'IDLE', 'RUNNING', 'STOPPED', 'FAULT', 'MAINTENANCE'}             │
  │      current_state_index = 2              # Start RUNNING                                │
  │      part_count = 0                                                                      │
  │      good_parts = 0                                                                      │
  │      reject_parts = 0                                                                    │
  │    items:                                                                                │
  │      - name: Execution                    # 5% chance state change each scan             │
  │        script: |                                                                         │
  │          if math.random() < 0.05 then                                                    │
  │            current_state_index = math.random(1, #machine_states)                         │
  │          end                                                                             │
  │          return machine_states[current_state_index]                                      │
  │        sink:                                                                             │
  │          transform:                                                                      │
  │            type: script                                                                  │
  │            template: Message.Data                                                        │
  │      - name: PartCount                    # Increments when RUNNING                      │
  │      - name: GoodParts                                                                   │
  │      - name: RejectParts                                                                 │
  │      - name: QualityRate                  # (good/total) * 100                           │
  │      - name: CycleTime                    # 1800ms +/- 200ms                             │
  │      - name: Temperature                  # State-dependent range                        │
  │      - name: Pressure                     # 90 +/- 5 PSI                                 │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ robot1_source.yaml ─────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  robot1: &robot1                                                                         │
  │    name: robot1                                                                          │
  │    scan_interval: !!int 500               # 2x PLC rate for smooth motion                │
  │    connector: Script                                                                     │
  │    rbe: !!bool true                                                                      │
  │    init_script: |                                                                        │
  │      robot_states = {'IDLE', 'PICKING', 'PLACING', 'MOVING', 'ERROR'}                    │
  │      position_x = 500.0                                                                  │
  │      position_y = 300.0                                                                  │
  │      position_z = 200.0                                                                  │
  │    items:                                                                                │
  │      - name: Status                       # IDLE/PICKING/PLACING/MOVING/ERROR            │
  │      - name: PositionX                    # 0-1000mm Cartesian                           │
  │      - name: PositionY                    # 0-600mm                                      │
  │      - name: PositionZ                    # 0-400mm                                      │
  │      - name: Velocity                     # mm/s, state-dependent                        │
  │      - name: Cycles                       # Completed pick-place cycles                  │
  │      - name: PicksCompleted                                                              │
  │      - name: PlacesCompleted                                                             │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ sensors_source.yaml ────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  envSensors: &envSensors                                                                 │
  │    name: envSensors                                                                      │
  │    scan_interval: !!int 5000              # Environmental data changes slowly            │
  │    connector: Script                                                                     │
  │    rbe: !!bool true                                                                      │
  │    items:                                                                                │
  │      - name: AmbientTemperature           # 68-76 F drift                                │
  │      - name: RelativeHumidity             # 30-60% drift                                 │
  │      - name: AirQuality                   # Index 70-95                                  │
  │      - name: VibrationLevel               # Cross-connector: cache('plc1/Execution')     │
  │        script: |                          #   higher vibration when PLC is RUNNING       │
  │          local plc_status = cache('plc1/Execution', 'IDLE')                              │
  │          if plc_status == 'RUNNING' then                                                 │
  │            vibration = 2.0 + math.random() * 1.5                                         │
  │          else                                                                            │
  │            vibration = 0.3 + math.random() * 0.3                                         │
  │          end                                                                             │
  │          return math.floor(vibration * 100) / 100                                        │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ analytics_source.yaml ──────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  analyticsEngine: &analyticsEngine                                                       │
  │    name: analyticsEngine                                                                 │
  │    scan_interval: !!int 5000              # Compute metrics every 5s                     │
  │    connector: Script                                                                     │
  │    init_script: |                                                                        │
  │      moses = require('moses')             # Functional programming library               │
  │      oee_history = {}                                                                    │
  │    items:                                                                                │
  │      - name: OEE                          # Availability x Performance x Quality         │
  │        script: |                                                                         │
  │          local execution = cache('plc1/Execution', 'UNKNOWN')                            │
  │          local availability = (execution == 'RUNNING') and 1.0 or 0.0                    │
  │          local cycle_time = cache('plc1/CycleTime', 2000)                                │
  │          local performance = math.min(1800 / cycle_time, 1.0)                            │
  │          local quality = cache('plc1/QualityRate', 100.0) / 100.0                        │
  │          return math.floor(availability * performance * quality * 1000) / 10             │
  │      - name: ProductionRate               # Parts per minute from delta                  │
  │      - name: QualityTrend                 # "improving" / "stable" / "declining"         │
  │      - name: LineEfficiency               # Robot cycles vs PLC parts sync               │
  │      - name: EnvironmentalHealth          # Composite score from temp/humidity/air       │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ uns_mqtt_sink.yaml ─────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  unsMqtt: &unsMqtt                                                                       │
  │    name: unsMqtt                                                                         │
  │    scan_interval: !!int 100               # Fast publish for real-time UNS               │
  │    connector: MQTT                                                                       │
  │    use_sink_transform: !!bool true                                                       │
  │    address: localhost                                                                    │
  │    port: !!int 1883                                                                      │
  │    base_topic: Acme/Dallas/Assembly       # ISA-95 hierarchy root                        │
  │    qos: !!int 1                           # At-least-once delivery                       │
  │    retain: !!bool true                    # Late subscribers get current state           │
  │    clean_session: !!bool true                                                            │
  │    exclude_filter:                                                                       │
  │      - plc1/\$SYSTEM                                                                     │
  │      - robot1/\$SYSTEM                                                                   │
  │      - envSensors/\$SYSTEM                                                               │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ console_sink.yaml ──────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  consoleSink: &consoleSink                                                               │
  │    name: consoleSink                                                                     │
  │    connector: Console                                                                    │
  │    use_sink_transform: !!bool true                                                       │
  │    exclude_filter:                        # Hide system messages                         │
  │      - plc1/\$SYSTEM                                                                     │
  │      - robot1/\$SYSTEM                                                                   │
  │      - envSensors/\$SYSTEM                                                               │
  │      - unsConsumer/\$SYSTEM                                                              │
  │      - unsMqtt/\$SYSTEM                                                                  │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ web_http_server.yaml / web_ws_server.yaml ──────────────────────────────────────────────┐
  │                                                                                          │
  │  webHttpServer: &webHttpServer            # Static file server                           │
  │    connector: WebServer                                                                  │
  │    uri: http://localhost:8090/                                                           │
  │    web_root: ./Configs/Examples/UNS01/web                                                │
  │                                                                                          │
  │  webWsServer: &webWsServer                # Real-time data push                          │
  │    connector: WebsocketServer                                                            │
  │    uri: ws://0.0.0.0:8092/                                                               │
  │    use_sink_transform: !!bool false                                                      │
  │    exclude_filter:                                                                       │
  │      - .*/\$SYSTEM/.*                                                                    │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ main.yaml ──────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  app:                                                                                    │
  │    license: DEMO-0000-0000-0000-0000-0000-0000-0000                                      │
  │    ring_buffer: !!int 4096                                                               │
  │    http_server_uri: http://127.0.0.1:9999/                                               │
  │    ws_server_uri: ws://127.0.0.1:9998/                                                   │
  │                                                                                          │
  │  sources:                                 # Loaded last, references all anchors          │
  │    - *plc1                                                                               │
  │    - *robot1                                                                             │
  │    - *envSensors                                                                         │
  │    - *analyticsEngine                                                                    │
  │                                                                                          │
  │  sinks:                                                                                  │
  │    - *unsMqtt                                                                            │
  │    - *consoleSink                                                                        │
  │    - *webHttpServer                                                                      │
  │    - *webWsServer                                                                        │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * ISA-95 Topic Hierarchy -- The UNS uses Enterprise/Site/Area/Line/Device/Property    │
  │    as MQTT topics. The MQTT sink's base_topic sets the root; DIME appends              │
  │    sourceName/itemName automatically, forming the full hierarchy.                      │
  │                                                                                        │
  │  * Cross-Connector Caching -- The analytics engine reads PLC, robot, and sensor data   │
  │    via cache('sourceName/itemName'). No direct wiring needed; the ring buffer and      │
  │    cache system handle decoupling. Sensors read PLC state for vibration correlation.   │
  │                                                                                        │
  │  * MQTT Retain -- Setting retain: true means late-joining subscribers immediately      │
  │    receive the last published value for each topic. Essential for UNS so new clients   │
  │    see current state without waiting for the next scan cycle.                          │
  │                                                                                        │
  │  * OEE Calculation -- Availability (is machine running) x Performance (actual vs       │
  │    ideal cycle time) x Quality (good parts ratio). The moses library provides          │
  │    functional helpers like moses.last() and moses.mean() for rolling windows.          │
  │                                                                                        │
  │  * Multi-Rate Sources -- PLC at 1s, robot at 500ms, sensors at 5s. Each source         │
  │    polls at the rate appropriate for its data. The ring buffer accepts them all.       │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```
================================================================================
FILE: content/EX29-multi-machine-shop-floor.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX29 — MULTI-MACHINE SHOP FLOOR                                     DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Connects diverse CNC machines from a real shop floor into a single ring buffer.       │
  │  Haas via SHDR, TCP-ASCII, and XML scraping. Mazak via MTConnect Agent. Rockwell PLC   │
  │  via EtherNet/IP. Output to Console, MQTT, SHDR, CSV, HTTP, and WebSocket sinks.       │
  │  14-file config demonstrating multi-protocol, multi-vendor integration.                │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌──────────────────┐ SHDR
       │  haas1           │ :9998    ┌───────────────────────────────┐
       │  HaasSHDR        │──────┐   │                               │
       └──────────────────┘      │   │    Disruptor Ring Buffer      │
       ┌──────────────────┐ XML  │   │    4096 slots                 │
       │  haas2           │ :8082│   │                               │
       │  XMLWebScraper   │──────┤   │  ┌─────────────────────────┐  │
       └──────────────────┘      ├──▶│  │  One unified data model │  │
       ┌──────────────────┐ TCP  │   │  │  from 5 diverse sources │  │
       │  haas5           │ :5051│   │  └─────────────────────────┘  │
       │  TcpASCII        │──────┤   │                               │
       └──────────────────┘      │   └──────────┬────────────────────┘
       ┌──────────────────┐ HTTP │              │
       │  mazak1          │ :5719│         ┌────┴────┐
       │  MTConnectAgent  │──────┤         │ Routing │
       └──────────────────┘      │         └────┬────┘
       ┌──────────────────┐ EIP  │              │
       │  rock1           │      │   ┌──────────┼──────────────┐
       │  EthernetIP      │──────┘   │          │              │
       └──────────────────┘           ▼          ▼              ▼
                               ┌─────────┐ ┌────────┐ ┌──────────┐
                               │ Console │ │  MQTT  │ │   SHDR   │
                               └─────────┘ └────────┘ └──────────┘

         5 SOURCES                                      6+ SINKS
    (5 different protocols)                     (Console, MQTT, SHDR,
                                                CSV, HTTP, WebSocket)

  CONFIGURATION                                                         [14 files, 0 folders]
  ─────────────

  ┌─ haas1.yaml — HaasSHDR connector ────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  haas1: &haas1                                                                           │
  │    name: haas1                                                                           │
  │    connector: HaasSHDR                    # Native Haas SHDR protocol                    │
  │    address: 192.168.111.216                                                              │
  │    port: !!int 9998                                                                      │
  │    timeout: !!int 1000                                                                   │
  │    heartbeat_interval: !!int 0                                                           │
  │    retry_interval: !!int 10000                                                           │
  │    create_dummy_messages_on_startup: !!bool true                                         │
  │    sink:                                                                                 │
  │      transform:                                                                          │
  │        type: script                                                                      │
  │        template: Message.Data                                                            │
  │    items:                                                                                │
  │      - name: CPU                          # Spindle load percentage                      │
  │        address: CPU                                                                      │
  │        sink:                                                                             │
  │          mtconnect: Device[name=device1]/Controller/Load[category=Sample]                │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ haas2.yaml — XMLWebScraper connector ───────────────────────────────────────────────────┐
  │                                                                                          │
  │  haas2: &haas2                                                                           │
  │    connector: XMLWebScraper               # Scrape MTConnect XML endpoint                │
  │    uri: http://192.168.111.216:8082/current                                              │
  │    namespaces:                                                                           │
  │      mt: urn:mtconnect.org:MTConnectStreams:1.2                                          │
  │    item_script: |                         # XPath extraction                             │
  │      return result.InnerText                                                             │
  │    items:                                                                                │
  │      - name: SpindleLoad                                                                 │
  │        address: //mt:Message[@dataItemId='sp2maxpwr']                                    │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ haas5.yaml — TcpASCII connector ────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  haas5: &haas5                                                                           │
  │    connector: TcpASCII                    # Raw TCP Q-commands to Haas                   │
  │    address: 192.168.111.216                                                              │
  │    port: !!int 5051                                                                      │
  │    read_delay: !!int 600                                                                 │
  │    scan_interval: !!int 7000              # Slow poll for macro variables                │
  │    init_script: |                                                                        │
  │      stringx = require('pl.stringx')      # Penlight string utilities                    │
  │      clean_response = function(response) ... end                                         │
  │      get_value = function(response) ... end                                              │
  │    items:                                 # Q-codes: ?Q100=serial, ?Q104=mode, etc.      │
  │      - name: SerialNumber                                                                │
  │        address: ?Q100                                                                    │
  │      - name: Mode                                                                        │
  │        address: ?Q104                                                                    │
  │      - name: ToolNumber                                                                  │
  │        address: ?Q201                                                                    │
  │      - name: XActualPosition                                                             │
  │        address: ?Q600 5041                # Macro variable read                          │
  │      - name: SpindleSpeed                                                                │
  │        address: ?Q600 3027                                                               │
  │      # ... 16 items including ThreeInOne using emit()                                    │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ mazak1.yaml — MTConnectAgent connector ─────────────────────────────────────────────────┐
  │                                                                                          │
  │  mazak1: &mazak1                                                                         │
  │    connector: MTConnectAgent              # Standard MTConnect HTTP agent                │
  │    address: mtconnect.mazakcorp.com                                                      │
  │    port: !!int 5719                                                                      │
  │    itemized_read: !!bool true                                                            │
  │    sink:                                                                                 │
  │      transform:                                                                          │
  │        type: script                                                                      │
  │        template: >-                                                                      │
  │          Message.Data[0].Value            # Extract first data item value                │
  │    items:                                                                                │
  │      - name: XLoad                                                                       │
  │        address: Xload                                                                    │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ rock1.yaml — EthernetIP connector ──────────────────────────────────────────────────────┐
  │                                                                                          │
  │  rock1: &rock1                                                                           │
  │    connector: EthernetIP                  # Allen-Bradley MicroLogix PLC                 │
  │    type: micrologix                                                                      │
  │    address: 192.168.111.20                                                               │
  │    path: 1,0                                                                             │
  │    bypass_ping: !!bool true                                                              │
  │    items:                                                                                │
  │      - name: Execution                                                                   │
  │        type: bool                                                                        │
  │        address: N77:1                                                                    │
  │        script: |                          # Map 0/1 to Ready/Active                      │
  │          local m = { [0]='Ready', [1]='Active' }                                         │
  │          return m[result and 1 or 0]                                                     │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ sink files: console.yaml, mqtt1.yaml, shdr.yaml, csv1.yaml, etc. ───────────────────────┐
  │                                                                                          │
  │  console: &console                        # Debug output                                 │
  │    connector: Console                                                                    │
  │    exclude_filter: [/\$SYSTEM]                                                           │
  │                                                                                          │
  │  mqtt1: &mqtt1                            # Publish to MQTT broker                       │
  │    connector: MQTT                                                                       │
  │    address: wss.sharc.tech                                                               │
  │    base_topic: mtconnect_demo                                                            │
  │                                                                                          │
  │  shdr: &shdr                              # Re-publish as MTConnect SHDR                 │
  │    connector: MTConnectSHDR                                                              │
  │    port: !!int 7878                                                                      │
  │    heartbeat_interval: !!int 10000                                                       │
  │                                                                                          │
  │  csv1: &csv1                              # Log to CSV file                              │
  │    connector: CSVWriter                                                                  │
  │    filename: ./Output/haas1.csv                                                          │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ main.yaml ──────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  app:                                                                                    │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                      │
  │    ring_buffer: !!int 4096                                                               │
  │  sources:                                                                                │
  │    - *haas1                               # Enable/disable by commenting                 │
  │    - *haas5                                                                              │
  │    - *mazak1                                                                             │
  │    - *rock1                                                                              │
  │  sinks:                                                                                  │
  │    - *console                                                                            │
  │    - *mqtt1                                                                              │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Multi-Protocol Sources -- Five connectors using five different protocols (SHDR,     │
  │    XML scraping, TCP-ASCII, MTConnect HTTP, EtherNet/IP) all feed the same ring        │
  │    buffer. DIME normalizes them into MessageBoxMessage format.                         │
  │                                                                                        │
  │  * MTConnect Metadata -- Each item carries sink.mtconnect annotations that describe    │
  │    its position in an MTConnect device model (Device/Axes/Path). The SHDR and          │
  │    MTConnectAgent sinks use this metadata for standards-compliant output.              │
  │                                                                                        │
  │  * emit() for Multi-Value Responses -- haas5's ThreeInOne item sends one TCP command   │
  │    (?Q500) but receives program name, status, and part count in one response. The      │
  │    emit_mtconnect() function publishes each as a separate observation with its own     │
  │    MTConnect annotation, then returns nil to suppress the raw response.                │
  │                                                                                        │
  │  * Penlight String Library -- The TcpASCII source uses Penlight's pl.stringx for       │
  │    parsing comma-separated responses from the Haas controller. Libraries loaded in     │
  │    init_script persist for all item evaluations.                                       │
  │                                                                                        │
  │  * Flexible Sink Routing -- main.yaml enables/disables sinks by commenting aliases.    │
  │    The same data can flow to Console for debugging, MQTT for cloud, SHDR for           │
  │    MTConnect agents, and CSV for offline analysis simultaneously.                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```
================================================================================
FILE: content/EX30-cnc-machine-simulator.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX30 — CNC MACHINE SIMULATOR                                        DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Simulates a full CNC machine with state machine (IDLE/SETUP/RUNNING/FAULT), power     │
  │  consumption, temperature, vibration, and production tracking. An analytics processor  │
  │  computes moving averages, cycle detection, anomaly detection, OEE, and predictive     │
  │  maintenance scores. Test a complete monitoring pipeline without hardware.             │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌───────────────────────┐
       │  machine_simulator    │ 1000ms
       │  (Script)             │ State machine: IDLE -> SETUP -> RUNNING -> IDLE
       │                       │ Outputs: Power, Temp, Vibration, Status, Fault
       └──────────┬────────────┘
                  │
       ┌──────────┴────────────┐              ┌──────────────────────────┐
       │  production_simulator │ 5000ms       │                          │
       │  (Script)             │──────────┐   │    Disruptor Ring        │
       │  Reads machine_       │          │   │    Buffer (4096)         │
       │  simulator cache      │          ├──▶│                          │
       └───────────────────────┘          │   │                          │
                                          │   └──────────┬───────────────┘
       ┌───────────────────────┐          │              │
       │  analytics_processor  │ 1000ms   │         ┌────┴─────┐
       │  (Script)             │──────────┘         │          │
       │  Power/Temp/Vibration │              ┌─────┴──┐  ┌────┴───────┐
       │  analysis, OEE calc,  │              │Console │  │ MTConnect  │
       │  predictive maint.    │              │  Sink  │  │   Agent    │
       └───────────────────────┘              └────────┘  └────────────┘

         3 SOURCES                   RING BUFFER              2 SINKS
     (machine + production       (4096 slots)            (console + MTC)
      + analytics)

  CONFIGURATION                                                           [7 files, 0 folders]
  ─────────────

  ┌─ machine_simulator.yaml ─────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  machine_simulator: &machine_simulator                                                   │
  │    connector: Script                                                                     │
  │    scan_interval: !!int 1000                                                             │
  │    sink:                                                                                 │
  │      transform:                                                                          │
  │        type: script                                                                      │
  │        template: Message.Data                                                            │
  │    init_script: |                                                                        │
  │      MACHINE_STATE = { IDLE=0, SETUP=1, RUNNING=2, FAULT=3, MAINTENANCE=4 }              │
  │      current_state = MACHINE_STATE.IDLE                                                  │
  │      ideal_cycle_time = 15                # 15 seconds per cycle                         │
  │      power_running_mean = 35.0            # kW during cutting                            │
  │      fault_probability = 0.001            # 0.1% per second                              │
  │      quality_rate = 0.95                  # 95% good parts                               │
  │    enter_script: |                        # State machine transitions each scan          │
  │      -- IDLE: 30% chance to start SETUP                                                  │
  │      -- SETUP: immediately to RUNNING                                                    │
  │      -- RUNNING: check if cycle_time elapsed, then IDLE                                  │
  │      -- FAULT: 60% chance to resolve each scan                                           │
  │      -- Random fault: 0.1% chance per second                                             │
  │      -- Temperature: rises during RUNNING, falls otherwise                               │
  │    items:                                                                                │
  │      - name: PowerConsumption             # Ramp-up/hold/ramp-down power profile         │
  │      - name: MainMotorTemp                # Gradual temperature simulation               │
  │      - name: VibrationLevel               # Cyclic vibration + deterioration             │
  │      - name: CycleActive                  # Boolean: is machine in a cycle?              │
  │      - name: MachineStatus                # IDLE / SETUP / RUNNING / FAULT               │
  │      - name: FaultStatus                  # "NORMAL" or fault description                │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ production_simulator.yaml ──────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  production_simulator: &production_simulator                                             │
  │    connector: Script                                                                     │
  │    scan_interval: !!int 5000              # KPIs updated every 5 seconds                 │
  │    init_script: |                                                                        │
  │      daily_production_target = 450                                                       │
  │      current_order = {                                                                   │
  │        order_id = "ORD-29385",                                                           │
  │        quantity = 1500,                                                                  │
  │        completed = 783                                                                   │
  │      }                                                                                   │
  │    items:                                                                                │
  │      - name: CycleTimeHistory             # Time-of-day variation pattern                │
  │      - name: PartCountToday               # cache("machine_simulator/parts_today")       │
  │      - name: QualityRateToday             # Derived from machine_simulator cache         │
  │      - name: ProductionProgress           # Order tracking with remaining count          │
  │      - name: DowntimeReason               # Weighted random: Tool Change, etc.           │
  │      - name: ProductionTarget             # Target vs. actual comparison                 │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ analytics.yaml (abbreviated -- full file is ~600 lines) ────────────────────────────────┐
  │                                                                                          │
  │  analytics_processor: &analytics_processor                                               │
  │    name: analytics                                                                       │
  │    connector: Script                                                                     │
  │    scan_interval: !!int 1000                                                             │
  │    init_script: |                         # ~230 lines of utility functions              │
  │      MOVING_AVG_WINDOW = 10               # Smoothing window size                        │
  │      CYCLE_THRESHOLD = 25.0               # Power threshold for cycle detection          │
  │      ANOMALY_THRESHOLD = 3.0              # Std deviations for anomaly flag              │
  │      -- Utility functions:                                                               │
  │      --   calculate_moving_average(values)                                               │
  │      --   calculate_stddev(values, avg)                                                  │
  │      --   process_cycle_detection(power, timestamp, history)                             │
  │      --   calculate_rate_of_change(values, timestamps)                                   │
  │      --   detect_trend(values, timestamps)    -- linear regression                       │
  │      --   calculate_oee()                     -- Availability x Perf x Quality           │
  │    enter_script: |                        # Periodic OEE recalculation                   │
  │      -- Every 5 minutes: emit OEE/Availability, OEE/Performance, etc.                    │
  │    exit_script: |                         # Alert detection                              │
  │      -- Emit Alerts/HighTemperature if temp > 85                                         │
  │      -- Emit Alerts/HighVibration if vibration > 25                                      │
  │    items:                                                                                │
  │      - name: PowerAnalysis                # Moving avg, trend, cycle detection           │
  │      - name: TemperatureAnalysis          # Heating/cooling rate, temp bands             │
  │      - name: VibrationAnalysis            # Frequency band decomposition                 │
  │      - name: MachineHealthStatus          # Composite health score 0-100                 │
  │      - name: OEEDashboard                 # Availability/Performance/Quality             │
  │      - name: PredictiveMaintenance        # Wear index, days until maintenance           │
  │      - name: AnomalyDetection             # Active anomaly summary                       │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ main.yaml ──────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  app:                                                                                    │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                      │
  │    ring_buffer: !!int 4096                                                               │
  │  sources:                                                                                │
  │    - *machine_simulator                                                                  │
  │    - *production_simulator                                                               │
  │    - *analytics_processor                                                                │
  │  sinks:                                                                                  │
  │    - *console                                                                            │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * State Machine Simulation -- The machine_simulator enter_script implements a full    │
  │    state machine with probabilistic transitions. The set("./current_state", value)     │
  │    pattern persists state between scans. Other sources read it via cache().            │
  │                                                                                        │
  │  * Analytics Pipeline -- The analytics source reads machine_simulator data through     │
  │    the cache, computes moving averages, detects power cycles using threshold           │
  │    crossing, and runs linear regression for trend detection. All in embedded Lua.      │
  │                                                                                        │
  │  * emit() for Multiple Observations -- The analytics source uses emit('./PowerTrend',  │
  │    trend) to publish derived metrics as separate items. The enter_script uses emit()   │
  │    for periodic OEE calculations. The exit_script uses emit() for alert conditions.    │
  │                                                                                        │
  │  * Cross-Source Dependencies -- production_simulator reads machine_simulator cache     │
  │    for part counts and state. analytics reads both for comprehensive analysis. This    │
  │    three-source pipeline demonstrates DIME's data combination pattern.                 │
  │                                                                                        │
  │  * Predictive Maintenance -- The wear index combines vibration band analysis,          │
  │    temperature, and power anomaly counts to estimate days until maintenance. A         │
  │    simple but illustrative ML-adjacent pattern using pure Lua.                         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```
================================================================================
FILE: content/EX31-self-contained-dashboard.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX31 — SELF-CONTAINED DASHBOARD                                     DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Builds a zero-dependency monitoring dashboard using DIME's WebServer and WebSocket    │
  │  sinks. A Script source simulates a sheet-metal press brake machine (GWB/Ultiform)     │
  │  with 50+ OPC-UA-style variables: machine state, job tracking, part quality,           │
  │  hydraulics, maintenance timers, and remote diagnostics. The browser connects to       │
  │  WebSocket for live data without any external web framework.                           │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌────────────────────────────┐
       │  gwb00_simulator (Script)  │  1000ms
       │                            │
       │  50+ items simulating      │         ┌──────────────────────────────┐
       │  OPC-UA variable tree:     │         │                              │
       │                            │         │    Disruptor Ring Buffer     │
       │  Machine/Kind              │         │    4096 slots                │
       │  MachineStatus/Active      │─────┬──▶│                              │
       │  ActiveJob/Quantity/*      │     │   └──────────┬───────────────────┘
       │  Maintenance/*/Overdue     │     │              │
       │  RemoteDiagnosis/Hydr/*    │     │    ┌─────────┼────────────────┐
       │  RemoteDiagnosis/EFL/*     │     │    │         │        │       │
       └────────────────────────────┘     │    ▼         ▼        ▼       ▼
                                          │  ┌──────┐ ┌──────┐ ┌─────┐ ┌──────┐
            1 SOURCE                      │  │WebSrv│ │  WS  │ │HTTP │ │ Con- │
        (Lua state machine)               │  │:8080 │ │:8082 │ │:8081│ │ sole │
                                          │  └──────┘ └──────┘ └─────┘ └──────┘
                                          │   Static   Real-    REST    Debug
                                          │   HTML/JS  time     API
                                          │            push

  CONFIGURATION                                                    [7 files, 1 web/ folder]
  ─────────────

  ┌─ gwb00_simulator.yaml (abbreviated -- 50+ items) ────────────────────────────────────────┐
  │                                                                                          │
  │  gwb00_simulator: &gwb00_simulator                                                       │
  │    name: gwb00_simulator                                                                 │
  │    connector: Script                                                                     │
  │    scan_interval: !!int 1000                                                             │
  │    rbe: !!bool true                                                                      │
  │    init_script: |                                                                        │
  │      set('./internal/machine_state', 1)   # Start with OFF                               │
  │      set('./job/total', 100)                                                             │
  │      set('./job/completed', 0)                                                           │
  │      set('./maintenance/last_lubrication', os.time() - (120*60*60))                      │
  │      set('./maintenance/last_audit', os.time() - (600*60*60))                            │
  │    items:                                                                                │
  │      # Machine Info                                                                      │
  │      - name: Machine/Kind                                                                │
  │        script: return "PBMACHINE"                                                        │
  │      - name: Machine/Name                                                                │
  │        script: return "38727"                                                            │
  │                                                                                          │
  │      # State Machine: OFF -> SETUP -> EXECUTING -> SETUP (90%) or DOWN (10%)             │
  │      - name: MachineStatus/Active                                                        │
  │        script: |                                                                         │
  │          local states = {"OFF","SETUP","STARVED","EXECUTING","DOWN"}                     │
  │          local current_state = cache('./internal/machine_state', 1)                      │
  │          -- Transitions every ~15 seconds based on execution count                       │
  │          ...                                                                             │
  │          return states[current_state]                                                    │
  │                                                                                          │
  │      # Cycle status: IDLE/WAIT PEDAL/DESCENDING/FORMING/ASCENDING/COMPLETE               │
  │      - name: MachineRt/Cycle/Status                                                      │
  │                                                                                          │
  │      # Job tracking: quantities, timing, estimated vs actual                             │
  │      - name: ActiveJob/Quantity/Completed                                                │
  │        script: |                          # 2% chance per scan during EXECUTING          │
  │          if machine_state == "EXECUTING" and math.random() < 0.02 then                   │
  │            completed = completed + 1      # 95% good rate                                │
  │          end                                                                             │
  │                                                                                          │
  │      # Maintenance timers: lubrication (168h), audit (720h), cartridge (2160h)           │
  │      - name: Maintenance/Lubrication/Overdue                                             │
  │        script: |                                                                         │
  │          local last = cache('./maintenance/last_lubrication', os.time())                 │
  │          return (os.time() - last) > 168 * 60 * 60                                       │
  │                                                                                          │
  │      # Remote diagnostics: hydraulics, PLC inputs, PCSS, EFL                             │
  │      - name: RemoteDiagnosis/Hydr/Hydr0/ControlOut                                       │
  │      - name: RemoteDiagnosis/PCSS/Condition                                              │
  │      - name: RemoteDiagnosis/EFL/Mode                                                    │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ webserver_sink.yaml ────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  web_server: &web_server                                                                 │
  │    connector: WebServer                   # Built-in HTTP file server                    │
  │    uri: http://127.0.0.1:8080/                                                           │
  │    web_root: ./Configs/web                # Serves index.html, JS, CSS                   │
  │    exclude_filter:                                                                       │
  │      - ".*"                               # Block ALL data -- files only                 │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ websocket_sink.yaml ────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  websocket_stream: &websocket_stream                                                     │
  │    connector: WebsocketServer             # Real-time push to browsers                   │
  │    uri: ws://localhost:8082/              # Different port from HTTP server              │
  │    scan_interval: !!int 1000                                                             │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ httpserver_sink.yaml / console_sink.yaml ───────────────────────────────────────────────┐
  │                                                                                          │
  │  http_server: &http_server                # REST API for latest values                   │
  │    connector: HTTPServer                                                                 │
  │    uri: http://localhost:8081/                                                           │
  │                                                                                          │
  │  console_output: &console_output          # Debug output                                 │
  │    connector: Console                                                                    │
  │    use_sink_transform: !!bool true                                                       │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ main.yaml ──────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  app:                                                                                    │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                      │
  │    ring_buffer: !!int 4096                                                               │
  │  sources:                                                                                │
  │    - *gwb00_simulator                                                                    │
  │  sinks:                                                                                  │
  │    - *console_output                                                                     │
  │    - *http_server                                                                        │
  │    - *websocket_stream                                                                   │
  │    - *web_server                                                                         │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * WebServer + WebSocket Pattern -- The WebServer sink serves static files (HTML,      │
  │    JS, CSS) on one port. The WebSocket sink streams live data on another port. The     │
  │    browser loads the page from WebServer, then opens a WebSocket to receive updates.   │
  │    exclude_filter: ".*" on WebServer prevents it from processing data messages.        │
  │                                                                                        │
  │  * Hierarchical Item Names -- Items use path-like names (Machine/Kind,                 │
  │    ActiveJob/Quantity/Good, RemoteDiagnosis/Hydr/Hydr0/ControlOut). These map          │
  │    directly to OPC-UA variable structures. The browser receives them as                │
  │    "gwb00_simulator/Machine/Kind" paths.                                               │
  │                                                                                        │
  │  * Cache-Driven State Machine -- The simulator uses cache() and set() to manage        │
  │    execution counts and state transitions. Each item reads the cached machine state    │
  │    to determine its output, creating coordinated behavior across 50+ items.            │
  │                                                                                        │
  │  * Maintenance Timers -- Items calculate overdue status by comparing current time      │
  │    against cached last-maintenance timestamps with configurable intervals (168h,       │
  │    720h, 2160h). Real OPC-UA machines expose identical data structures.                │
  │                                                                                        │
  │  * Four Sink Architecture -- Console for development, HTTP for polling clients,        │
  │    WebSocket for real-time dashboards, WebServer for hosting the dashboard itself.     │
  │    Each sink serves a different consumption pattern from the same ring buffer.         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```
================================================================================
FILE: content/EX32-mqtt-motor-aggregation.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX32 — MQTT MOTOR AGGREGATION                                       DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Demonstrates multi-instance MQTT sourcing, Lua JSON aggregation, and cross-connector  │
  │  cache patterns. ChicagoPlant reads five MQTT topics from IoT sensors (amperage, RPM,  │
  │  temperature, vibration, belt speed) and aggregates them into a single Motor object.   │
  │  DetroitPlant mirrors Chicago data via cache, demonstrating cross-plant data sharing.  │
  │  Output to Console, HTTP, MQTT, and optional Redis.                                    │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌───────────────────────┐   MQTT topics from IoT sensors
       │  ChicagoPlant (MQTT)  │   sharc/08d1f9540058/evt/io/s3  (Amperage)
       │  wss.sharc.tech:1883  │   sharc/08d1f953ffe4/evt/io/s1  (Rpm)
       │                       │   sharc/48e7290b118c/.../temp    (Temperature)
       │  JSON decode + cache  │   sharc/48e7290b118c/.../Xhz     (Vibration)
       │  then aggregate into  │   sharc/08d1f9540b8c/evt/io/s3  (BeltSpeed)
       │  WC01/Motor object    │   sharc/08d1f953fffc/.../humidity (Humidity)
       └──────────┬────────────┘
                  │
       ┌──────────┴────────────┐         ┌──────────────────────────┐
       │  DetroitPlant (Script)│         │                          │
       │  Reads ChicagoPlant   │         │   Disruptor Ring Buffer  │
       │  via cache() API:     │────────▶│   4096 slots             │
       │                       │         │                          │
       │  cache("ChicagoPlant  │         └──────────┬───────────────┘
       │    /Amperage", 0)     │                    │
       │  cache("ChicagoPlant  │           ┌────────┼──────────┐
       │    /$SYSTEM/          │           │        │          │
       │    IsConnected",false)│           ▼        ▼          ▼
       └───────────────────────┘      ┌────────┐ ┌──────┐ ┌────────┐
                                      │Console │ │ HTTP │ │  MQTT  │
         2 SOURCES                    └────────┘ └──────┘ └────────┘
     (1 MQTT + 1 Script)                             3 SINKS

  CONFIGURATION                                                          [7 files, 0 folders]
  ─────────────

  ┌─ instanceMotor1A.yaml — MQTT source (ChicagoPlant) ──────────────────────────────────────┐
  │                                                                                          │
  │  instanceMotor1A: &instanceMotor1A                                                       │
  │    name: ChicagoPlant                                                                    │
  │    connector: MQTT                                                                       │
  │    address: wss.sharc.tech                                                               │
  │    port: !!int 1883                                                                      │
  │    qos: !!int 0                                                                          │
  │    itemized_read: !!bool true             # Each item has its own MQTT topic             │
  │    init_script: |                                                                        │
  │      json = require('json')               # JSON parsing library                         │
  │    items:                                                                                │
  │      - name: Amperage                                                                    │
  │        address: sharc/08d1f9540058/evt/io/s3                                             │
  │        script: |                                                                         │
  │          set(this.Name, json.decode(result).v.s3.v)   # Cache decoded value              │
  │          return nil                       # Suppress raw output (cache only)             │
  │      - name: Rpm                                                                         │
  │        address: sharc/08d1f953ffe4/evt/io/s1                                             │
  │        script: |                                                                         │
  │          set(this.Name, json.decode(result).v.s1.v)                                      │
  │          return nil                                                                      │
  │      - name: Temperature                                                                 │
  │        address: sharc/48e7290b118c/evt/io/temperature                                    │
  │        script: |                                                                         │
  │          set(this.Name, json.decode(result).v.v)                                         │
  │          return nil                                                                      │
  │      - name: Vibration                                                                   │
  │        address: sharc/48e7290b118c/evt/io/Xhz                                            │
  │        script: |                                                                         │
  │          set(this.Name, json.decode(result).v.v)                                         │
  │          return nil                                                                      │
  │      - name: BeltSpeed                                                                   │
  │        address: sharc/08d1f9540b8c/evt/io/s3                                             │
  │        script: |                                                                         │
  │          set(this.Name, json.decode(result).v.s3.v)                                      │
  │          return nil                                                                      │
  │      - name: WC01/Motor                   # Aggregation item                             │
  │        address: ~                         # No MQTT topic -- cache-driven                │
  │        script: |                                                                         │
  │          local motor = {                                                                 │
  │            name = "WC01-Motor",                                                          │
  │            amperage = cache("Amperage", 0),                                              │
  │            rpm = cache("Rpm", 0),                                                        │
  │            temperature = cache("Temperature", 0),                                        │
  │            vibration = cache("Vibration", 0),                                            │
  │            belt_speed = cache("BeltSpeed", 0)                                            │
  │          }                                                                               │
  │          return motor                                                                    │
  │      - name: Humidity                                                                    │
  │        address: sharc/08d1f953fffc/evt/io/humidity                                       │
  │        script: |                                                                         │
  │          return json.decode(result).v.v   # Direct return (no cache)                     │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ instanceMotor1B.yaml — Script source (DetroitPlant) ────────────────────────────────────┐
  │                                                                                          │
  │  instanceMotor1B: &instanceMotor1B                                                       │
  │    name: DetroitPlant                                                                    │
  │    connector: Script                      # Pure cache consumer -- no hardware           │
  │    rbe: !!bool true                                                                      │
  │    init_script: |                                                                        │
  │      json = require('json')                                                              │
  │    items:                                                                                │
  │      - name: WC02/Motor                   # Mirrors Chicago motor data                   │
  │        script: |                                                                         │
  │          local motor = {                                                                 │
  │            name = "WC02-Motor",                                                          │
  │            available = cache("ChicagoPlant/$SYSTEM/IsConnected", false),                 │
  │            amperage = cache("ChicagoPlant/Amperage", 0),                                 │
  │            rpm = cache("ChicagoPlant/Rpm", 0),                                           │
  │            temperature = cache("ChicagoPlant/Temperature", 0),                           │
  │            vibration = cache("ChicagoPlant/Vibration", 0),                               │
  │            belt_speed = cache("ChicagoPlant/BeltSpeed", 0),                              │
  │          }                                                                               │
  │          return motor                                                                    │
  │      - name: Humidity                                                                    │
  │        script: |                                                                         │
  │          return cache("ChicagoPlant/Humidity", 0)                                        │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ Sink files ─────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  consoleSink1: &consoleSink1              # Debug output                                 │
  │    connector: Console                                                                    │
  │                                                                                          │
  │  httpServerSink1: &httpServerSink1        # REST API                                     │
  │    connector: HTTPServer                                                                 │
  │    uri: http://localhost:8080/                                                           │
  │                                                                                          │
  │  mqttSink1: &mqttSink1                    # Republish aggregated data                    │
  │    connector: MQTT                                                                       │
  │    base_topic: MqttMotors                                                                │
  │    retain: !!bool true                                                                   │
  │    include_filter:                        # Only publish plant data                      │
  │      - DetroitPlant                                                                      │
  │      - ChicagoPlant                                                                      │
  │                                                                                          │
  │  redisSink1: &redisSink1                  # Optional Redis sink                          │
  │    connector: Redis                                                                      │
  │    address: 172.24.56.104:6379                                                           │
  │    include_filter:                                                                       │
  │      - DetroitPlant                       # Only Detroit data to Redis                   │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ main.yaml ──────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  app:                                                                                    │
  │    ring_buffer: !!int 4096                                                               │
  │  sources:                                                                                │
  │    - *instanceMotor1A                     # ChicagoPlant MQTT                            │
  │    - *instanceMotor1B                     # DetroitPlant Script                          │
  │  sinks:                                                                                  │
  │    - *consoleSink1                                                                       │
  │    - *httpServerSink1                                                                    │
  │    - *mqttSink1                                                                          │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Cache-Then-Aggregate Pattern -- Individual MQTT items decode JSON and cache via     │
  │    set(this.Name, value), returning nil to suppress raw output. A separate             │
  │    aggregation item reads all cached values and returns a composite object. This       │
  │    pattern decouples arrival timing from the aggregation schedule.                     │
  │                                                                                        │
  │  * address: ~ for Cache-Only Items -- The WC01/Motor item has no MQTT topic            │
  │    (address: ~). It runs every scan_interval purely to read cached values and          │
  │    build the aggregate. This is the standard DIME pattern for data combination.        │
  │                                                                                        │
  │  * Cross-Connector System State -- DetroitPlant reads ChicagoPlant/$SYSTEM/            │
  │    IsConnected to check if the remote MQTT connection is alive. Every connector        │
  │    publishes $SYSTEM items that other connectors can query through cache().            │
  │                                                                                        │
  │  * include_filter for Selective Routing -- The MQTT sink only publishes items          │
  │    matching "DetroitPlant" or "ChicagoPlant". The Redis sink only gets Detroit         │
  │    data. Filters route different data slices to different sinks from one ring buffer.  │
  │                                                                                        │
  │  * JSON Decode Patterns -- IoT sensors publish nested JSON like {v:{s3:{v:42}}}.       │
  │    The json.decode(result).v.s3.v chain navigates the structure. Different sensor      │
  │    payloads use different paths (v.s3.v, v.s1.v, v.v) -- Lua handles each in the       │
  │    item script.                                                                        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```
================================================================================
FILE: content/EX33-ros2-robotics.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX33 — ROS2 ROBOTICS                                                DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Bridges ROS2 (Robot Operating System 2) topics into MQTT for non-ROS systems. A       │
  │  single Ros2 connector subscribes to topics like /chatter, /emergency_stop, and        │
  │  /bms/status using typed message definitions loaded from external DLLs. Output goes    │
  │  to Console and MQTT. Single-file config for ROS2-to-enterprise integration.           │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌──────────────────────────────────────┐
       │           ROS2 Network               │
       │                                      │
       │  /chatter           (std_msgs/String)│
       │  /A300/emergency_stop (std_msgs/Bool)│
       │  /A300/bms/status   (sensor_msgs/    │
       │                      BatteryState)   │
       │  /A300/motors/status (clearpath_msgs/│
       │                      LynxMultiStatus)│
       └─────────────┬────────────────────────┘
                     │  DDS subscription
       ┌─────────────┴────────────────────────┐
       │  ros2 (Ros2 connector)               │         ┌───────────────────┐
       │  scan_interval: 1000ms               │         │  Disruptor Ring   │
       │                                      │────────▶│  Buffer (4096)    │
       │  message_libraries:                  │         │                   │
       │    - Ros2cs-ros2-sensor_msgs.dll     │         └─────────┬─────────┘
       │    - Ros2cs-clearpathrobotics-       │                   │
       │      clearpath_msgs.dll              │              ┌────┴────┐
       └──────────────────────────────────────┘              │         │
                                                             ▼         ▼
            1 SOURCE                                   ┌─────────┐ ┌──────┐
          (Ros2 connector)                             │ Console │ │ MQTT │
                                                       │         │ │:1883 │
                                                       └─────────┘ └──────┘
                                                              2 SINKS

  CONFIGURATION                                                    [1 file + 3 DLLs + 1 .so]
  ─────────────

  ┌─ main.yaml ──────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  app:                                                                                    │
  │    license: 0000-0000-0000-0000-0000-0000-0000-0000                                      │
  │    ring_buffer: !!int 4096                                                               │
  │    http_server_uri: http://0.0.0.0:9999/                                                 │
  │    ws_server_uri: ws://0.0.0.0:9998/                                                     │
  │                                                                                          │
  │  sinks:                                                                                  │
  │    - name: console                                                                       │
  │      connector: Console                                                                  │
  │      scan_interval: !!int 1000                                                           │
  │      exclude_filter:                                                                     │
  │        - /\$SYSTEM                                                                       │
  │                                                                                          │
  │    - name: mqtt                                                                          │
  │      connector: MQTT                                                                     │
  │      address: 192.168.150.225                                                            │
  │      port: !!int 1883                                                                    │
  │      base_topic: ros2                     # Topics: ros2/ros2/Chatter, etc.              │
  │      qos: !!int 1                                                                        │
  │      retain: !!bool true                                                                 │
  │      use_sink_transform: !!bool false                                                    │
  │                                                                                          │
  │  sources:                                                                                │
  │    - name: ros2                                                                          │
  │      connector: Ros2                      # ROS2 DDS subscription connector              │
  │      scan_interval: !!int 1000                                                           │
  │      message_libraries:                   # External message type DLLs                   │
  │        - ./Configs/Ros2cs-ros2-sensor_msgs.dll                                           │
  │        - ./Configs/Ros2cs-clearpathrobotics-clearpath_msgs.dll                           │
  │      items:                                                                              │
  │        - name: Chatter                                                                   │
  │          rbe: !!bool false                # Stream all messages                          │
  │          type: Ros2cs.Messages.Std.String, DIME                                          │
  │          address: /chatter                # ROS2 topic name                              │
  │          script: |                                                                       │
  │            print(result)                                                                 │
  │            return result.Data             # Extract string from ROS2 message             │
  │                                                                                          │
  │        - name: EmergencyStop                                                             │
  │          type: Ros2cs.Messages.Std.Bool, DIME                                            │
  │          address: /A300_XXXXX/platform/emergency_stop                                    │
  │          script: return result                                                           │
  │                                                                                          │
  │        - name: BatteryStatus                                                             │
  │          type: Ros2cs.Messages.Sensor.BatteryState, Ros2cs-ros2-sensor_msgs              │
  │          address: /A300_XXXXX/platform/bms/status                                        │
  │          script: return result            # Full BatteryState object                     │
  │                                                                                          │
  │        - name: MotorStatus                                                               │
  │          enabled: !!bool false            # Disabled -- needs Clearpath hardware         │
  │          type: Ros2cs.Messages.ClearpathMotor.LynxMultiStatus,                           │
  │                Ros2cs-clearpathrobotics-clearpath_msgs                                   │
  │          address: /A300_XXXXX/platform/motors/status                                     │
  │          script: return result                                                           │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * ROS2 Connector -- DIME subscribes to ROS2 DDS topics using the Ros2 connector.      │
  │    Each item specifies a fully-qualified .NET type for message deserialization and a   │
  │    ROS2 topic address. DIME handles DDS discovery, subscription, and message decoding  │
  │    automatically.                                                                      │
  │                                                                                        │
  │  * External Message Libraries -- ROS2 message types are loaded from DLLs at runtime    │
  │    via message_libraries. Standard messages (std_msgs, sensor_msgs) and vendor         │
  │    messages (Clearpath) are in separate assemblies. The type field references the      │
  │    assembly: "Ros2cs.Messages.Sensor.BatteryState, Ros2cs-ros2-sensor_msgs".           │
  │                                                                                        │
  │  * ROS2-to-MQTT Bridge -- This is the core use case: subscribe to ROS2 topics on a     │
  │    robot, republish to MQTT for enterprise systems (SCADA, dashboards, cloud) that     │
  │    do not speak DDS. The MQTT sink publishes under base_topic "ros2" so topics         │
  │    become ros2/ros2/Chatter, ros2/ros2/BatteryStatus, etc.                             │
  │                                                                                        │
  │  * Typed Message Access -- The script receives the deserialized ROS2 message as        │
  │    result. For std_msgs/String, result.Data extracts the string payload. For complex   │
  │    types like BatteryState, returning the full object preserves all fields (voltage,   │
  │    current, charge, etc.) for downstream consumers.                                    │
  │                                                                                        │
  │  * RBE Override -- The Chatter item uses rbe: false to forward every message, even     │
  │    duplicates. For event-style ROS2 topics where every message matters, disable RBE    │
  │    to ensure nothing is filtered out.                                                  │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```
================================================================================
FILE: content/EX34-udp-binary-protocol.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX34 — UDP BINARY PROTOCOL                                          DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Parses binary UDP packets from an overhead crane controller using Lua bitwise         │
  │  operations. A 30-byte binary message encodes microspeed, anti-sway, crane status,     │
  │  3-axis motion (bridge/trolley/hoist), motor current, frequency, and load cell data.   │
  │  The script uses emit() to fan out 20+ observations from one packet, with deadzone     │
  │  filtering to suppress noise on analog values.                                         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌─────────────────────────────┐
       │   Crane Controller          │
       │   (UDP binary packets)      │
       │                             │
       │   30 bytes per message:     │
       │   [0]  microspeed           │
       │   [1]  anti_sway            │
       │   [2]  load_centering       │
       │   [3]  hoist_upper_limit    │
       │   [4]  crane_latch_status   │
       │   [5]  receiver_status      │
       │   ...                       │
       │   [10-11] move north/south  │
       │   [12-13] move east/west    │         ┌───────────────────────┐
       │   [14-15] move up/down      │         │  Disruptor Ring       │
       │   [16-27] freq + current    │────────▶│  Buffer (4096)        │
       │   [28-29] hoist load cell   │  UDP    │                       │
       └─────────────────────────────┘  :2232  └───────────┬───────────┘
                                                           │
            1 SOURCE                                       ▼
        (UdpServer connector                         ┌────────────┐
         100ms scan)                                 │  Console   │
                                                     │  Sink      │
                 Lua emit() fans out:                └────────────┘
                 ./X/Current, ./X/Frequency,
                 ./X/State, ./X/Direction,              1 SINK
                 ./X/Velocity, ./X/Condition,
                 ./Y/*, ./Z/*, ./Z/Mass, ./Z/Load

  CONFIGURATION                                                          [3 files, 0 folders]
  ─────────────

  ┌─ udp.yaml ───────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  udp: &udp                                                                               │
  │    name: 2232                              # Named after the port number                 │
  │    connector: UdpServer                                                                  │
  │    address: 127.0.0.1                                                                    │
  │    port: !!int 2232                                                                      │
  │    scan_interval: !!int 100                # 10Hz polling for responsive crane control   │
  │    itemized_read: !!bool true                                                            │
  │    sink:                                                                                 │
  │      transform:                                                                          │
  │        type: script                                                                      │
  │        template: Message.Data                                                            │
  │    init_script: |                                                                        │
  │      moses = require('moses')              # Utility library for table operations        │
  │                                                                                          │
  │      filter = function(variable_name, current_value, deadzone)                           │
  │        if not _G[variable_name] then                                                     │
  │          _G[variable_name] = 0                                                           │
  │        end                                                                               │
  │        local difference = math.abs(current_value - _G[variable_name])                    │
  │        if difference > deadzone then                                                     │
  │          _G[variable_name] = current_value                                               │
  │          return false                      # NOT filtered -- value changed significantly │
  │        else                                                                              │
  │          _G[variable_name] = current_value                                               │
  │          return true                       # Filtered -- change within deadzone          │
  │        end                                                                               │
  │      end                                                                                 │
  │                                                                                          │
  │    items:                                                                                │
  │      - name: message                                                                     │
  │        address: message                                                                  │
  │        script: |                                                                         │
  │          -- TROLLEY (X axis): move East/West                                             │
  │          local x_stopped = result[12] == 0 and result[13] == 0                           │
  │          local x_moving_east = result[12] > 0                                            │
  │          local x_current = ((result[22] << 8) + result[23]) / 10                         │
  │          local x_frequency = ((result[20] << 8) + result[21]) / 100                      │
  │                                                                                          │
  │          -- Deadzone filter: only emit if change > threshold                             │
  │          if not filter("x_current", x_current, 0.5) then                                 │
  │            emit('./X/Current', x_current)                                                │
  │          end                                                                             │
  │          if not filter("x_frequency", x_frequency, 1) then                               │
  │            emit('./X/Frequency', x_frequency)                                            │
  │          end                                                                             │
  │          emit('./X/State', x_stopped and "STOPPED" or "TRAVEL")                          │
  │          emit('./X/Condition',                                                           │
  │            moses.include({4}, result[8]) and "FAULT" or "NORMAL")                        │
  │          emit('./X/Direction',                                                           │
  │            x_stopped and "NONE" or x_moving_east and "POSITIVE" or "NEGATIVE")           │
  │          emit('./X/Velocity',                                                            │
  │            x_stopped and 0 or x_moving_east and result[12] or result[13]*-1)             │
  │                                                                                          │
  │          -- BRIDGE (Y axis): move North/South   (similar pattern)                        │
  │          -- HOIST (Z axis): move Up/Down + load cell + mass                              │
  │          local z_mass = ((result[28] << 8) + result[29]) / 2.205                         │
  │          local z_load = (z_mass / 5500) * 100   # Load as percentage                     │
  │          ...                                                                             │
  │          emit('./Z/Mass', z_mass)                                                        │
  │          emit('./Z/Load', z_load)                                                        │
  │                                                                                          │
  │          return nil                        # All output via emit()                       │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ console.yaml ───────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  console: &console                                                                       │
  │    connector: Console                                                                    │
  │    use_sink_transform: !!bool true                                                       │
  │    exclude_filter:                                                                       │
  │      - 2232/$SYSTEM                       # Exclude system messages by source name       │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ main.yaml ──────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  app:                                                                                    │
  │    ring_buffer: !!int 4096                                                               │
  │  sources:                                                                                │
  │    - *udp                                                                                │
  │  sinks:                                                                                  │
  │    - *console                                                                            │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  BINARY MESSAGE FORMAT
  ─────────────────────

  ┌─ Byte Map ───────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  Byte  Description                    Values                                             │
  │  ────  ────────────────────────────── ──────────────────────────                         │
  │  [0]   microspeed                     0=off, 1=on                                        │
  │  [1]   anti_sway                      0=disabled, 1=enabled                              │
  │  [2]   load_centering                 0=disabled, 1=enabled                              │
  │  [3]   hoist_upper_limit              0=below, 1=at limit                                │
  │  [4]   crane_latch_status             0=unlatched, 1=latched                             │
  │  [5]   receiver_status                0=idle, 1=active, 2=not released                   │
  │  [6]   group_control_switch           0=all, 1=north, 2=center, 3=south                  │
  │  [7]   tandem_status                  0=inactive, 1=single, 2=two pt, 3=three pt         │
  │  [8]   fault                          0=none, 3=bridge, 4=trolley, 5=hoist ...           │
  │  [9]   mode                           10=normal, 20=latching, 80=recovery ...            │
  │  [10]  move north (speed 0-5)                                                            │
  │  [11]  move south (speed 0-5)                                                            │
  │  [12]  move east  (speed 0-5)                                                            │
  │  [13]  move west  (speed 0-5)                                                            │
  │  [14]  move up    (speed 0-5)                                                            │
  │  [15]  move down  (speed 0-5)                                                            │
  │  [16-17] bridge frequency    (big-endian uint16 / 100)                                   │
  │  [18-19] bridge current      (big-endian uint16 / 10)                                    │
  │  [20-21] trolley frequency   (big-endian uint16 / 100)                                   │
  │  [22-23] trolley current     (big-endian uint16 / 10)                                    │
  │  [24-25] hoist frequency     (big-endian uint16 / 100)                                   │
  │  [26-27] hoist current       (big-endian uint16 / 10)                                    │
  │  [28-29] hoist load cell     (big-endian uint16 / 2.205 for lbs-to-kg)                   │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Binary Parsing in Lua -- The result variable is a byte array. Lua bitwise shift     │
  │    operators (<< and >>) combine big-endian uint16 values: ((result[22] << 8) +        │
  │    result[23]) / 10 extracts trolley current from bytes 22-23.                         │
  │                                                                                        │
  │  * Deadzone Filtering -- The filter() function tracks previous values in Lua global    │
  │    variables (_G). If the change is less than the deadzone threshold, the emit is      │
  │    suppressed. Current uses 0.5A deadzone; frequency uses 1 Hz. This dramatically      │
  │    reduces message traffic from noisy analog sensors.                                  │
  │                                                                                        │
  │  * emit() Fan-Out -- One UDP packet produces 20+ observations via emit(). Each axis    │
  │    (X/Y/Z) gets Current, Frequency, State, Direction, Velocity, and Condition.         │
  │    The hoist (Z) additionally gets Mass and Load. Returning nil suppresses the raw     │
  │    packet.                                                                             │
  │                                                                                        │
  │  * Fault Code Mapping -- The fault byte (result[8]) maps to specific drive faults.     │
  │    moses.include({4}, result[8]) checks if the fault code is trolley-specific.         │
  │    Different fault codes map to different axis Condition items.                        │
  │                                                                                        │
  │  * UdpServer Connector -- DIME listens as a UDP server on the specified port. The      │
  │    100ms scan_interval provides responsive crane control monitoring. Unlike TCP,       │
  │    UDP is connectionless so no handshake overhead per message.                         │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```
================================================================================
FILE: content/EX35-cnc-fingerprinting.md
================================================================================

```
═══════════════════════════════════════════════════════════════════════════════════════════════
  EX35 — CNC FINGERPRINTING                                           DIME EXAMPLE SERIES
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ WHAT THIS EXAMPLE DOES ───────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  Implements CNC part identification through spindle current pattern analysis. A        │
  │  current transformer simulator generates realistic power draw profiles for 4 part      │
  │  types (aluminum bracket, steel shaft, cast iron housing, precision gear). An          │
  │  analytics processor learns fingerprints, detects cycles, and identifies parts.        │
  │  A productivity module tracks OEE, parts per hour, and identification accuracy.        │
  │  ~600 lines of embedded Lua analytics across 3 source connectors.                      │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

  DATA FLOW
  ─────────

       ┌────────────────────────────────┐
       │  currentTransformer (Script)   │  1000ms, rbe: false
       │                                │  Simulates 4 part types:
       │  PartA: Aluminum (10-12s)      │  - startup/running/shutdown phases
       │  PartB: Steel (23-26s)         │  - 12 pattern generators (steady,
       │  PartC: Cast Iron (36-40s)     │    ramping, pulsed, gear_cutting...)
       │  PartD: Precision (22-25s)     │  - idle between parts
       └──────────────┬─────────────────┘
                      │
       ┌──────────────┴─────────────────┐          ┌───────────────────┐
       │  analyticsProcessor (Script)   │  1000ms  │  Disruptor Ring   │
       │                                │          │  Buffer (4096)    │
       │  Signal processing:            │────────▶ │                   │
       │  - 3-sample moving average     │          └─────────┬─────────┘
       │  - Cycle detection (2.5A start,│                    │
       │    1.8A end thresholds)        │          ┌─────────┼──────────────┐
       │  - 10-segment fingerprinting   │          │         │              │
       │  - Pattern correlation (60%    │          ▼         ▼              ▼
       │    mean + 30% range + 10% std) │    ┌──────────┐ ┌──────┐ ┌────────────┐
       │  - Fingerprint library (3-cycle│    │ WebSocket│ │ Web  │ │  Console   │
       │    learning per part type)     │    │  :8092   │ │Server│ │  (opt.)    │
       └────────────────────────────────┘    └──────────┘ │:8090 │ └────────────┘
                                                          └──────┘
       ┌────────────────────────────────┐                 ┌────────────┐
       │  productivityMetrics (Script)  │  2000ms         │  CSV Sink  │
       │                                │                 │  (opt.)    │
       │  OEE = Avail x Perf x Quality  │                 └────────────┘
       │  Parts per hour, part mix,     │
       │  cycle time variance,          │          3 SOURCES, 4+ SINKS
       │  identification accuracy       │
       └────────────────────────────────┘

  CONFIGURATION                                                    [10 files, 1 web/ folder]
  ─────────────

  ┌─ currentTransformer.yaml (abbreviated -- ~300 lines Lua) ────────────────────────────────┐
  │                                                                                          │
  │  currentTransformer: &currentTransformer                                                 │
  │    connector: Script                                                                     │
  │    scan_interval: !!int 1000              # 1Hz sampling rate                            │
  │    rbe: !!bool false                      # Continuous -- every reading matters          │
  │    init_script: |                                                                        │
  │      PART_TYPES = {                       # 4 part definitions                           │
  │        { name = "PartA_Aluminum_Bracket",                                                │
  │          idle_current = 0.8,                                                             │
  │          startup_current = {min=8.0, max=12.0, duration=0.8},                            │
  │          running_phases = {                                                              │
  │            {name="rough_cut", current={min=4.5,max=6.2}, pattern="steady"},              │
  │            {name="finish_cut", current={min=2.8,max=4.1}, pattern="varying"},            │
  │            {name="drilling", current={min=5.5,max=7.8}, pattern="pulsed"}                │
  │          },                                                                              │
  │          total_cycle_time = {min=10.0, max=12.0},                                        │
  │          frequency = 0.15 },                                                             │
  │        -- PartB: Steel shaft, medium current, 23-26s                                     │
  │        -- PartC: Cast iron, high current, 36-40s                                         │
  │        -- PartD: Precision gear, complex pattern, 22-25s                                 │
  │      }                                                                                   │
  │      -- 12 pattern generators: steady, varying, ramping, pulsed, periodic,               │
  │      --   spiking, heavy_cutting, smooth, drilling_cycle, tapping,                       │
  │      --   gear_cutting, light_cut, idle                                                  │
  │    enter_script: |                        # State machine: idle -> startup ->            │
  │                                           #   running phases -> shutdown -> idle         │
  │    items:                                                                                │
  │      - name: CurrentDraw                  # rbe: false -- stream every reading           │
  │      - name: CyclePhase                   # Current operation name                       │
  │      - name: PartType                     # Active part name                             │
  │      - name: CycleProgress                # 0-100%                                       │
  │      - name: TotalPartsCompleted                                                         │
  │      - name: CurrentPartStats             # JSON with expected times, phases             │
  │      - name: PhaseTransition              # JSON on each phase change                    │
  │      - name: FingerprintSignature         # JSON: current, part, phase, timing           │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ analyticsProcessor.yaml (abbreviated -- ~350 lines Lua) ────────────────────────────────┐
  │                                                                                          │
  │  analyticsProcessor: &analyticsProcessor                                                 │
  │    connector: Script                                                                     │
  │    scan_interval: !!int 1000                                                             │
  │    rbe: !!bool true                                                                      │
  │    init_script: |                                                                        │
  │      SMOOTHING_WINDOW = 3                 # Fast-response moving average                 │
  │      CYCLE_DETECTION_THRESHOLD = 2.5      # Amps to detect cycle start                   │
  │      CYCLE_END_THRESHOLD = 1.8            # Amps to detect cycle end                     │
  │      MIN_CYCLE_DURATION = 8.0             # Minimum valid cycle (seconds)                │
  │      FINGERPRINT_SEGMENTS = 10            # Segments per fingerprint                     │
  │      SIMILARITY_THRESHOLD = 0.55          # Minimum correlation for match                │
  │      LEARNING_CYCLES = 3                  # Cycles needed before identification          │
  │                                                                                          │
  │      -- Functions: calculate_moving_average, calculate_statistics,                       │
  │      --   normalize_data, calculate_correlation, extract_fingerprint,                    │
  │      --   identify_part, compare_fingerprints (60% mean, 30% range, 10% std),            │
  │      --   update_library, calculate_average_fingerprint                                  │
  │                                                                                          │
  │    enter_script: |                        # Per-scan cycle detection                     │
  │      -- Read current from cache("currentTransformer/CurrentDraw")                        │
  │      -- Smooth with moving average                                                       │
  │      -- Detect rising edge (start) and falling edge (end)                                │
  │      -- On cycle complete: extract fingerprint, identify part, update library            │
  │                                                                                          │
  │    items:                                                                                │
  │      - name: SmoothedCurrent              # Moving-average filtered value                │
  │      - name: CycleDetected                # Boolean: currently in cycle?                 │
  │      - name: IdentifiedPart               # Best match from library                      │
  │      - name: IdentificationConfidence     # 0.0 - 1.0 correlation score                  │
  │      - name: ActualPart                   # Ground truth from simulator                  │
  │      - name: IdentificationAccuracy       # Running accuracy percentage                  │
  │      - name: CycleAnalysisResults         # JSON: duration, ID, confidence               │
  │      - name: LibraryStatus                # JSON: per-part learning progress             │
  │      - name: FingerprintData              # JSON: full fingerprint for debug             │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ productivityMetrics.yaml (abbreviated -- ~250 lines Lua) ───────────────────────────────┐
  │                                                                                          │
  │  productivityMetrics: &productivityMetrics                                               │
  │    connector: Script                                                                     │
  │    scan_interval: !!int 2000              # Metrics every 2 seconds                      │
  │    init_script: |                                                                        │
  │      IDEAL_CYCLE_TIMES = {                # Per-part baseline                            │
  │        ["PartA_Aluminum_Bracket"] = 30.0,                                                │
  │        ["PartB_Steel_Shaft"] = 73.0,                                                     │
  │        ["PartC_Cast_Iron_Housing"] = 155.0,                                              │
  │        ["PartD_Precision_Gear"] = 87.5 }                                                 │
  │    items:                                                                                │
  │      - name: TotalPartsProduced                                                          │
  │      - name: PartsPerHour                 # Total good / elapsed hours                   │
  │      - name: OverallEquipmentEffectiveness                                               │
  │      - name: Availability                 # Uptime / planned time                        │
  │      - name: Performance                  # Ideal / actual cycle time                    │
  │      - name: Quality                      # Good parts / total parts                     │
  │      - name: PartMix                      # JSON: percentage by type                     │
  │      - name: CycleTimeVariance            # JSON: mean, stddev per part                  │
  │      - name: AnomalyCount                                                                │
  │      - name: DowntimeMinutes                                                             │
  │      - name: IdentificationAccuracy       # Percentage correct                           │
  │      - name: ProductionSummary            # JSON: comprehensive shift report             │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ Sink files ─────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  webServerSink: &webServerSink            # Dashboard hosting                            │
  │    connector: WebServer                                                                  │
  │    uri: http://localhost:8090/                                                           │
  │    web_root: ./Configs/web                                                               │
  │    exclude_filter: [".*"]                 # Files only -- no data                        │
  │                                                                                          │
  │  websocketServerSink: &websocketServerSink                                               │
  │    connector: WebsocketServer                                                            │
  │    uri: ws://0.0.0.0:8092/                                                               │
  │    include_filter:                        # Selective real-time streaming                │
  │      - "currentTransformer/CurrentDraw"                                                  │
  │      - "analyticsProcessor/IdentifiedPart"                                               │
  │      - "productivityMetrics/OverallEquipmentEffectiveness"                               │
  │      # ... 30+ filtered paths                                                            │
  │                                                                                          │
  │  consoleSink: &consoleSink                # Filtered console output                      │
  │    connector: Console                                                                    │
  │    include_filter:                        # Only key metrics                             │
  │      - "currentTransformer/CurrentDraw"                                                  │
  │      - "analyticsProcessor/IdentifiedPart"                                               │
  │      - "productivityMetrics/ProductionSummary"                                           │
  │                                                                                          │
  │  csvSink: &csvSink                        # Historical data recording                    │
  │    connector: CsvWriter                                                                  │
  │    file_path: ./Logs/CNCFingerprint_Data.csv                                             │
  │    max_file_size: !!int 104857600         # 100MB max                                    │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  ┌─ main.yaml ──────────────────────────────────────────────────────────────────────────────┐
  │                                                                                          │
  │  app:                                                                                    │
  │    ring_buffer: !!int 4096                                                               │
  │  sources:                                                                                │
  │    - *currentTransformer                                                                 │
  │    - *analyticsProcessor                                                                 │
  │    - *productivityMetrics                                                                │
  │  sinks:                                                                                  │
  │    - *webServerSink                                                                      │
  │    - *websocketServerSink                                                                │
  │                                                                                          │
  └──────────────────────────────────────────────────────────────────────────────────────────┘

  KEY CONCEPTS
  ────────────
  ┌────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                        │
  │  * Fingerprint Extraction -- Each completed cycle is divided into 10 equal time        │
  │    segments. Each segment stores mean, std deviation, min, and max current values.     │
  │    This fixed-length signature enables comparison regardless of cycle duration.        │
  │                                                                                        │
  │  * Pattern Correlation -- Fingerprints are compared using weighted similarity:         │
  │    60% mean pattern (are current levels similar?), 30% range shape (are variations     │
  │    similar?), 10% standard deviation (is noise similar?). Scores above 0.55 are        │
  │    considered matches.                                                                 │
  │                                                                                        │
  │  * Learning Library -- The system requires 3 completed cycles of a part type before    │
  │    it can identify that type. Fingerprints are averaged across samples (up to 10       │
  │    stored per type) to create robust reference patterns. The library builds            │
  │    automatically from the ground-truth labels.                                         │
  │                                                                                        │
  │  * Three-Source Pipeline -- currentTransformer generates raw data and phase info.      │
  │    analyticsProcessor reads it via cache() for signal processing and identification.   │
  │    productivityMetrics reads both for OEE calculation. Each runs at its own rate.      │
  │                                                                                        │
  │  * rbe: false for Streaming -- The current transformer disables Report By Exception    │
  │    because every sample matters for pattern analysis. Even identical consecutive       │
  │    readings are meaningful in a current waveform. Other connectors use rbe: true       │
  │    since they only output when derived metrics actually change.                        │
  │                                                                                        │
  └────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
```
================================================================================
FILE: content/REF01-activemq.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF01 — ActiveMQ                                                    CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Subscribes to ActiveMQ topics and queues.                                                │
  │                                                                                           │
  │  Connector Type: ActiveMQ                            Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "ActiveMQ".                  │
  │  address                string   Empty       Broker URI.                                  │
  │  username               string   Empty       Broker username.                             │
  │  password               string   Empty       Broker password.                             │
  │  itemized_read          bool     FALSE       Match streaming data against items list.     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: amq                                                                              │
  │    connector: ActiveMQ                                                                    │
  │    address: activemq:tcp://172.24.56.104:61616                                            │
  │    username: artemis                                                                      │
  │    password: artemis                                                                      │
  │    items:                                                                                 │
  │      - name: FooBar                                                                       │
  │        address: topic://FOO.BAR                                                           │
  │      - name: BarFoo                                                                       │
  │        address: queue://BAR.FOO                                                           │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  ActiveMQ NMS OpenWire Github: https://github.com/apache/activemq-nms-openwire            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF02-asc-cpc.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF02 — ASC CPC                                                     CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from ASC autoclave systems.                                                   │
  │                                                                                           │
  │  Connector Type: AscCPC                              Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "AscCPC".                    │
  │  address                string   Empty       CPC instance hostname or IP address.         │
  │  port                   string   9999        CPC instance port.                           │
  │  bypass_ping            bool     FALSE       Ping CPC host before reading.                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: ascCpcSource1                                                                    │
  │    connector: AscCPC                                                                      │
  │    address: 192.168.111.12                                                                │
  │    port: !!int 9999                                                                       │
  │    bypass_ping: !!bool true                                                               │
  │    items:                                                                                 │
  │      - name: Temperature                                                                  │
  │        address: .Autoclave.Inputs.AIRTC\Value                                             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  CPC - TCP Talker and Listener:                                                           │
  │  https://www.aschome.com/administrator/images/support/pdf/                                │
  │  CPC%20-%20TCP%20Talker%20and%20Listener.pdf                                              │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF03-beckhoff-ads.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF03 — Beckhoff ADS                                                CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from Beckhoff PLCs.                                                           │
  │                                                                                           │
  │  Connector Type: BeckhoffADS                         Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "BeckhoffADS".               │
  │  local_netid            string   Empty       Local AMS Net ID.                            │
  │  address                string   Empty       Remote AMS Net ID.                           │
  │  target_ip              string   Empty       IPv4 address to remote AMS Net ID.           │
  │  port                   int      851         ADS port.                                    │
  │  items.type             string   Empty       PLC register type ('bool','sbyte',           │
  │                                              'short','int','long','float','string').      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: ads1                                                                             │
  │    connector: BeckhoffADS                                                                 │
  │    local_netid: 1.1.1.1.1.1                                                               │
  │    target_ip: 192.168.111.191                                                             │
  │    address: 192.168.111.191.1.1                                                           │
  │    port: !!int 851                                                                        │
  │    items:                                                                                 │
  │      - name: boolTag1                                                                     │
  │        type: bool                                                                         │
  │        address: MAIN.someBool                                                             │
  │      - name: intTag2                                                                      │
  │        type: int                                                                          │
  │        address: MAIN.someInt                                                              │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  TwinCAT 3 | ADS Basics:                                                                  │
  │  https://infosys.beckhoff.com/english.php?content=../content/1033/                        │
  │  tc3_ads_intro/index.html                                                                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF04-claude-code.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF04 — Claude Code                                                    CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Executes Claude AI prompts with optional context data for AI-powered analytics.          │
  │  Supports predictive maintenance, anomaly detection, and intelligent data analysis.       │
  │                                                                                           │
  │  Connector Type: ClaudeCode                        Source ✓    Sink ✗                     │
  │                                                                                           │
  │  Alpha Preview                                                                            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "ClaudeCode".                │
  │  executable             string   "claude"    Path or name of the Claude CLI executable.   │
  │  timeout_ms             int      60000       Max time (ms) to wait for Claude response.   │
  │  model                  string   Empty       Optional model (e.g. "sonnet", "opus").      │
  │  additional_args        list     Empty       Additional CLI arguments for Claude.         │
  │  items.address          string   Empty       Claude prompt template to execute.           │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  NOTES
  ─────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Two-Phase Execution                                                                      │
  │  ───────────────────                                                                      │
  │  For each item, the connector first executes an optional context script (Lua or           │
  │  Python) to gather data, then calls Claude with the prompt plus the context data.         │
  │                                                                                           │
  │  The prompt is defined in items.address. Context data from the script is appended         │
  │  to the prompt before sending to Claude.                                                  │
  │                                                                                           │
  │  Response Parsing                                                                         │
  │  ────────────────                                                                         │
  │  Claude's response is parsed as JSON if possible, with automatic fallback to              │
  │  plain string. Markdown code fences are stripped automatically.                           │
  │                                                                                           │
  │  Executable                                                                               │
  │  ──────────                                                                               │
  │  The connector verifies the Claude CLI executable during initialization by running        │
  │  --version. On Windows, both .cmd and .exe variants are supported. The .cmd variant       │
  │  receives the prompt via stdin; .exe receives it as a command-line argument.              │
  │                                                                                           │
  │  Coordination                                                                             │
  │  ────────────                                                                             │
  │  Use wait_for_connectors to ensure data sources have populated before Claude              │
  │  analyzes their output. Use execute_every to control how often each item runs.            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: claude_rul                                                                       │
  │    connector: ClaudeCode                                                                  │
  │    executable: claude                                                                     │
  │    model: sonnet                                                                          │
  │    additional_args: ['-c']                                                                │
  │    timeout_ms: 30000                                                                      │
  │    scan_interval: 60000                                                                   │
  │    lang_script: python                                                                    │
  │    wait_for_connectors: ['dataset_generator']                                             │
  │    init_script: |                                                                         │
  │      def average(arr):                                                                    │
  │        return sum(arr) / len(arr) if arr else 0                                           │
  │    items:                                                                                 │
  │      - name: rul_prediction                                                               │
  │        address: |                                                                         │
  │          You are an industrial AI analyzing vibration data.                               │
  │          Analyze the data and predict Remaining Useful Life.                              │
  │          Return ONLY raw JSON with this format:                                           │
  │          {"rul_hours": 0, "confidence": 0.0, "risk_level": "low"}                         │
  │        script: |                                                                          │
  │          data, ts = dime.cache_ts('dataset_generator/vibration_dataset', None)            │
  │          {                                                                                │
  │            'vibration_data': {                                                            │
  │              'rms_avg': average(data['vibration_rms']),                                   │
  │              'peak_avg': average(data['vibration_peak'])                                  │
  │            }                                                                              │
  │          }                                                                                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF05-console.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF05 — Console                                                     CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Writes data to the console.                                                              │
  │                                                                                           │
  │  Connector Type: Console                             Source ✗    Sink ✓                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "Console".                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: consoleSink1                                                                     │
  │    connector: Console                                                                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF06-csv-writer.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF06 — CSV Writer                                                  CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Writes data to a CSV file.                                                               │
  │                                                                                           │
  │  Connector Type: CSVWriter                           Source ✗    Sink ✓                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "CSVWriter".                 │
  │  filename               string   Empty       Absolute or relative file path and name.     │
  │  filter_duplicate_paths bool     FALSE       Filter paths with same name.                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: csvSink1                                                                         │
  │    connector: CSVWriter                                                                   │
  │    filename: ./Output/airsharc2.csv                                                       │
  │    filter_duplicate_paths: !!bool false                                                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF07-ethernet-ip.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF07 — Ethernet/IP                                                 CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from Allen-Bradley PLCs.                                                      │
  │                                                                                           │
  │  Connector Type: EthernetIP                          Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "EthernetIP".                │
  │  type                   string   ControlLogix PLC type ('ControlLogix','Plc5',            │
  │                                              'Slc500','LogixPccc','Micro800',             │
  │                                              'MicroLogix','Omron').                       │
  │  address                string   Empty       PLC hostname, IP address.                    │
  │  path                   string   1,0         Connection path.                             │
  │  log                    int      0           Library log level (0-5).                     │
  │  timeout                int      1000        PLC read timeout in milliseconds.            │
  │  bypass_ping            bool     FALSE       Ping PLC before reading.                     │
  │  items.type             string   Empty       PLC register type ('bool','ubyte',           │
  │                                              'byte','ushort','short','uint','int',        │
  │                                              'ulong','long','float','double','string').   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: plcSource1                                                                       │
  │    connector: EthernetIP                                                                  │
  │    type: MicroLogix                                                                       │
  │    address: 192.168.111.20                                                                │
  │    path: 1,0                                                                              │
  │    log: !!int 0                                                                           │
  │    timeout: !!int 1000                                                                    │
  │    bypass_ping: !!bool true                                                               │
  │    items:                                                                                 │
  │      - name: boolTag1                                                                     │
  │        type: bool                                                                         │
  │        address: B3:0/2                                                                    │
  │      - name: intTag2                                                                      │
  │        type: int                                                                          │
  │        address: N7:1                                                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Libplctag.NET Github: https://github.com/libplctag/libplctag.NET                         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF08-fanuc-robot.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF08 — Fanuc Robot                                                 CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads R-J3iB, R-30iA, R-30iB Fanuc Robot controllers using SNPX.                        │
  │                                                                                           │
  │  Connector Type: FanucRobot                          Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "FanucRobot".                │
  │  address                string   Empty       Robot hostname, IP address.                  │
  │  items.address          string   Empty       Variable to read.                            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  VARIABLE ADDRESSES
  ──────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Cartesian Position        Joint Position            I/O                 Registers        │
  │  ────────────────────────  ────────────────────────  ──────────────────  ──────────────── │
  │  worldCartesianPosition.R  worldJointPosition.J1     AI.{index}          WSI.{index}      │
  │  worldCartesianPosition.P  worldJointPosition.J2     AO.{index}          PMC_K.{index}    │
  │  worldCartesianPosition.W  worldJointPosition.J3     GI.{index}          PMC_D.{index}    │
  │  worldCartesianPosition.X  worldJointPosition.J4     GO.{index}          PMC_R.{index}    │
  │  worldCartesianPosition.Y  worldJointPosition.J5     SI.{index}          StringSystem     │
  │  worldCartesianPosition.Z  worldJointPosition.J6     SO.{index}           Variables.{i}   │
  │  worldCartesianPosition.E1 worldJointPosition.J7     UI.{index}          IntegerSystem    │
  │  worldCartesianPosition.E2 worldJointPosition.J8     UO.{index}           Variables.{i}   │
  │  worldCartesianPosition.E3 worldJointPosition.J9     RDI.{index}         PositionSystem   │
  │  worldCartesianPosition.T4                           RDO.{index}          Variables.{i}   │
  │  worldCartesianPosition.T5                           SDI.{index}         NumericRegisters │
  │  worldCartesianPosition.T6                           SDO.{index}          .{index}        │
  │                                                      WDI.{index}         PositionRegisters│
  │                                                      WSI.{index}          .{index}        │
  │                                                                          StringRegisters  │
  │                                                                           .{index}        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: fanuc1                                                                           │
  │    connector: FanucRobot                                                                  │
  │    address: 192.168.111.20                                                                │
  │    items:                                                                                 │
  │      - name: UI1                                                                          │
  │        address: UI.1                                                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF09-haas-shdr.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF09 — Haas SHDR                                                   CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Receives SHDR-like streaming data from a Haas controller over an                         │
  │  undocumented port.                                                                       │
  │                                                                                           │
  │  Connector Type: HaasSHDR                            Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "HaasSHDR".                  │
  │  itemized_read          bool     FALSE       Match streaming data against items list.     │
  │  address                string   Empty       Controller IP hostname or address.           │
  │  port                   int      9998        Controller port number.                      │
  │  timeout                int      1000        Connection timeout in milliseconds.          │
  │  heartbeat_interval     int      4000        Heartbeat frequency in milliseconds.         │
  │  retry_interval         int      10000       Retry frequency in milliseconds.             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: haasSource1                                                                      │
  │    connector: HaasSHDR                                                                    │
  │    itemized_read: !!bool true                                                             │
  │    address: 192.168.111.221                                                               │
  │    port: !!int 9998                                                                       │
  │    timeout: !!int 1000                                                                    │
  │    heartbeat_interval: !!int 4000                                                         │
  │    retry_interval: !!int 10000                                                            │
  │    items:                                                                                 │
  │      - name: CPU                                                                          │
  │        enabled: !!bool true                                                               │
  │        address: CPU                                                                       │
  │        script: |                                                                          │
  │          if tonumber(result) > 0.5 then                                                   │
  │            return 'HIGH';                                                                 │
  │          else                                                                             │
  │            return 'LOW';                                                                  │
  │          end                                                                              │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  NOTES
  ─────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  This source connector is experimental and communicates with the Haas controller          │
  │  using an undocumented port. In newer NGC software releases this port has been            │
  │  closed; use Haas Q or XML Web Scraper source connectors instead. There is a known        │
  │  issue where the controller stops streaming data and the NGC must be restarted.           │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF10-http-client.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF10 — HTTP Client                                                 CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Posts data to an HTTP server.                                                            │
  │                                                                                           │
  │  Connector Type: HTTPClient                              Source ✗    Sink ✓               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "HTTPClient".                │
  │  uri                    string   http://lo…  Resource URL to POST JSON payload to.        │
  │  headers                dict     Empty       Dictionary of request headers.               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: httpClientSink1                                                                  │
  │    connector: HttpClient                                                                  │
  │    uri: https://webhook.site/0e10dc3d-6bec-45fa-952d-dba785bc3109                         │
  │    headers:                                                                               │
  │      Content-Type: text/plain;                                                            │
  │      Authorization: None                                                                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  HTTP POST: https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF11-http-server.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF11 — HTTP Server                                                 CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Starts an HTTP server. As a source, listens to HTTP POST requests. As a sink,            │
  │  serves all data items to external HTTP clients.                                          │
  │                                                                                           │
  │  Connector Type: HTTPServer                              Source ✓    Sink ✓               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "HTTPServer".                │
  │  uri                    string   http://lo…  URL to listen for POST requests.             │
  │  items.address          string   Empty       URI path where to get POST data from.        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE NOTES
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  You can specify a less restrictive URI by providing the system's IP address or           │
  │  listen on all adapters by specifying http://*:8081.                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: httpServerSource1                                                                │
  │    connector: HTTPServer                                                                  │
  │    uri: http://localhost:8081/                                                            │
  │    init_script: |                                                                         │
  │      json = require('json');                                                              │
  │    items:                                                                                 │
  │      - name: postData                                                                     │
  │        address: post/data                                                                 │
  │        script: |                                                                          │
  │          return json.decode(result).hello;                                                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "HTTPServer".                │
  │  uri                    string   http://lo…  URL to serve items.                          │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK NOTES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  You can specify a less restrictive URI by providing the system's IP address or           │
  │  listen on all adapters by specifying http://*:8080.                                      │
  │                                                                                           │
  │  Endpoints:                                                                               │
  │    /items    - All items as dictionary.                                                   │
  │    /list     - All items as list.                                                         │
  │    /items/*  - Specific item by path.                                                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: httpServerSink1                                                                  │
  │    connector: HttpServer                                                                  │
  │    uri: http://localhost:8080/                                                            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF12-i3x-web-server.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF12 — I3x Web Server                                                CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  REST API interface for accessing contextualized manufacturing data organized as an       │
  │  I3X object graph. Builds an in-memory graph of objects with attributes and               │
  │  relationships, then exposes the data through HTTP endpoints.                             │
  │                                                                                           │
  │  Connector Type: I3xWebServer                      Source ✗    Sink ✓                     │
  │                                                                                           │
  │  Alpha Preview                                                                            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "I3xWebServer".              │
  │  uri                    string   http://lo…  HTTP listener URI.                           │
  │  enable_cors            bool     true        Enable CORS support.                         │
  │  cors_origins           list     ["*"]       Allowed CORS origin domains.                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  API ENDPOINTS
  ─────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Endpoint                                    Description                                  │
  │  ──────────────────────────────────────────  ──────────────────────────────────────────── │
  │  GET /                                       API information.                             │
  │  GET /health                                 Server health status.                        │
  │  GET /stats                                  Server statistics.                           │
  │  GET /objects                                List all object instances.                   │
  │  GET /objects/{elementId}                    Get object with attributes and children.     │
  │  GET /objects/{elementId}/parent             Get parent object.                           │
  │  GET /objects/{elementId}/children           Get all child objects.                       │
  │  GET /objects/{elementId}/relationships/{t}  Get related objects by relationship type.    │
  │  GET /values/{elementId}                     Get all attributes for an object.            │
  │  GET /relationships/{elementId}              Get all relationship IDs.                    │
  │  GET /relationships/{elementId}/{type}       Get specific relationship IDs.               │
  │  GET /types                                  Get all type definitions.                    │
  │  GET /graph                                  Get entire graph as JSON.                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  NOTES
  ─────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  I3X Metadata                                                                             │
  │  ────────────                                                                             │
  │  Messages consumed by this sink must include I3X metadata defined in the sink.i3x         │
  │  property. The metadata specifies: elementId, typeId, parentId, namespace, name,          │
  │  and optional attributes and relationships.                                               │
  │                                                                                           │
  │  Object Graph                                                                             │
  │  ────────────                                                                             │
  │  The connector maintains an in-memory graph of I3X objects supporting parent-child        │
  │  hierarchies and arbitrary relationships. Types are dynamically learned from              │
  │  configuration metadata — no predefined type definitions are needed.                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: i3xServer                                                                        │
  │    connector: I3xWebServer                                                                │
  │    uri: http://localhost:8090/                                                            │
  │    enable_cors: true                                                                      │
  │    cors_origins: ["*"]                                                                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF13-influxlp.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF13 — InfluxLP                                                    CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Writes data to an Influx Data bucket.                                                    │
  │                                                                                           │
  │  Connector Type: InfluxLP                                Source ✗    Sink ✓               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "InfluxLP".                  │
  │  address                string   Empty       URL to your Influx instance.                 │
  │  token                  string   Empty       Influx token.                                │
  │  org_name               string   Empty       Influx organization name.                    │
  │  bucket_name            string   Empty       Influx bucket name.                          │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: influxLpSink1                                                                    │
  │    connector: InfluxLP                                                                    │
  │    address: https://us-east-1-1.aws.cloud2.influxdata.com                                 │
  │    token: abc123                                                                          │
  │    org_name: mriiot                                                                       │
  │    bucket_name: bucket1                                                                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  InfluxDB 3 C# Client Github: https://github.com/InfluxCommunity/influxdb3-csharp         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF14-json-web-scraper.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF14 — JSON Web Scraper                                            CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from a JSON web page.                                                         │
  │                                                                                           │
  │  Connector Type: JSONWebScraper                          Source ✓    Sink ✗               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "JSONWebScraper".            │
  │  uri                    string   http://lo…  Web page address.                            │
  │  items.address          string   Empty       Jsonata query.                               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: json1                                                                            │
  │    connector: JsonWebScraper                                                              │
  │    uri: https://raw.githubusercontent.com/.../mirador.json                                │
  │    init_script: json = require('json')                                                    │
  │    items:                                                                                 │
  │      - name: node1                                                                        │
  │        address: $.catalog.manifestID                                                      │
  │        script: |                                                                          │
  │          return json.decode(result)[1];                                                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Jsonata: https://jsonata.org/                                                            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF15-logger.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF15 — Logger                                                      CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Writes data to an NLog logger.                                                           │
  │                                                                                           │
  │  Connector Type: Logger                                  Source ✗    Sink ✓               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "Logger".                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: loggerSink1                                                                      │
  │    connector: Logger                                                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF16-modbus-tcp.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF16 — Modbus TCP                                                  CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from a Modbus/TCP device.                                                     │
  │                                                                                           │
  │  Connector Type: ModbusTCP                               Source ✓    Sink ✗               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "ModbusTCP".                 │
  │  address                string   Empty       Device hostname or IP address.               │
  │  port                   int      502         Port number.                                 │
  │  slave                  int      1           Modbus slave ID.                             │
  │  timeout                int      1000        Read timeout in milliseconds.                │
  │  items.address          string   Empty       Register address.                            │
  │  items.type             string   1           Register type (1-coil, 2-input, 3-holding,   │
  │                                              4-input register).                           │
  │  items.count            int      1           Number of consecutive registers to read.     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: modbusSource1                                                                    │
  │    connector: ModbusTCP                                                                   │
  │    address: 192.168.111.20                                                                │
  │    port: !!int 502                                                                        │
  │    slave: !!int 1                                                                         │
  │    timeout: !!int 1000                                                                    │
  │    init_script: struct = require('struct')                                                │
  │    items:                                                                                 │
  │      - name: coilTags                                                                     │
  │        type: !!int 1                                                                      │
  │        address: !!int 1                                                                   │
  │        count: !!int 10                                                                    │
  │      - name: holdingTags                                                                  │
  │        type: !!int 3                                                                      │
  │        address: !!int 24                                                                  │
  │        count: !!int 2                                                                     │
  │        script: |                                                                          │
  │          return struct.unpack('<I', struct.pack('<HH', result[0], result[1]));            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF17-mongodb.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF17 — MongoDB                                                     CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Writes data to a MongoDB collection.                                                     │
  │                                                                                           │
  │  Connector Type: MongoDB                                 Source ✗    Sink ✓               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "MongoDB".                   │
  │  address                string   Empty       Database connection string.                  │
  │  database               string   Empty       Database name.                               │
  │  collection             string   Empty       Collection name.                             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: mongo                                                                            │
  │    connector: MongoDB                                                                     │
  │    address: mongodb+srv://user:password@cluster0.h7xod.mongodb.net/                       │
  │      ?retryWrites=true&w=majority&appName=Cluster0                                        │
  │    database: DIME                                                                         │
  │    collection: TS                                                                         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  MongoDB Driver: https://www.mongodb.com/docs/drivers/csharp/current/                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF18-mqtt.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF18 — MQTT                                                        CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Subscribes to and publishes data via an MQTT broker.                                     │
  │                                                                                           │
  │  Connector Type: MQTT                                 Source ✓    Sink ✓                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "MQTT".                      │
  │  address                string   Empty       Broker hostname or IP address.               │
  │  port                   int      1883        Broker port.                                 │
  │  qos                    int      0           Quality of Service (0, 1, 2).                │
  │  itemized_read          bool     FALSE       Match streaming data against items list.     │
  │  clean_session          bool     TRUE        MQTT clean session.                          │
  │  tls                    bool     FALSE       SSL/TLS connection.                          │
  │  tls_insecure           bool     FALSE       Allow untrusted certificates.                │
  │  client_cert_path       string   Empty       Path to client certificate (.pfx).           │
  │  client_cert_password   string   Empty       Client certificate password.                 │
  │  ca_cert_path           string   Empty       Path to CA certificate.                      │
  │  username               string   Empty       Username.                                    │
  │  password               string   Empty       Password.                                    │
  │  items.address          string   Empty       Single or wildcard subscription topic.       │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: mqttSource1                                                                      │
  │    connector: MQTT                                                                        │
  │    address: wss.sharc.tech                                                                │
  │    port: !!int 1883                                                                       │
  │    items:                                                                                 │
  │      - name: subscribe1                                                                   │
  │        address: sharc/+/evt/#                                                             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "MQTT".                      │
  │  address                string   Empty       Broker hostname or IP address.               │
  │  port                   int      1883        Broker port.                                 │
  │  qos                    int      0           Quality of Service (0, 1, 2).                │
  │  retain                 bool     TRUE        Retain published messages.                   │
  │  base_topic             string   dime        Topic prefix for published messages.         │
  │  clean_session          bool     TRUE        MQTT clean session.                          │
  │  tls                    bool     FALSE       SSL/TLS connection.                          │
  │  tls_insecure           bool     FALSE       Allow untrusted certificates.                │
  │  client_cert_path       string   Empty       Path to client certificate (.pfx).           │
  │  client_cert_password   string   Empty       Client certificate password.                 │
  │  ca_cert_path           string   Empty       Path to CA certificate.                      │
  │  username               string   Empty       Username.                                    │
  │  password               string   Empty       Password.                                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: mqttSink1                                                                        │
  │    connector: MQTT                                                                        │
  │    address: wss.sharc.tech                                                                │
  │    port: !!int 1883                                                                       │
  │    base_topic: ids                                                                        │
  │    qos: !!int 0                                                                           │
  │    retain: !!bool true                                                                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  MQTTnet Github: https://github.com/dotnet/MQTTnet                                        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF19-mssql.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF19 — MSSQL                                                      CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from a Microsoft SQL database.                                                │
  │                                                                                           │
  │  Connector Type: MSSQL                              Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "MSSQL".                     │
  │  connection_string      string   Empty       Database connection string.                  │
  │  command_text           string   Empty       SQL query.                                   │
  │  items.address          string   Empty       DataTable column name.                       │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: msSqlSource1                                                                     │
  │    connector: MSSQL                                                                       │
  │    connection_string: Server=172.16.10.5;Database=Tykma;User Id=datareader;               │
  │      Password=datareader;Encrypt=True;TrustServerCertificate=True;                        │
  │    command_text: select top 5 * from dbo.SiliconeRubberOrders;                            │
  │    items:                                                                                 │
  │      - name: OrderNumber                                                                  │
  │        address: ManufacturingOrderNumber                                                  │
  │        script: return result[0];                                                          │
  │      - name: OrderQuantity                                                                │
  │        address: OrderQuantity                                                             │
  │        script: return result[0];                                                          │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF20-mtconnect-agent.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF20 — MTConnect Agent                                            CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads streaming data from an external MTConnect Agent. Serves an MTConnect embedded      │
  │  Agent.                                                                                   │
  │                                                                                           │
  │  Connector Type: MTConnectAgent                      Source ✓    Sink ✓                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "MTConnectAgent".            │
  │  address                string   Empty       Agent hostname or IP address.                │
  │  port                   int      5000        Agent port.                                  │
  │  device                 string   Empty       Device name to query.                        │
  │  itemized_read          bool     FALSE       Match streaming data against items list.     │
  │  items.address          string   Empty       DataItem ID to read.                         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: mtConnectSource1                                                                 │
  │    connector: MTConnectAgent                                                              │
  │    address: mtconnect.mazakcorp.com                                                       │
  │    port: !!int 5719                                                                       │
  │    device: HCN001                                                                         │
  │    interval: !!int 100                                                                    │
  │    items:                                                                                 │
  │      - name: PathPositionSample                                                           │
  │        address: pathpos                                                                   │
  │        script: |                                                                          │
  │          return result[0].Value;                                                          │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "MTConnectAgent".            │
  │  address                string   Empty       Agent hostname or IP address.                │
  │  port                   int      5000        Agent port.                                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: mtConnectSink1                                                                   │
  │    connector: MTConnectAgent                                                              │
  │    port: !!int 5000                                                                       │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  MTConnect.NET Github: https://github.com/TrakHound/MTConnect.NET                         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF21-mtconnect-mqtt.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF21 — MTConnect MQTT                                              CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Publishes MTConnect semantic payloads to an MQTT broker.                                 │
  │                                                                                           │
  │  Connector Type: MTConnectMQTT                        Source ✗    Sink ✓                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "MTConnectMQTT".             │
  │  address                string   localhost   Broker hostname or IP address.               │
  │  port                   int      1883        Broker port.                                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: mqtt                                                                             │
  │    connector: MTConnectMqtt                                                               │
  │    address: localhost                                                                     │
  │    port: !!int 1883                                                                       │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF22-mtconnect-shdr.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF22 — MTConnect SHDR                                             CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Streams SHDR to an external Agent.                                                       │
  │                                                                                           │
  │  Connector Type: MTConnectSHDR                       Source ✗    Sink ✓                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "MTConnectSHDR".             │
  │  port                   int      7878        SHDR listening port.                         │
  │  device_key             string   Empty       Device key.                                  │
  │  heartbeat_interval     int      10000       Ping/Pong frequency in milliseconds.         │
  │  filter_duplicates      bool     TRUE        Filter duplicates.                           │
  │  output_folder          string   ./Output/MTConnect   Folder path for Devices.xml.        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: shdrSink1                                                                        │
  │    connector: MTConnectSHDR                                                               │
  │    port: !!int 7878                                                                       │
  │    device_key: ~                                                                          │
  │    heartbeat_interval: !!int 10000                                                        │
  │    filter_duplicates: !!bool true                                                         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  MTConnect.NET Github: https://github.com/TrakHound/MTConnect.NET                         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF23-nws-weather.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF23 — NWS Weather                                                CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads weather at the specified location.                                                 │
  │                                                                                           │
  │  Connector Type: NwsWeather                          Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "NwsWeather".                │
  │  address                string   (see note)  Server hostname or IP address.               │
  │  agent                  string   (see note)  Unique user-agent.                           │
  │  items.address          string   Empty       Longitude and Latitude, comma separated.     │
  │  items.forecast         string   daily       Daily or hourly forecast.                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: nwsweather                                                                       │
  │    enabled: !!bool true                                                                   │
  │    scan_interval: !!int 10000                                                             │
  │    connector: NwsWeather                                                                  │
  │    address: https://api.weather.gov                                                       │
  │    agent: (DimeWeather, contact@dime.com)                                                 │
  │    items:                                                                                 │
  │      - name: NewYork                                                                      │
  │        address: 40.7128, -74.0060                                                         │
  │        forecast: daily                                                                    │
  │        script: |                                                                          │
  │          print(result.properties.periods[0].temperature)                                  │
  │          return result.properties.periods[0].temperature;                                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  NOTES
  ─────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Default address: https://api.weather.gov                                                 │
  │  Default agent: (MyWeatherApp, contact@example.com)                                       │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF24-opc-da.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF24 — OPC-DA                                                     CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads items from an OPC-DA server.                                                       │
  │                                                                                           │
  │  Connector Type: OpcDA                               Source ✓    Sink ✗                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "OpcDA".                     │
  │  address                string   (see note)  Server node.                                 │
  │  items.address          string   Empty       Node ID to read.                             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: opcDaSource1                                                                     │
  │    connector: OpcDA                                                                       │
  │    address: Kepware.KEPServerEX.V6                                                        │
  │    items:                                                                                 │
  │      - name: DateTime                                                                     │
  │        address: _System._DateTime                                                         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  NOTES
  ─────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  DIME 32bit build is required to use OPC-DA connector.                                    │
  │  Default address: Kepware.KEPServerEX.V6                                                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  TitaniumAs.OPC.Client Github: https://github.com/titanium-as/TitaniumAS.Opc.Client       │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF25-opc-ua.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF25 — OPC-UA                                                     CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads items from an OPC-UA server. Writes items to an OPC-UA server.                     │
  │                                                                                           │
  │  Connector Type: OpcUA                               Source ✓    Sink ✓                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "OpcUA".                     │
  │  address                string   Empty       Server hostname or IP address.               │
  │  port                   int      49320       Server port.                                 │
  │  path                   string   Empty       Server path.                                 │
  │  timeout                int      1000        Timeout in milliseconds.                     │
  │  mode                   int      None        1=None, 2=Sign, 3=SignAndEncrypt.            │
  │  policy                 int      None        1=None, 2=Basic256, 3=Basic128Rsa15,         │
  │                                              4=Basic256Sha256.                            │
  │  anonymous              bool     FALSE       Connect anonymously.                         │
  │  username               string   Empty       Username.                                    │
  │  password               string   Empty       Password.                                    │
  │  allow_status_codes     list     Empty       Allowed status codes (won't cause errors).   │
  │  items.address          string   Empty       Node ID to read.                             │
  │  items.namespace        int      2           Namespace ID to read.                        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: opcUaSource1                                                                     │
  │    connector: OpcUA                                                                       │
  │    address: localhost                                                                     │
  │    port: !!int 49320                                                                      │
  │    timeout: !!int 1000                                                                    │
  │    anonymous: !!bool false                                                                │
  │    username: chris                                                                        │
  │    password: passwordpassword                                                             │
  │    allowed_status_codes:                                                                  │
  │      - 2156724224                                                                         │
  │    items:                                                                                 │
  │      - name: DateTime                                                                     │
  │        namespace: !!int 2                                                                 │
  │        address: _System._DateTime                                                         │
  │      - name: Random                                                                       │
  │        namespace: !!int 2                                                                 │
  │        address: Simulation Examples.Functions.Random6                                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "OpcUA".                     │
  │  address                string   Empty       Server hostname or IP address.               │
  │  port                   int      49320       Server port.                                 │
  │  timeout                int      1000        Timeout in milliseconds.                     │
  │  mode                   int      None        1=None, 2=Sign, 3=SignAndEncrypt.            │
  │  policy                 int      None        1=None, 2=Basic256, 3=Basic128Rsa15,         │
  │                                              4=Basic256Sha256.                            │
  │  anonymous              bool     FALSE       Connect anonymously.                         │
  │  username               string   Empty       Username.                                    │
  │  password               string   Empty       Password.                                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: opcUaSink1                                                                       │
  │    connector: OpcUA                                                                       │
  │    address: localhost                                                                     │
  │    port: !!int 49320                                                                      │
  │    timeout: !!int 1000                                                                    │
  │    anonymous: !!bool false                                                                │
  │    username: chris                                                                        │
  │    password: passwordpassword                                                             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  LibUA Github: https://github.com/nauful/libua                                            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF26-postgres.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF26 — Postgres                                                    CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from a PostgreSQL database.                                                   │
  │                                                                                           │
  │  Connector Type: Postgres                              Source ✓    Sink ✗                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "Postgres".                  │
  │  connection_string      string   Empty       Database connection string.                  │
  │  command_text           string   Empty       SQL query.                                   │
  │  items.address          string   Empty       DataTable column name.                       │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: postgresSource1                                                                  │
  │    connector: Postgres                                                                    │
  │    connection_string: Host=172.16.10.43;Port=5342;Username=postgres;Password=postgres;…   │
  │    command_text: select * from public.fedex limit 3;                                      │
  │    items:                                                                                 │
  │      - name: TrackingNumber                                                               │
  │        address: package_tracking_number                                                   │
  │        script: return result[0];                                                          │
  │      - name: ShipToName                                                                   │
  │        address: ship_to_name                                                              │
  │        script: return result;                                                             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Npgsql Github: https://github.com/npgsql/npgsql                                          │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF27-redis.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF27 — Redis                                                       CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads and writes data via Redis.                                                         │
  │                                                                                           │
  │  Connector Type: Redis                                 Source ✓    Sink ✓                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "Redis".                     │
  │  address                string   Empty       Server hostname or IP address.               │
  │  port                   int      6379        Server port.                                 │
  │  database               int      0           Database ID.                                 │
  │  items.address          string   Empty       Cache path.                                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: redisSource1                                                                     │
  │    connector: Redis                                                                       │
  │    address: 172.24.56.104                                                                 │
  │    port: !!int 6379                                                                       │
  │    database: !!int 0                                                                      │
  │    items:                                                                                 │
  │      - name: plcGoodPartCount                                                             │
  │        address: eipSource1/GoodPartCount                                                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "Redis".                     │
  │  address                string   Empty       Server hostname or IP address.               │
  │  port                   int      6379        Server port.                                 │
  │  database               int      0           Database ID.                                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: redisSink1                                                                       │
  │    connector: Redis                                                                       │
  │    address: 172.24.56.104                                                                 │
  │    port: !!int 6379                                                                       │
  │    database: !!int 0                                                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Redis Github: https://stackexchange.github.io/StackExchange.Redis/                       │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF28-ros2.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF28 — ROS2                                                        CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Subscribes to ROS2 topics.                                                               │
  │                                                                                           │
  │  Connector Type: ROS2                                 Source ✓    Sink ✗                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "ROS2".                      │
  │  message_libraries      string[] Empty       Paths to ROS2 message structure DLLs.        │
  │  items.address          string   Empty       Topic.                                       │
  │  items.type             string   Empty       Qualified type of ROS2 message structure.    │
  │  items.qos_reliability  string   best_effort Reliability: 'reliable' or 'best_effort'.    │
  │  items.qos_durability   string   volatile    Durability: 'volatile' or 'transient_local'. │
  │  items.qos_history      string   keep_last   History: 'keep_last' or 'keep_all'.          │
  │  items.qos_depth        int      10          Queue depth for keep_last history.           │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: ros2                                                                             │
  │    connector: Ros2                                                                        │
  │    message_libraries:                                                                     │
  │      - ./Configs/Ros2cs-ros2-sensor_msgs.dll                                              │
  │      - ./Configs/Ros2cs-clearpathrobotics-clearpath_msgs.dll                              │
  │    items:                                                                                 │
  │      - name: Chatter                                                                      │
  │        type: Ros2cs.Messages.Std.String, DIME                                             │
  │        address: /chatter                                                                  │
  │        script: |                                                                          │
  │          print(result)                                                                    │
  │          return result.Data                                                               │
  │      - name: EmergencyStop                                                                │
  │        type: Ros2cs.Messages.Std.Bool, DIME                                               │
  │        address: /A300_XXXXX/platform/emergency_stop                                       │
  │        script: return result                                                              │
  │      - name: BatteryStatus                                                                │
  │        type: Ros2cs.Messages.Sensor.BatteryState, Ros2cs-ros2-sensor_msgs                 │
  │        address: /A300_XXXXX/platform/bms/status                                           │
  │        script: return result                                                              │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF29-script.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF29 — Script                                                      CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Executes arbitrary scripts.                                                              │
  │                                                                                           │
  │  Connector Type: Script                                Source ✓    Sink ✗                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "Script".                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: scriptSource1                                                                    │
  │    connector: Script                                                                      │
  │    init_script: ~                                                                         │
  │    deinit_script: ~                                                                       │
  │    enter_script: ~                                                                        │
  │    exit_script: ~                                                                         │
  │    items:                                                                                 │
  │      - name: Temperature                                                                  │
  │        script: |                                                                          │
  │          return math.random(100);                                                         │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  "Programming in Lua": https://www.lua.org/pil/1.html                                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF30-siemens-s7.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF30 — Siemens S7                                                  CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads registers from a Siemens S7 PLC.                                                   │
  │                                                                                           │
  │  Connector Type: SiemensS7                             Source ✓    Sink ✗                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "SiemensS7".                 │
  │  type                   string   S71200      PLC type ('S71200','S7200','S7300',          │
  │                                              'S7400','S7200Smart','S71500',               │
  │                                              'Logo0BA8').                                 │
  │  address                string   Empty       PLC hostname or IP address.                  │
  │  port                   int      102         PLC port.                                    │
  │  rack                   int      0           PLC rack.                                    │
  │  slot                   int      0           PLC slot.                                    │
  │  bypass_ping            bool     FALSE       Ping PLC before reading.                     │
  │  items.address          string   Empty       Register address.                            │
  │  items.type             string   Empty       PLC register type ('bool','sbyte',           │
  │                                              'short','int','long','float','string').      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: plcSource1                                                                       │
  │    connector: SiemensS7                                                                   │
  │    type: S71200                                                                           │
  │    address: 192.168.111.20                                                                │
  │    port: !!int 102                                                                        │
  │    rack: !!int 0                                                                          │
  │    slot: !!int 0                                                                          │
  │    bypass_ping: !!bool true                                                               │
  │    items:                                                                                 │
  │      - name: input0                                                                       │
  │        type: bool                                                                         │
  │        address: I0.0                                                                      │
  │      - name: output0                                                                      │
  │        type: bool                                                                         │
  │        address: Q0.0                                                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  S7netplus Github: https://github.com/S7NetPlus/s7netplus                                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF31-snmp.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF31 — SNMP                                                        CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads SNMP device.                                                                       │
  │                                                                                           │
  │  Connector Type: SNMP                                  Source ✓    Sink ✗                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "SNMP".                      │
  │  address                string   Empty       Device hostname or IP address.               │
  │  port                   int      161         Device port.                                 │
  │  community              string   public      Community.                                   │
  │  timeout                int      1000        Read timeout.                                │
  │  items.address          string   Empty       Item OID.                                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: snmpSource1                                                                      │
  │    connector: SNMP                                                                        │
  │    address: 192.168.150.143                                                               │
  │    port: !!int 161                                                                        │
  │    community: public                                                                      │
  │    timeout: !!int 1000                                                                    │
  │    items:                                                                                 │
  │      - name: Temperature                                                                  │
  │        address: 1.3.6.1.4.1.6574.1.2.0                                                    │
  │      - name: Model                                                                        │
  │        address: 1.3.6.1.4.1.6574.1.5.1.0                                                  │
  │      - name: SerialNumber                                                                 │
  │        address: 1.3.6.1.4.1.6574.1.5.2.0                                                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  SNMP Library Github: https://docs.lextudio.com/sharpsnmplib/                             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF32-sparkplugb.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF32 — SparkplugB                                                  CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Subscribes to and publishes data via a SparkplugB host.                                  │
  │                                                                                           │
  │  Connector Type: SparkplugB                            Source ✓    Sink ✓                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "SparkplugB".                │
  │  address                string   Empty       Host hostname or IP address.                 │
  │  port                   int      1883        Host port.                                   │
  │  username               string   Empty       Username.                                    │
  │  password               string   Empty       Password.                                    │
  │  clean_session          bool     TRUE        Clean session.                               │
  │  qos                    int      0           Quality of service (0, 1, 2).                │
  │  items.address          string   Empty       SpB topic.                                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: spb                                                                              │
  │    connector: SparkplugB                                                                  │
  │    address: localhost                                                                     │
  │    port: !!int 1883                                                                       │
  │    username: user                                                                         │
  │    password: password                                                                     │
  │    clean_session: !!bool true                                                             │
  │    qos: !!int 0                                                                           │
  │    items:                                                                                 │
  │      - name: F1D1                                                                         │
  │        address: spBv1.0/Chicago/DDATA/Factory1/DIME1                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "SparkplugB".                │
  │  address                string   Empty       Host hostname or IP address.                 │
  │  port                   int      1883        Host port.                                   │
  │  username               string   Empty       Username.                                    │
  │  password               string   Empty       Password.                                    │
  │  host_id                string   dime        Host ID.                                     │
  │  group_id               string   dime        Group ID.                                    │
  │  node_id                string   dime        Node ID.                                     │
  │  device_id              string   dime        Device ID.                                   │
  │  reconnect_interval     int      15000       Reconnect interval in milliseconds.          │
  │  birth_delay            int      10000       Delay birth certificate in milliseconds.     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: sparkplugBSink1                                                                  │
  │    connector: SparkplugB                                                                  │
  │    address: localhost                                                                     │
  │    port: !!int 1883                                                                       │
  │    username: admin                                                                        │
  │    password: admin                                                                        │
  │    host_id: dime                                                                          │
  │    group_id: dime                                                                         │
  │    node_id: dime                                                                          │
  │    device_id: dime                                                                        │
  │    reconnect_interval: !!int 15000                                                        │
  │    birth_delay: !!int 10000                                                               │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  SparkplugNet Github: https://github.com/SeppPenner/SparkplugNet                          │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF33-splunk-eh-sdk.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF33 — Splunk EH SDK                                               CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Writes data to Splunk via Splunk EdgeHub SDK. Includes V1 and V2 variants.               │
  │                                                                                           │
  │  Connector Types: SplunkEhSdk1, SplunkEhSdk2          Source ✗    Sink ✓                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES (V1)
  ────────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "SplunkEhSdk1".              │
  │  address                string   http://ho…  Internal address.                            │
  │  port                   int      50051       Internal port.                               │
  │  numbers_to_metrics     bool     FALSE       Write numbers as metrics.                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE (V1)
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: splunkEhSdk                                                                      │
  │    connector: SplunkEhSDK1                                                                │
  │    address: http://host.docker.internal                                                   │
  │    port: !!int 50051                                                                      │
  │    numbers_to_metrics: !!bool true                                                        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES (V2)
  ────────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "SplunkEhSdk2".              │
  │  address                string   http://ho…  Internal address.                            │
  │  port                   int      50051       Internal port.                               │
  │  topic                  string   Empty       EdgeHub SDK ingestion topic.                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE (V2)
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: splunkEhSdk                                                                      │
  │    connector: SplunkEhSDK2                                                                │
  │    address: http://host.docker.internal                                                   │
  │    port: !!int 50051                                                                      │
  │    topic: dime/dev                                                                        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF34-splunk-hec.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF34 — Splunk HEC                                                  CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Writes data to Splunk via Splunk HEC.                                                    │
  │                                                                                           │
  │  Connector Type: SplunkHEC                             Source ✗    Sink ✓                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "SplunkHEC".                 │
  │  address                string   Empty       Splunk hostname or IP address.               │
  │  port                   int      8088        Splunk HEC port.                             │
  │  use_ssl                bool     FALSE       Use HTTP or HTTPS.                           │
  │  token                  string   Empty       Splunk HEC token.                            │
  │  event_or_metric        string   event       Send as 'event' or 'metric'.                 │
  │  source                 string   Empty       Source.                                      │
  │  source_type            string   _json       Source type.                                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: splunkHecSink1                                                                   │
  │    connector: SplunkHEC                                                                   │
  │    address: localhost                                                                     │
  │    port: 8088                                                                             │
  │    use_ssl: false                                                                         │
  │    token: abc123                                                                          │
  │    event_or_metric: event                                                                 │
  │    source: source1                                                                        │
  │    source_type: _json                                                                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF35-tcp-ascii.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF35 — TcpASCII                                                    CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Sends ASCII commands over a socket and reads back the response.                          │
  │                                                                                           │
  │  Connector Type: TcpASCII                               Source ✓    Sink ✗                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "TcpASCII".                  │
  │  address                string   Empty       Hostname or IP address.                      │
  │  port                   int      23          Port.                                        │
  │  read_delay             int      0           Delay in ms between socket write and read.   │
  │  reuse_connection       bool     TRUE        Maintain a single connection.                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: haas1                                                                            │
  │    connector: TcpASCII                                                                    │
  │    address: 192.168.111.216                                                               │
  │    port: !!int 5051                                                                       │
  │    read_delay: !!int 400                                                                  │
  │    items:                                                                                 │
  │      - name: SerialNumber                                                                 │
  │        address: ?Q100                                                                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF36-timescale-ws.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF36 — TimescaleWS                                                 CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Subscribes to data from a Timescale Historian via a WebSocket.                           │
  │                                                                                           │
  │  Connector Type: TimebaseWS                             Source ✓    Sink ✗                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "TimebaseWS".                │
  │  address                string   Empty       Hostname or IP address.                      │
  │  port                   int      4511        Port.                                        │
  │  items.address          string   Empty       Path to historian item.                      │
  │  items.group            string   Empty       Historian item group.                        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: timebaseWsSource1                                                                │
  │    connector: TimebaseWS                                                                  │
  │    address: localhost                                                                     │
  │    port: 4511                                                                             │
  │    items:                                                                                 │
  │      - name: plcExecution                                                                 │
  │        group: MQTT Data                                                                   │
  │        address: dime/eipSource1/Execution/Data                                            │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF37-trakhound-http.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF37 — TrakhoundHTTP                                               CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Writes data to a Trakhound server.                                                       │
  │                                                                                           │
  │  Connector Type: TrakhoundHTTP                          Source ✗    Sink ✓                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "TrakhoundHTTP".             │
  │  address                string   Empty       Trakhound hostname or IP address.            │
  │  port                   int      8472        Trakhound port.                              │
  │  use_ssl                bool     FALSE       Use HTTPS or HTTP.                           │
  │  router                 string   Empty       Router name.                                 │
  │  host_path              string   Empty       Host path.                                   │
  │  base_path              string   Empty       Base path.                                   │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: trakhoundHttpSink1                                                               │
  │    enabled: !!bool false                                                                  │
  │    scan_interval: !!int 1000                                                              │
  │    connector: TrakHoundHTTP                                                               │
  │    address: localhost                                                                     │
  │    port: 8472                                                                             │
  │    use_ssl: false                                                                         │
  │    router: default                                                                        │
  │    base_path: Ladder99:/DIME/HttpSink                                                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF38-udp-server.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF38 — UDP Server                                                  CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from a UDP socket.                                                            │
  │                                                                                           │
  │  Connector Type: UDPServer                              Source ✓    Sink ✗                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "UDPServer".                 │
  │  address                string   Empty       IP address (hostname not accepted).          │
  │  port                   int      2323        Port to listen on.                           │
  │  items.address          string   Empty       'message' represents the byte array received.│
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: udpserver                                                                        │
  │    enabled: !!bool true                                                                   │
  │    scan_interval: !!int 1000                                                              │
  │    connector: UDPServer                                                                   │
  │    address: 0.0.0.0                                                                       │
  │    port: 2323                                                                             │
  │    items:                                                                                 │
  │      - name: message                                                                      │
  │        address: message                                                                   │
  │        script: return result[0]                                                           │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF39-websocket-server.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF39 — WebsocketServer                                            CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Serves data from a WebSocket Server.                                                     │
  │                                                                                           │
  │  Connector Type: WebsocketServer                        Source ✗    Sink ✓                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK PROPERTIES
  ───────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "WebsocketServer".           │
  │  uri                    string   ws://127.…  WebSocket server address.                    │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SINK EXAMPLE
  ────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: wsServerSink1                                                                    │
  │    connector: WebsocketServer                                                             │
  │    uri: ws://127.0.0.1:8082/                                                              │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  NOTES
  ─────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  URI can be changed to ws://0.0.0.0:8082/ to serve data on all adapters.                  │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF40-wintriss-smartpac.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF40 — Wintriss SmartPAC                                           CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from a Wintriss SmartPAC controller.                                          │
  │                                                                                           │
  │  Connector Type: SmartPAC                               Source ✓    Sink ✗                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "SmartPAC".                  │
  │  address                string   Empty       Hostname or IP address.                      │
  │  port                   int      1007        Port.                                        │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: smartpacSource1                                                                  │
  │    connector: SmartPAC                                                                    │
  │    address: 172.16.200.18                                                                 │
  │    port: !!int 1007                                                                       │
  │    items:                                                                                 │
  │      - name: PressType                                                                    │
  │        enabled: !!bool true                                                               │
  │        script: return result[0];                                                          │
  │      - name: PressName                                                                    │
  │        enabled: !!bool true                                                               │
  │        script: return result[1];                                                          │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF41-xml-web-scraper.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF41 — XMLWebScraper                                               CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from an XML web page.                                                         │
  │                                                                                           │
  │  Connector Type: XMLWebScraper                          Source ✓    Sink ✗                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "XMLWebScraper".             │
  │  uri                    string   http://lo…  Web page address.                            │
  │  namespaces             dict     Empty       Namespace mappings.                          │
  │  items.address          string   Empty       XPath query.                                 │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: xml1                                                                             │
  │    connector: XMLWebScraper                                                               │
  │    uri: http://192.168.111.216:8082/current                                               │
  │    namespaces:                                                                            │
  │      mt: urn:mtconnect.org:MTConnectStreams:1.2                                           │
  │    item_script: |                                                                         │
  │      return result.InnerText                                                              │
  │    items:                                                                                 │
  │      - name: node1                                                                        │
  │        address: //mt:Message[@dataItemId='sp2maxpwr']                                     │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  REFERENCES
  ──────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  XPath Syntax: https://www.w3schools.com/Xml/xpath_syntax.asp                             │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════

================================================================================
FILE: content/REF42-yaskawa-robot.md
================================================================================


═══════════════════════════════════════════════════════════════════════════════════════════════
  REF42 — Yaskawa Robot                                               CONNECTOR REFERENCE
═══════════════════════════════════════════════════════════════════════════════════════════════

  ┌─ OVERVIEW ────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Reads data from DX200, YRC1000, YRC1000 Micro Yaskawa controllers.                      │
  │                                                                                           │
  │  Connector Type: Yaskawa                                Source ✓    Sink ✗                │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE PROPERTIES
  ─────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Name                   Type     Default     Description                                  │
  │  ─────────────────────  ───────  ──────────  ──────────────────────────────────────────── │
  │  connector              string   "Undefined" Connector type, "Yaskawa".                   │
  │  address                string   Empty       Robot IP address or hostname.                │
  │  items.address          string   Empty       Robot variable address.                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  VARIABLE ADDRESSES
  ──────────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  Cartesian Positions      Torque            Status                                        │
  │  ────────────────────────  ────────────────  ──────────────────────────────────────────── │
  │  cartesianPositions.X     torque.Axis1      status.CommandRemote                          │
  │  cartesianPositions.Y     torque.Axis2      status.InHoldStatusPendant                    │
  │  cartesianPositions.Z     torque.Axis3      status.InHoldStatusExternally                 │
  │  cartesianPositions.Rx    torque.Axis4      status.InHoldStatusByCommand                  │
  │  cartesianPositions.Ry    torque.Axis5      status.Alarming                               │
  │  cartesianPositions.Rz    torque.Axis6      status.ErrorOccurring                         │
  │                                             status.ServoOn                                │
  │  Joint Positions          Alarm             status.Step                                   │
  │  ────────────────────────  ────────────────  status.Cycle                                 │
  │  jointPositions.Axis1     alarm.Code        status.Automatic                              │
  │  jointPositions.Axis2     alarm.Data        status.Running                                │
  │  jointPositions.Axis3     alarm.Type        status.InGuardSafeOperation                   │
  │  jointPositions.Axis4     alarm.OccurringT… status.Teach                                  │
  │  jointPositions.Axis5     alarm.Text        status.Play                                   │
  │  jointPositions.Axis6                                                                     │
  │                                             Job                                           │
  │  Position Error                             ────────────────────────────────────────────  │
  │  ────────────────────────                   job.Name                                      │
  │  positionError.Axis1                        job.Line                                      │
  │  positionError.Axis2                        job.Step                                      │
  │  positionError.Axis3                        job.SpeedOverride                             │
  │  positionError.Axis4                                                                      │
  │  positionError.Axis5                                                                      │
  │  positionError.Axis6                                                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

  SOURCE EXAMPLE
  ──────────────
  ┌───────────────────────────────────────────────────────────────────────────────────────────┐
  │                                                                                           │
  │  - name: yaskawa1                                                                         │
  │    connector: Yaskawa                                                                     │
  │    address: 10.1.1.200                                                                    │
  │    items:                                                                                 │
  │      - name: xpos                                                                         │
  │        address: cartesianPositions.X                                                      │
  │                                                                                           │
  └───────────────────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════════════════════
